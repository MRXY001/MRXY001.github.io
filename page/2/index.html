<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    <meta http-equiv="Content-Language" content="zh-cn">
    <meta charset="utf-8">
    
    
    <link rel="canonical" href="http://blog.iwxyi.com/page/2/">
    
    
    <title>云笺 | 一些技术摘要和写作技巧</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    
    <meta name="theme-color" content="#77AAFF">
    
    
    <meta name="keywords" content="编程,开发,软件,写作">
    
    

    

    <!-- Baidu Push -->
<script>
	(function(){
		var bp = document.createElement('script');
		var curProtocol = window.location.protocol.split(':')[0];
		if (curProtocol === 'https') {
			bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
		}
		else {
			bp.src = 'http://push.zhanzhang.baidu.com/push.js';
		}
		var s = document.getElementsByTagName("script")[0];
		s.parentNode.insertBefore(bp, s);
	})();

	var _hmt = _hmt || [];
</script>



    
    <meta name="description" content="杂而又杂的笔记与感想">
<meta name="keywords" content="编程,开发,软件,写作">
<meta property="og:type" content="website">
<meta property="og:title" content="云笺">
<meta property="og:url" content="http://blog.iwxyi.com/page/2/index.html">
<meta property="og:site_name" content="云笺">
<meta property="og:description" content="杂而又杂的笔记与感想">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="云笺">
<meta name="twitter:description" content="杂而又杂的笔记与感想">
    
        <link rel="alternate" type="application/atom+xml" title="云笺" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link id="style" rel="stylesheet" href="/css/style.css?v=3.0">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    
            
</head>

<body>
    <div id="loading" class="active"></div>
    <aside id="menu"   >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" >
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg" alt="avatar">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname" id="name">小乂</h5>
          
            <div id="yiyanmotto" class="motto">&nbsp;</div>
          
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
              <li class="waves-block waves-effect">
                  <a href="/"  >
                    <i class="icon icon-lg icon-home"></i>
                    <span>主 页</span><i class="icon icon-lg icon-caret-left"></i>
                  </a>
              </li>
            
              <li class="waves-block waves-effect">
                  <a href="/archives"  >
                    <i class="icon icon-lg icon-archives"></i>
                    <span>归 档</span><i class="icon icon-lg icon-caret-left"></i>
                  </a>
              </li>
            
              <li class="waves-block waves-effect">
                  <a href="/categories"  >
                    <i class="icon icon-lg icon-th-list"></i>
                    <span>分 类</span><i class="icon icon-lg icon-caret-left"></i>
                  </a>
              </li>
            
              <li class="waves-block waves-effect">
                  <a href="/tags"  >
                    <i class="icon icon-lg icon-tags"></i>
                    <span>标 签</span><i class="icon icon-lg icon-caret-left"></i>
                  </a>
              </li>
            
              <li class="waves-block waves-effect">
                  <a href="/about"  >
                    <i class="icon icon-lg icon-link"></i>
                    <span>相 关</span><i class="icon icon-lg icon-caret-left"></i>
                  </a>
              </li>
            
      <div class="nav2">
          
              <a class="nav2item" data-title="Email" href="mailto:wxy@iwxyi.com" target="_parent"title="Email" >
                <i class="icon icon-lg icon-envelope-o envelope-o"></i>
              </a>
          
              <a class="nav2item" data-title="Github" href="https://github.com/iwxyi" target="_blank"title="Github" >
                <i class="icon icon-lg icon-github github"></i>
              </a>
          
              <a class="nav2item" data-title="微博" href="https://weibo.com/u/6065548594" target="_blank"title="微博" >
                <i class="icon icon-lg icon-weibo weibo"></i>
              </a>
          

            </div>

      </ul>

    </div>
  </div>

</aside>


    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">云笺</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        <a href="../../atom.xml" target="_blank" class="header-icon waves-effect waves-circle waves-light" id="Rss">
            <i class="icon icon-lg icon-rss"></i>
        </a>
    </div>
</header>
<header class="content-header index-header">
    
    
    <div class="container fade-scale">
        <div id="myheader">
            <h1 class="title">
                 
                    云笺
                
            </h1>
            <h5 class="subtitle">
                
                    在小全栈的道路上努力前行
                
            </h5>
        </div>
    </div>

</header>

<div class="container body-wrap">
    <ul class="post-list">
    
        <li class="post-list-item fade">
            <article id="post-Thymeleaf用法"
  class="article-card article-type-post" itemprop="blogPost">

    


  
    <h3 class="post-title" itemprop="name">
      <a href="/2020/12/22/Thymeleaf用法/">Thymeleaf用法</a>
    </h3>
  




     <div class="post-meta">
        <time class="post-time" title="2020-12-22 17:33:00" datetime="2020-12-22T09:33:00.000Z"  itemprop="datePublished">2020-12-22</time>

    </div>

    <div class="post-content" id="post-content" itemprop="postContent">

    
        <a id="more"></a>

<p>作者：纯洁的微笑<br>出处：<a href="http://www.ityouknow.com/thymeleaf/2016/09/01/构建微服务-thymeleaf使用详解.html" target="_blank" rel="noopener">http://www.ityouknow.com/</a></p>
<h2 id="thymeleaf介绍"><a href="#thymeleaf介绍" class="headerlink" title="thymeleaf介绍"></a>thymeleaf介绍</h2><p>简单说， Thymeleaf 是一个跟 Velocity、FreeMarker 类似的模板引擎，它可以完全替代 JSP 。相较与其他的模板引擎，它有如下三个极吸引人的特点：</p>
<ul>
<li>1.Thymeleaf 在有网络和无网络的环境下皆可运行，即它可以让美工在浏览器查看页面的静态效果，也可以让程序员在服务器查看带数据的动态页面效果。这是由于它支持 html 原型，然后在 html 标签里增加额外的属性来达到模板+数据的展示方式。浏览器解释 html 时会忽略未定义的标签属性，所以 thymeleaf 的模板可以静态地运行；当有数据返回到页面时，Thymeleaf 标签会动态地替换掉静态内容，使页面动态显示。</li>
<li>2.Thymeleaf 开箱即用的特性。它提供标准和<a href="http://lib.csdn.net/base/javaee" target="_blank" rel="noopener">spring</a>标准两种方言，可以直接套用模板实现JSTL、 OGNL表达式效果，避免每天套模板、该jstl、改标签的困扰。同时开发人员也可以扩展和创建自定义的方言。</li>
<li>3.Thymeleaf 提供spring标准方言和一个与 SpringMVC 完美集成的可选模块，可以快速的实现表单绑定、属性编辑器、国际化等功能。</li>
</ul>
<h2 id="标准表达式语法"><a href="#标准表达式语法" class="headerlink" title="标准表达式语法"></a>标准表达式语法</h2><p>它们分为四类：</p>
<ul>
<li>1.变量表达式</li>
<li>2.选择或星号表达式</li>
<li>3.文字国际化表达式</li>
<li>4.URL表达式</li>
</ul>
<h3 id="变量表达式"><a href="#变量表达式" class="headerlink" title="变量表达式"></a>变量表达式</h3><p>变量表达式即OGNL表达式或Spring EL表达式(在Spring术语中也叫model attributes)。如下所示：<br><code>${session.user.name}</code></p>
<p>它们将以HTML标签的一个属性来表示：</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"${book.author.name}"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">th:each</span>=<span class="string">"book : ${books}"</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="选择-星号-表达式"><a href="#选择-星号-表达式" class="headerlink" title="选择(星号)表达式"></a>选择(星号)表达式</h3><p>选择表达式很像变量表达式，不过它们用一个预先选择的对象来代替上下文变量容器(map)来执行，如下：<br><code>*{customer.name}</code></p>
<p>被指定的object由th:object属性定义：</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:object</span>=<span class="string">"${book}"</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"*{title}"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="文字国际化表达式"><a href="#文字国际化表达式" class="headerlink" title="文字国际化表达式"></a>文字国际化表达式</h3><p>文字国际化表达式允许我们从一个外部文件获取区域文字信息(.properties)，用Key索引Value，还可以提供一组参数(可选).</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#{main.title}</span><br><span class="line">#{message.entrycreated(${entryId})}</span><br></pre></td></tr></tbody></table></figure>

<p>可以在模板文件中找到这样的表达式代码：</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span> <span class="attr">th:text</span>=<span class="string">"#{header.address.city}"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span> <span class="attr">th:text</span>=<span class="string">"#{header.address.country}"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="URL表达式"><a href="#URL表达式" class="headerlink" title="URL表达式"></a>URL表达式</h3><p>URL表达式指的是把一个有用的上下文或回话信息添加到URL，这个过程经常被叫做URL重写。<br><code>@{/order/list}</code><br>URL还可以设置参数：<br><code>@{/order/details(id=${orderId})}</code><br>相对路径：<br><code>@{../documents/report}</code></p>
<p>让我们看这些表达式：</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">"@{/createOrder}"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"main.html"</span> <span class="attr">th:href</span>=<span class="string">"@{/main}"</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="变量表达式和星号表达有什么区别吗？"><a href="#变量表达式和星号表达有什么区别吗？" class="headerlink" title="变量表达式和星号表达有什么区别吗？"></a>变量表达式和星号表达有什么区别吗？</h3><p>如果不考虑上下文的情况下，两者没有区别；星号语法评估在选定对象上表达，而不是整个上下文<br>什么是选定对象？就是父标签的值，如下：</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:object</span>=<span class="string">"${session.user}"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Name: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"*{firstName}"</span>&gt;</span>Sebastian<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Surname: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"*{lastName}"</span>&gt;</span>Pepper<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Nationality: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"*{nationality}"</span>&gt;</span>Saturn<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>这是完全等价于：</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:object</span>=<span class="string">"${session.user}"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Name: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"${session.user.firstName}"</span>&gt;</span>Sebastian<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Surname: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"${session.user.lastName}"</span>&gt;</span>Pepper<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Nationality: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"${session.user.nationality}"</span>&gt;</span>Saturn<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>当然，美元符号和星号语法可以混合使用：</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:object</span>=<span class="string">"${session.user}"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Name: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"*{firstName}"</span>&gt;</span>Sebastian<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Surname: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"${session.user.lastName}"</span>&gt;</span>Pepper<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Nationality: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"*{nationality}"</span>&gt;</span>Saturn<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="表达式支持的语法"><a href="#表达式支持的语法" class="headerlink" title="表达式支持的语法"></a>表达式支持的语法</h3><h4 id="字面（Literals）"><a href="#字面（Literals）" class="headerlink" title="字面（Literals）"></a>字面（Literals）</h4><ul>
<li>文本文字（Text literals）: <code>'one text', 'Another one!',…</code></li>
<li>数字文本（Number literals）: <code>0, 34, 3.0, 12.3,…</code></li>
<li>布尔文本（Boolean literals）: <code>true, false</code></li>
<li>空（Null literal）: <code>null</code></li>
<li>文字标记（Literal tokens）: <code>one, sometext, main,…</code></li>
</ul>
<h4 id="文本操作（Text-operations）"><a href="#文本操作（Text-operations）" class="headerlink" title="文本操作（Text operations）"></a>文本操作（Text operations）</h4><ul>
<li>字符串连接(String concatenation): <code>+</code></li>
<li>文本替换（Literal substitutions）: <code>|The name is ${name}|</code></li>
</ul>
<h4 id="算术运算（Arithmetic-operations）"><a href="#算术运算（Arithmetic-operations）" class="headerlink" title="算术运算（Arithmetic operations）"></a>算术运算（Arithmetic operations）</h4><ul>
<li>二元运算符（Binary operators）: <code>+, -, *, /, %</code></li>
<li>减号（单目运算符）Minus sign (unary operator): <code>-</code></li>
</ul>
<h4 id="布尔操作（Boolean-operations）"><a href="#布尔操作（Boolean-operations）" class="headerlink" title="布尔操作（Boolean operations）"></a>布尔操作（Boolean operations）</h4><ul>
<li>二元运算符（Binary operators）:<code>and, or</code></li>
<li>布尔否定（一元运算符）Boolean negation (unary operator):<code>!, not</code></li>
</ul>
<h4 id="比较和等价-Comparisons-and-equality"><a href="#比较和等价-Comparisons-and-equality" class="headerlink" title="比较和等价(Comparisons and equality)"></a>比较和等价(Comparisons and equality)</h4><ul>
<li>比较（Comparators）: <code>&gt;, &lt;, &gt;=, &lt;= (gt, lt, ge, le)</code></li>
<li>等值运算符（Equality operators）:<code>==, != (eq, ne)</code></li>
</ul>
<h4 id="条件运算符（Conditional-operators）"><a href="#条件运算符（Conditional-operators）" class="headerlink" title="条件运算符（Conditional operators）"></a>条件运算符（Conditional operators）</h4><ul>
<li>If-then: <code>(if) ? (then)</code></li>
<li>If-then-else: <code>(if) ? (then) : (else)</code></li>
<li>Default: (value) ?: <code>(defaultvalue)</code></li>
</ul>
<p>所有这些特征可以被组合并嵌套：</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">'User is of type ' + (${user.isAdmin()} ? 'Administrator' : (${user.type} ?: 'Unknown'))</span><br></pre></td></tr></tbody></table></figure>

<h2 id="常用th标签都有那些？"><a href="#常用th标签都有那些？" class="headerlink" title="常用th标签都有那些？"></a>常用th标签都有那些？</h2><table>
<thead>
<tr>
<th align="left">关键字</th>
<th align="left">功能介绍</th>
<th align="left">案例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">th:id</td>
<td align="left">替换id</td>
<td align="left"><code>&lt;input th:id="'xxx' + ${collect.id}"/&gt;</code></td>
</tr>
<tr>
<td align="left">th:text</td>
<td align="left">文本替换</td>
<td align="left"><code>&lt;p th:text="${collect.description}"&gt;description&lt;/p&gt;</code></td>
</tr>
<tr>
<td align="left">th:utext</td>
<td align="left">支持html的文本替换</td>
<td align="left"><code>&lt;p th:utext="${htmlcontent}"&gt;conten&lt;/p&gt;</code></td>
</tr>
<tr>
<td align="left">th:object</td>
<td align="left">替换对象</td>
<td align="left"><code>&lt;div th:object="${session.user}"&gt;</code></td>
</tr>
<tr>
<td align="left">th:value</td>
<td align="left">属性赋值</td>
<td align="left"><code>&lt;input th:value="${user.name}" /&gt;</code></td>
</tr>
<tr>
<td align="left">th:with</td>
<td align="left">变量赋值运算</td>
<td align="left"><code>&lt;div th:with="isEven=${prodStat.count}%2==0"&gt;&lt;/div&gt;</code></td>
</tr>
<tr>
<td align="left">th:style</td>
<td align="left">设置样式</td>
<td align="left"><code>th:style="'display:' + @{(${sitrue} ? 'none' : 'inline-block')} + ''"</code></td>
</tr>
<tr>
<td align="left">th:onclick</td>
<td align="left">点击事件</td>
<td align="left"><code>th:onclick="'getCollect()'"</code></td>
</tr>
<tr>
<td align="left">th:each</td>
<td align="left">属性赋值</td>
<td align="left"><code>tr th:each="user,userStat:${users}"&gt;</code></td>
</tr>
<tr>
<td align="left">th:if</td>
<td align="left">判断条件</td>
<td align="left"><code>&lt;a th:if="${userId == collect.userId}" &gt;</code></td>
</tr>
<tr>
<td align="left">th:unless</td>
<td align="left">和th:if判断相反</td>
<td align="left"><code>&lt;a th:href="@{/login}" th:unless=${session.user != null}&gt;Login&lt;/a&gt;</code></td>
</tr>
<tr>
<td align="left">th:href</td>
<td align="left">链接地址</td>
<td align="left"><code>&lt;a th:href="@{/login}" th:unless=${session.user != null}&gt;Login&lt;/a&gt; /&gt;</code></td>
</tr>
<tr>
<td align="left">th:switch</td>
<td align="left">多路选择 配合th:case 使用</td>
<td align="left"><code>&lt;div th:switch="${user.role}"&gt;</code></td>
</tr>
<tr>
<td align="left">th:case</td>
<td align="left">th:switch的一个分支</td>
<td align="left"><code>&lt;p th:case="'admin'"&gt;User is an administrator&lt;/p&gt;</code></td>
</tr>
<tr>
<td align="left">th:fragment</td>
<td align="left">布局标签，定义一个代码片段，方便其它地方引用</td>
<td align="left"><code>&lt;div th:fragment="alert"&gt;</code></td>
</tr>
<tr>
<td align="left">th:include</td>
<td align="left">布局标签，替换内容到引入的文件</td>
<td align="left"><code>&lt;head th:include="layout :: htmlhead" th:with="title='xx'"&gt;&lt;/head&gt; /&gt;</code></td>
</tr>
<tr>
<td align="left">th:replace</td>
<td align="left">布局标签，替换整个标签到引入的文件</td>
<td align="left"><code>&lt;div th:replace="fragments/header :: title"&gt;&lt;/div&gt;</code></td>
</tr>
<tr>
<td align="left">th:selected</td>
<td align="left">selected选择框 选中</td>
<td align="left"><code>th:selected="(${xxx.id} == ${configObj.dd})"</code></td>
</tr>
<tr>
<td align="left">th:src</td>
<td align="left">图片类地址引入</td>
<td align="left"><code>&lt;img class="img-responsive" alt="App Logo" th:src="@{/img/logo.png}" /&gt;</code></td>
</tr>
<tr>
<td align="left">th:inline</td>
<td align="left">定义js脚本可以使用变量</td>
<td align="left"><code>&lt;script type="text/javascript" th:inline="javascript"&gt;</code></td>
</tr>
<tr>
<td align="left">th:action</td>
<td align="left">表单提交的地址</td>
<td align="left"><code>&lt;form action="subscribe.html" th:action="@{/subscribe}"&gt;</code></td>
</tr>
<tr>
<td align="left">th:remove</td>
<td align="left">删除某个属性</td>
<td align="left"><code>&lt;tr th:remove="all"&gt; 1.all:删除包含标签和所有的孩子。</code></td>
</tr>
<tr>
<td align="left">th:attr</td>
<td align="left">设置标签属性，多个属性可以用逗号分隔</td>
<td align="left">比如 <code>th:attr="src=@{/image/aa.jpg},title=#{logo}"</code>，此标签不太优雅，一般用的比较少。</td>
</tr>
</tbody></table>
<p>还有非常多的标签，这里只列出最常用的几个,由于一个标签内可以包含多个th:x属性，其生效的优先级顺序为:<br><code>include,each,if/unless/switch/case,with,attr/attrprepend/attrappend,value/href,src ,etc,text/utext,fragment,remove。</code></p>
<h2 id="几种常用的使用方法"><a href="#几种常用的使用方法" class="headerlink" title="几种常用的使用方法"></a>几种常用的使用方法</h2><h3 id="1、赋值、字符串拼接"><a href="#1、赋值、字符串拼接" class="headerlink" title="1、赋值、字符串拼接"></a>1、赋值、字符串拼接</h3><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>  <span class="attr">th:text</span>=<span class="string">"${collect.description}"</span>&gt;</span>description<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"'Welcome to our application, ' + ${user.name} + '!'"</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>字符串拼接还有另外一种简洁的写法</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"|Welcome to our application, ${user.name}!|"</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="2、条件判断-If-Unless"><a href="#2、条件判断-If-Unless" class="headerlink" title="2、条件判断 If/Unless"></a>2、条件判断 If/Unless</h3><p>Thymeleaf中使用th:if和th:unless属性进行条件判断，下面的例子中，<code>&lt;a&gt;</code>标签只有在<code>th:if</code>中条件成立时才显示：</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:if</span>=<span class="string">"${myself=='yes'}"</span> &gt;</span> <span class="tag">&lt;/<span class="name">i</span>&gt;</span> <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:unless</span>=<span class="string">${session.user</span> != <span class="string">null}</span> <span class="attr">th:href</span>=<span class="string">"@{/login}"</span> &gt;</span>Login<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>th:unless于th:if恰好相反，只有表达式中的条件不成立，才会显示其内容。</p>
<p>也可以使用 <code>(if) ? (then) : (else)</code> 这种语法来判断显示的内容</p>
<h3 id="3、for-循环"><a href="#3、for-循环" class="headerlink" title="3、for 循环"></a>3、for 循环</h3><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tr</span>  <span class="attr">th:each</span>=<span class="string">"collect,iterStat : ${collects}"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span> <span class="attr">scope</span>=<span class="string">"row"</span> <span class="attr">th:text</span>=<span class="string">"${collect.id}"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">th:src</span>=<span class="string">"${collect.webLogo}"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"${collect.url}"</span>&gt;</span>Mark<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"${collect.title}"</span>&gt;</span>Otto<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"${collect.description}"</span>&gt;</span>@mdo<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"${terStat.index}"</span>&gt;</span>index<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>iterStat称作状态变量，属性有：</p>
<ul>
<li>index:当前迭代对象的index（从0开始计算）</li>
<li>count: 当前迭代对象的index(从1开始计算)</li>
<li>size:被迭代对象的大小</li>
<li>current:当前迭代变量</li>
<li>even/odd:布尔值，当前循环是否是偶数/奇数（从0开始计算）</li>
<li>first:布尔值，当前循环是否是第一个</li>
<li>last:布尔值，当前循环是否是最后一个</li>
</ul>
<h3 id="4、URL"><a href="#4、URL" class="headerlink" title="4、URL"></a>4、URL</h3><p>URL在Web应用模板中占据着十分重要的地位，需要特别注意的是Thymeleaf对于URL的处理是通过语法@{…}来处理的。<br>如果需要Thymeleaf对URL进行渲染，那么务必使用th:href，th:src等属性，下面是一个例子</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Will produce 'http://localhost:8080/standard/unread' (plus rewriting) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span>  <span class="attr">th:href</span>=<span class="string">"@{/standard/{type}(type=${type})}"</span>&gt;</span>view<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Will produce '/gtvg/order/3/details' (plus rewriting) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"details.html"</span> <span class="attr">th:href</span>=<span class="string">"@{/order/{orderId}/details(orderId=${o.id})}"</span>&gt;</span>view<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>设置背景</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:style</span>=<span class="string">"'background:url(' + @{/&lt;path-to-image&gt;} + ');'"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>根据属性值改变背景</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"media-object resource-card-image"</span>  <span class="attr">th:style</span>=<span class="string">"'background:url(' + @{(${collect.webLogo}=='' ? 'img/favicon.png' : ${collect.webLogo})} + ')'"</span> &gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>几点说明：</p>
<ul>
<li>上例中URL最后的<code>(orderId=${o.id})</code> 表示将括号内的内容作为URL参数处理，该语法避免使用字符串拼接，大大提高了可读性</li>
<li><code>@{...}</code>表达式中可以通过<code>{orderId}</code>访问Context中的orderId变量</li>
<li><code>@{/order}</code>是Context相关的相对路径，在渲染时会自动添加上当前Web应用的Context名字，假设context名字为app，那么结果应该是/app/order</li>
</ul>
<h3 id="5、内联js"><a href="#5、内联js" class="headerlink" title="5、内联js"></a>5、内联js</h3><p>内联文本：[[…]]内联文本的表示方式，使用时，必须先用th:inline=”text/<a href="http://lib.csdn.net/base/javascript" target="_blank" rel="noopener">JavaScript</a>/none”激活，th:inline可以在父级标签内使用，甚至作为body的标签。内联文本尽管比th:text的代码少，不利于原型显示。</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">th:inline</span>=<span class="string">"javascript"</span>&gt;</span></span><br><span class="line"><span class="actionscript"><span class="comment">/*&lt;![CDATA[*/</span></span></span><br><span class="line">...</span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> username = <span class="comment">/*[[${sesion.user.name}]]*/</span> <span class="string">'Sebastian'</span>;</span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> size = <span class="comment">/*[[${size}]]*/</span> <span class="number">0</span>;</span></span><br><span class="line">...</span><br><span class="line"><span class="actionscript"><span class="comment">/*]]&gt;*/</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>js附加代码：</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/*[+</span><br><span class="line">var msg = 'This is a working application';</span><br><span class="line">+]*/</span><br></pre></td></tr></tbody></table></figure>

<p>js移除代码：</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/*[- */</span><br><span class="line">var msg = 'This is a non-working template';</span><br><span class="line">/* -]*/</span><br></pre></td></tr></tbody></table></figure>

<h3 id="6、内嵌变量"><a href="#6、内嵌变量" class="headerlink" title="6、内嵌变量"></a>6、内嵌变量</h3><p>为了模板更加易用，Thymeleaf还提供了一系列Utility对象（内置于Context中），可以通过#直接访问：</p>
<ul>
<li>dates ： java.util.Date的功能方法类。</li>
<li>calendars : 类似#dates，面向java.util.Calendar</li>
<li>numbers : 格式化数字的功能方法类</li>
<li>strings : 字符串对象的功能类，contains,startWiths,prepending/appending等等。</li>
<li>objects: 对objects的功能类操作。</li>
<li>bools: 对布尔值求值的功能方法。</li>
<li>arrays：对数组的功能类方法。</li>
<li>lists: 对lists功能类方法</li>
<li>sets</li>
<li>maps<br>…</li>
</ul>
<p>下面用一段代码来举例一些常用的方法：</p>
<h4 id="dates"><a href="#dates" class="headerlink" title="dates"></a>dates</h4><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * Format date with the specified pattern</span><br><span class="line"> * Also works with arrays, lists or sets</span><br><span class="line"> */</span><br><span class="line">${#dates.format(date, 'dd/MMM/yyyy HH:mm')}</span><br><span class="line">${#dates.arrayFormat(datesArray, 'dd/MMM/yyyy HH:mm')}</span><br><span class="line">${#dates.listFormat(datesList, 'dd/MMM/yyyy HH:mm')}</span><br><span class="line">${#dates.setFormat(datesSet, 'dd/MMM/yyyy HH:mm')}</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line"> * Create a date (java.util.Date) object for the current date and time</span><br><span class="line"> */</span><br><span class="line">${#dates.createNow()}</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line"> * Create a date (java.util.Date) object for the current date (time set to 00:00)</span><br><span class="line"> */</span><br><span class="line">${#dates.createToday()}</span><br></pre></td></tr></tbody></table></figure>

<h4 id="strings"><a href="#strings" class="headerlink" title="strings"></a>strings</h4><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * Check whether a String is empty (or null). Performs a trim() operation before check</span><br><span class="line"> * Also works with arrays, lists or sets</span><br><span class="line"> */</span><br><span class="line">${#strings.isEmpty(name)}</span><br><span class="line">${#strings.arrayIsEmpty(nameArr)}</span><br><span class="line">${#strings.listIsEmpty(nameList)}</span><br><span class="line">${#strings.setIsEmpty(nameSet)}</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line"> * Check whether a String starts or ends with a fragment</span><br><span class="line"> * Also works with arrays, lists or sets</span><br><span class="line"> */</span><br><span class="line">${#strings.startsWith(name,'Don')}                  // also array*, list* and set*</span><br><span class="line">${#strings.endsWith(name,endingFragment)}           // also array*, list* and set*</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line"> * Compute length</span><br><span class="line"> * Also works with arrays, lists or sets</span><br><span class="line"> */</span><br><span class="line">${#strings.length(str)}</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line"> * Null-safe comparison and concatenation</span><br><span class="line"> */</span><br><span class="line">${#strings.equals(str)}</span><br><span class="line">${#strings.equalsIgnoreCase(str)}</span><br><span class="line">${#strings.concat(str)}</span><br><span class="line">${#strings.concatReplaceNulls(str)}</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line"> * Random</span><br><span class="line"> */</span><br><span class="line">${#strings.randomAlphanumeric(count)}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="使用thymeleaf布局"><a href="#使用thymeleaf布局" class="headerlink" title="使用thymeleaf布局"></a>使用thymeleaf布局</h2><p>使用thymeleaf布局非常的方便</p>
<p>定义代码片段</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">footer</span> <span class="attr">th:fragment</span>=<span class="string">"copy"</span>&gt;</span></span><br><span class="line">&amp;copy; 2016</span><br><span class="line"><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>在页面任何地方引入：</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:include</span>=<span class="string">"footer :: copy"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">"footer :: copy"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>th:include 和 th:replace区别，include只是加载，replace是替换</p>
<p>返回的HTML如下：</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span> &amp;copy; 2016 <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">footer</span>&gt;</span>&amp;copy; 2016 <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>下面是一个常用的后台页面布局，将整个页面分为头部，尾部、菜单栏、隐藏栏，点击菜单只改变content区域的页面</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">"layout-fixed"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:fragment</span>=<span class="string">"navbar"</span>  <span class="attr">class</span>=<span class="string">"wrapper"</span>  <span class="attr">role</span>=<span class="string">"navigation"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">"fragments/header :: header"</span>&gt;</span>Header<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">"fragments/left :: left"</span>&gt;</span>left<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">"fragments/sidebar :: sidebar"</span>&gt;</span>sidebar<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">layout:fragment</span>=<span class="string">"content"</span> <span class="attr">id</span>=<span class="string">"content"</span> &gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">"fragments/footer :: footer"</span>&gt;</span>footer<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>任何页面想使用这样的布局值只需要替换中见的 content模块即可</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span> <span class="attr">layout:decorator</span>=<span class="string">"layout"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">section</span> <span class="attr">layout:fragment</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">            ...</span><br></pre></td></tr></tbody></table></figure>

<p>也可以在引用模版的时候传参</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span> <span class="attr">th:include</span>=<span class="string">"layout :: htmlhead"</span> <span class="attr">th:with</span>=<span class="string">"title='Hello'"</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>layout 是文件地址，如果有文件夹可以这样写 fileName/layout:htmlhead<br>htmlhead 是指定义的代码片段 如 <code>th:fragment="copy"</code></p>
<h2 id="源码案例"><a href="#源码案例" class="headerlink" title="源码案例"></a>源码案例</h2><p>这里有一个开源项目几乎使用了这里介绍的所有标签和布局，大家可以参考：<br><a href="https://github.com/cloudfavorites/favorites-web" target="_blank" rel="noopener">cloudfavorites</a></p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="http://www.thymeleaf.org/doc/tutorials/2.1/thymeleafspring.html#integrating-thymeleaf-with-spring" target="_blank" rel="noopener">thymeleaf官方指南</a><br><a href="http://www.tianmaying.com/tutorial/using-thymeleaf" target="_blank" rel="noopener">新一代Java模板引擎Thymeleaf</a><br><a href="http://www.webinno.cn/blog/article/view/131" target="_blank" rel="noopener">Thymeleaf基本知识</a><br><a href="http://v8en.com/news/list/47/0" target="_blank" rel="noopener">thymeleaf总结文章</a><br><a href="http://www.cnblogs.com/lazio10000/p/5603955.html" target="_blank" rel="noopener">Thymeleaf 模板的使用</a><br><a href="http://www.blogjava.net/bjwulin/archive/2013/02/07/395234.html" target="_blank" rel="noopener">thymeleaf 学习笔记</a></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
    
        <div class="post-more-div">
            <a href="/2020/12/22/Thymeleaf用法/" class="post-more waves-button">
                阅读全文 »
            </a>
        </div>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Thymeleaf/">Thymeleaf</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-服务器部署SpringBoot"
  class="article-card article-type-post" itemprop="blogPost">

    


  
    <h3 class="post-title" itemprop="name">
      <a href="/2020/12/20/服务器部署SpringBoot/">服务器部署SpringBoot</a>
    </h3>
  




     <div class="post-meta">
        <time class="post-time" title="2020-12-20 17:29:00" datetime="2020-12-20T09:29:00.000Z"  itemprop="datePublished">2020-12-20</time>

    </div>

    <div class="post-content" id="post-content" itemprop="postContent">

    
        <h2 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2><ul>
<li><p>JDK包</p>
<ul>
<li>环境变量<ul>
<li><code>CLASSPATH</code> = <code>.;%Java_Home%\bin;%Java_Home%\lib\dt.jar;%Java_Home%\lib\tools.jar</code></li>
<li><code>Java_Home</code> = <code>D:\DevKits\JDK</code></li>
<li><code>Path</code> += <code>D:\DevKits\JDK\bin</code></li>
</ul>
</li>
</ul>
</li>
<li><p>maven包</p>
<ul>
<li>环境变量<ul>
<li><code>Path</code> += <code>D:\DevKits\maven\bin</code></li>
</ul>
</li>
<li>conf<ul>
<li><code>/conf/settings.xml</code> 中的 <code>localRepository</code> 值改为存放 <code>repository</code> 的绝对位置</li>
</ul>
</li>
</ul>
</li>
</ul>
    
        <div class="post-more-div">
            <a href="/2020/12/20/服务器部署SpringBoot/" class="post-more waves-button">
                阅读全文 »
            </a>
        </div>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringBoot/">SpringBoot</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Qt的QDebug输出到文件"
  class="article-card article-type-post" itemprop="blogPost">

    


  
    <h3 class="post-title" itemprop="name">
      <a href="/2020/12/10/Qt的QDebug输出到文件/">Qt的QDebug输出到文件</a>
    </h3>
  




     <div class="post-meta">
        <time class="post-time" title="2020-12-10 16:43:00" datetime="2020-12-10T08:43:00.000Z"  itemprop="datePublished">2020-12-10</time>

    </div>

    <div class="post-content" id="post-content" itemprop="postContent">

    
        <h1 id="qInstallMessageHandler把输出信息写入文件和显示在调试窗"><a href="#qInstallMessageHandler把输出信息写入文件和显示在调试窗" class="headerlink" title="qInstallMessageHandler把输出信息写入文件和显示在调试窗"></a>qInstallMessageHandler把输出信息写入文件和显示在调试窗</h1><p>qInstallMessageHandler来实现输出详细日志，输出文件名，行号，所在函数及事件，并写入文件。最后调用系统原来的函数，使信息像之前一样输出到调试窗口，便于开发。</p>
    
        <div class="post-more-div">
            <a href="/2020/12/10/Qt的QDebug输出到文件/" class="post-more waves-button">
                阅读全文 »
            </a>
        </div>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Qt/">Qt</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Win10资源管理器连接WebDAV"
  class="article-card article-type-post" itemprop="blogPost">

    


  
    <h3 class="post-title" itemprop="name">
      <a href="/2020/11/28/Win10资源管理器连接WebDAV/">Win10资源管理器连接WebDAV</a>
    </h3>
  




     <div class="post-meta">
        <time class="post-time" title="2020-11-28 17:49:00" datetime="2020-11-28T09:49:00.000Z"  itemprop="datePublished">2020-11-28</time>

    </div>

    <div class="post-content" id="post-content" itemprop="postContent">

    
        <ol>
<li>去服务里打开WebClient，改为自动启动</li>
<li>修改注册表使得WIN同时支持http和https：定位到 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\WebClient\Parameters<br>把BasicAuthLevel 值改成2，即同时支持http和https，默认只支持https，然后重启服务</li>
<li>然后映射网络驱动器（添加网络位置）即可</li>
</ol>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
    
        <div class="post-more-div">
            <a href="/2020/11/28/Win10资源管理器连接WebDAV/" class="post-more waves-button">
                阅读全文 »
            </a>
        </div>
    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-C-的nullptr"
  class="article-card article-type-post" itemprop="blogPost">

    


  
    <h3 class="post-title" itemprop="name">
      <a href="/2020/11/19/C-的nullptr/">C++的nullptr</a>
    </h3>
  




     <div class="post-meta">
        <time class="post-time" title="2020-11-19 15:37:00" datetime="2020-11-19T07:37:00.000Z"  itemprop="datePublished">2020-11-19</time>

    </div>

    <div class="post-content" id="post-content" itemprop="postContent">

    
        <h3 id="C的NULL"><a href="#C的NULL" class="headerlink" title="C的NULL"></a>C的NULL</h3><p>在C语言中，我们使用NULL表示空指针，也就是我们可以写如下代码：</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *i = <span class="literal">NULL</span>;</span><br><span class="line"><span class="keyword">foo_t</span> *f = <span class="literal">NULL</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>实际上在C语言中，NULL通常被定义为如下：</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NULL ((void *)0)</span></span><br></pre></td></tr></tbody></table></figure>
    
        <div class="post-more-div">
            <a href="/2020/11/19/C-的nullptr/" class="post-more waves-button">
                阅读全文 »
            </a>
        </div>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/">C++</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Windows端口被占用"
  class="article-card article-type-post" itemprop="blogPost">

    


  
    <h3 class="post-title" itemprop="name">
      <a href="/2020/10/23/Windows端口被占用/">Windows端口被占用</a>
    </h3>
  




     <div class="post-meta">
        <time class="post-time" title="2020-10-23 17:47:00" datetime="2020-10-23T09:47:00.000Z"  itemprop="datePublished">2020-10-23</time>

    </div>

    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>寻找端口（看结果右边列）</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -ano | findstr 8080</span><br></pre></td></tr></tbody></table></figure>

<p>强制关闭端口</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">taskkill /pid 4708 /f</span><br></pre></td></tr></tbody></table></figure>

<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
    
        <div class="post-more-div">
            <a href="/2020/10/23/Windows端口被占用/" class="post-more waves-button">
                阅读全文 »
            </a>
        </div>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DOS/">DOS</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-QTreeView"
  class="article-card article-type-post" itemprop="blogPost">

    


  
    <h3 class="post-title" itemprop="name">
      <a href="/2020/10/23/QTreeView/">QTreeView</a>
    </h3>
  




     <div class="post-meta">
        <time class="post-time" title="2020-10-23 16:49:00" datetime="2020-10-23T08:49:00.000Z"  itemprop="datePublished">2020-10-23</time>

    </div>

    <div class="post-content" id="post-content" itemprop="postContent">

    
        <a id="more"></a>

<p>Model</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ModelTree.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Common.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"DaRecord.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ScopeTailed.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*最重要的就是对interpointer()这个内部指针的运用</span></span><br><span class="line"><span class="comment">与QTableView不同的是多了parent()和index()函数的重写，这也是关键之处</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">ModelTree::ModelTree()</span><br><span class="line">{</span><br><span class="line">    header_ &lt;&lt;....;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">ModelTree::~ModelTree()</span><br><span class="line">{</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> ModelTree::loadRoots()</span><br><span class="line">{</span><br><span class="line">    beginResetModel();</span><br><span class="line">    mode_ = FULL;</span><br><span class="line">    root_.children_.clear();</span><br><span class="line">    root_.spbm_ = <span class="string">"0"</span>;</span><br><span class="line">    <span class="function">ScopeTailed <span class="title">endReset</span><span class="params">([<span class="keyword">this</span>](){endResetModel(); })</span></span>;</span><br><span class="line">    DaRecord da;</span><br><span class="line">    <span class="keyword">if</span> (!da.expandItem(root_))</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> ModelTree::loadResult(RecordTree &amp;root)</span><br><span class="line">{</span><br><span class="line">    beginResetModel();</span><br><span class="line">    mode_ = RESULT;</span><br><span class="line">    root_ = root;</span><br><span class="line">    root_.buildTree();</span><br><span class="line">    endResetModel();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">QVariant ModelTree::headerData(<span class="keyword">int</span> section, Qt::Orientation orientation, <span class="keyword">int</span> role <span class="comment">/* = Qt::DisplayRole */</span>) <span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (orientation == Qt::Horizontal &amp;&amp; role == Qt::DisplayRole)</span><br><span class="line">        <span class="keyword">return</span> header_[section];</span><br><span class="line">    <span class="keyword">return</span> QVariant();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ModelTree::columnCount(<span class="keyword">const</span> QModelIndex &amp;parent <span class="comment">/* = QModelIndex() */</span>) <span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">return</span> header_.count();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">QVariant ModelTree::data(<span class="keyword">const</span> QModelIndex &amp;index, <span class="keyword">int</span> role <span class="comment">/* = Qt::DisplayRole */</span>) <span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (role==Qt::DisplayRole &amp;&amp; index.isValid())</span><br><span class="line">    {</span><br><span class="line">        RecordTree *pRec = <span class="keyword">static_cast</span>&lt;RecordTree*&gt;(index.internalPointer());</span><br><span class="line">        <span class="keyword">switch</span> (index.column())</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:<span class="keyword">return</span> pRec-&gt;spmc_;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:<span class="keyword">return</span> pRec-&gt;spbm_;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:<span class="keyword">return</span> pRec-&gt;zs_;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:<span class="keyword">return</span> pRec-&gt;slv_.toString();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> QVariant();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ModelTree::rowCount(<span class="keyword">const</span> QModelIndex &amp;parent <span class="comment">/* = QModelIndex() */</span>) <span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (!parent.isValid())</span><br><span class="line">        <span class="keyword">return</span> root_.children_.count();</span><br><span class="line">    RecordTree *pRec = <span class="keyword">static_cast</span>&lt;RecordTree*&gt;(parent.internalPointer());</span><br><span class="line">    <span class="keyword">if</span> (mode_==FULL &amp;&amp; !pRec-&gt;expanded_)</span><br><span class="line">    {</span><br><span class="line">        DaRecord da;</span><br><span class="line">        da.expandItem(*pRec);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> pRec-&gt;children_.count();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">QModelIndex ModelTree::index(<span class="keyword">int</span> row, <span class="keyword">int</span> column, <span class="keyword">const</span> QModelIndex &amp;parent <span class="comment">/* = QModelIndex() */</span>) <span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (!parent.isValid())</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">if</span> (row &lt; root_.children_.count())</span><br><span class="line">            <span class="keyword">return</span> createIndex(row, column, <span class="keyword">const_cast</span>&lt;RecordTree*&gt;(&amp;root_.children_[row]));</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> QModelIndex();</span><br><span class="line">    }</span><br><span class="line">    RecordTree *pRec = <span class="keyword">static_cast</span>&lt;RecordTree*&gt;(parent.internalPointer());</span><br><span class="line">    <span class="keyword">return</span> createIndex(row, column, &amp;pRec-&gt;children_[row]);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">QModelIndex ModelTree::parent(<span class="keyword">const</span> QModelIndex &amp;index) <span class="keyword">const</span></span><br><span class="line">{</span><br><span class="line">    RecordTree *rec = <span class="keyword">static_cast</span>&lt;RecordTree*&gt;(index.internalPointer());</span><br><span class="line">    <span class="keyword">if</span> (rec-&gt;parent_ == &amp;root_)</span><br><span class="line">        <span class="keyword">return</span> QModelIndex();</span><br><span class="line">    <span class="keyword">return</span> createIndex(rec-&gt;parent_-&gt;rowIndex_, <span class="number">0</span>, rec-&gt;parent_);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>结构</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QString&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QList&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Common.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"DatabaseAccess.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RecordTree</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    RecordTree();</span><br><span class="line">    ~RecordTree();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    QString spbm_;</span><br><span class="line">    QString spmc_;</span><br><span class="line">    QString pid_;</span><br><span class="line">    QString zs_;</span><br><span class="line">    Currency slv_;</span><br><span class="line">    <span class="keyword">bool</span> nodeType_; <span class="comment">//1为父节点 0没有子节点</span></span><br><span class="line"></span><br><span class="line">    QList&lt;RecordTree&gt; children_;</span><br><span class="line">    <span class="keyword">bool</span> expanded_ = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">int</span> rowIndex_ = <span class="number">0</span>;</span><br><span class="line">    RecordTree *parent_ = <span class="literal">nullptr</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建一个树结构的数据</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">buildTree</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; children_.count(); i++)</span><br><span class="line">        {</span><br><span class="line">            RecordTree &amp;child = children_[i];</span><br><span class="line">            child.parent_ = <span class="keyword">this</span>;</span><br><span class="line">            child.rowIndex_ = i;</span><br><span class="line">            child.buildTree();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//根据所传来的字段找到这个树结构的数据</span></span><br><span class="line">    <span class="function">RecordTree *<span class="title">search</span><span class="params">(QString spbm)</span></span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        <span class="keyword">if</span> (spbm_ == spbm)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">for</span> (RecordTree &amp;child : children_)</span><br><span class="line">        {</span><br><span class="line">            RecordTree *result = child.search(spbm);</span><br><span class="line">            <span class="keyword">if</span> (result)</span><br><span class="line">                <span class="keyword">return</span> result;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">    }</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>

<p>加载数据</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"DaRecord.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Global.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Database.h"</span></span></span><br><span class="line"></span><br><span class="line">DaRecord::DaRecord()</span><br><span class="line">{</span><br><span class="line">    setDatabase(global&lt;Database&gt;()-&gt;db());</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">DaRecord::~DaRecord()</span><br><span class="line">{</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> DaRecord::selectByPid(QString &amp;pid, QList&lt;RecordTree&gt; &amp;commodity)</span><br><span class="line">{</span><br><span class="line">    QString condition = QString(<span class="string">"pid='%1'"</span>).arg(pid);</span><br><span class="line">    <span class="keyword">if</span> (!selectBy(condition, commodity))</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> DaRecord::expandItemImpl(RecordTree &amp;root)</span><br><span class="line">{</span><br><span class="line">    QList&lt;RecordTree&gt; treeList;</span><br><span class="line">    <span class="keyword">if</span> (!selectByPid(root.spbm_, treeList))</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (RecordTree &amp;res : treeList)</span><br><span class="line">    {</span><br><span class="line">        res.parent_ = &amp;root;</span><br><span class="line">        res.rowIndex_ = root.children_.count();</span><br><span class="line">        root.children_ &lt;&lt; res;</span><br><span class="line">    }</span><br><span class="line">    root.expanded_ = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> DaRecord::expandItem(RecordTree &amp;root)</span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (!expandItemImpl(root))</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (RecordTree &amp;res : root.children_)</span><br><span class="line">        <span class="keyword">if</span> (!expandItemImpl(res))</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> DaRecord::selectBySpbm(QString &amp;spbm, RecordTree &amp;res)</span><br><span class="line">{</span><br><span class="line">    QString selectSql = QString(<span class="string">"spbm='%1'"</span>).arg(spbm);</span><br><span class="line">    QList&lt;RecordTree&gt; resList;</span><br><span class="line">    <span class="keyword">if</span> (!selectBy(selectSql, resList))</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    res = resList.first();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> DaRecord::selectBykeyword(QString &amp;keyword, QList&lt;RecordTree&gt; &amp;commomdity)</span><br><span class="line">{</span><br><span class="line">    QString condition = QString(<span class="string">"spmc like '%%1% or zs like '%%2%'"</span>).arg(keyword).arg(keyword);</span><br><span class="line">    <span class="keyword">if</span> (!selectBy(condition, commomdity))</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">//...(查找项目)</span></span><br><span class="line"><span class="keyword">bool</span> DaRecord::searchItem(QString &amp;keyword, RecordTree &amp;root)</span><br><span class="line">{</span><br><span class="line">    QList&lt;RecordTree&gt; commoditys;</span><br><span class="line">    <span class="keyword">if</span> (!selectBykeyword(keyword, commoditys))</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;cur : commoditys)</span><br><span class="line">    {</span><br><span class="line">        RecordTree *parent = <span class="literal">nullptr</span>;</span><br><span class="line">        <span class="keyword">while</span> (cur.pid_ != <span class="string">"0"</span>)</span><br><span class="line">        {</span><br><span class="line">            parent = root.search(cur.spbm_);</span><br><span class="line">            <span class="keyword">if</span> (!parent)</span><br><span class="line">            {</span><br><span class="line">                RecordTree newParent;</span><br><span class="line">                <span class="keyword">if</span> (!selectBySpbm(cur.pid_, newParent))</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                root.children_ &lt;&lt; cur;</span><br><span class="line">                cur = newParent;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            {</span><br><span class="line">                parent-&gt;children_ &lt;&lt; cur;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (!parent)</span><br><span class="line">            root.children_ &lt;&lt; cur;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>转载自：<a href="https://www.cnblogs.com/adeng-x/p/8097864.html" target="_blank" rel="noopener">https://www.cnblogs.com/adeng-x/p/8097864.html</a></p>
</blockquote>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
    
        <div class="post-more-div">
            <a href="/2020/10/23/QTreeView/" class="post-more waves-button">
                阅读全文 »
            </a>
        </div>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Qt/">Qt</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-SpringBoot定义查询条件、多表查询"
  class="article-card article-type-post" itemprop="blogPost">

    


  
    <h3 class="post-title" itemprop="name">
      <a href="/2020/10/08/SpringBoot定义查询条件、多表查询/">SpringBoot定义查询条件、多表查询</a>
    </h3>
  




     <div class="post-meta">
        <time class="post-time" title="2020-10-08 17:28:00" datetime="2020-10-08T09:28:00.000Z"  itemprop="datePublished">2020-10-08</time>

    </div>

    <div class="post-content" id="post-content" itemprop="postContent">

    
        <a id="more"></a>

<blockquote>
<p>转载自 孙义朗： <a href="https://www.cnblogs.com/arrrrrya/p/7865090.html" target="_blank" rel="noopener">https://www.cnblogs.com/arrrrrya/p/7865090.html</a></p>
</blockquote>
<p>实体类</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.syl.demo.daomain;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>{</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> String userId;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String gender;<span class="comment">//性别</span></span><br><span class="line">    <span class="keyword">private</span> String age;</span><br><span class="line">    <span class="meta">@ManyToOne</span></span><br><span class="line">    <span class="keyword">private</span> School school;</span><br><span class="line">    <span class="meta">@ManyToOne</span></span><br><span class="line">    <span class="keyword">private</span> Grade grade;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> javax.jws.soap.SOAPBinding;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Entity;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Id;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.ManyToOne;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.OneToMany;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">School</span> </span>{</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> String schoolId;</span><br><span class="line">    <span class="keyword">private</span> String schoolName;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.syl.demo.daomain;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Grade</span> </span>{</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> String gradeId;</span><br><span class="line">    <span class="keyword">private</span> String gradeName;</span><br><span class="line">    <span class="meta">@ManyToOne</span></span><br><span class="line">    <span class="keyword">private</span> School school;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>封装查询条件类</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.syl.demo.daomain;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Id;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Params</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> String userId;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">    <span class="keyword">private</span> String age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String gradeName;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String schoolName;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Dao层</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.syl.demo.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.syl.demo.daomain.Grade;</span><br><span class="line"><span class="keyword">import</span> com.syl.demo.daomain.School;</span><br><span class="line"><span class="keyword">import</span> com.syl.demo.daomain.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.domain.Pageable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.jpa.domain.Specification;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.jpa.repository.JpaRepository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">User</span>,<span class="title">String</span>&gt; </span>{</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">(Specification&lt;User&gt; spc, Pageable pageable)</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Service及实现</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.syl.demo.service;</span><br><span class="line"><span class="keyword">import</span> com.syl.demo.daomain.Grade;</span><br><span class="line"><span class="keyword">import</span> com.syl.demo.daomain.Params;</span><br><span class="line"><span class="keyword">import</span> com.syl.demo.daomain.School;</span><br><span class="line"><span class="keyword">import</span> com.syl.demo.daomain.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.domain.Pageable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.jpa.domain.Specification;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>{</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">(<span class="keyword">int</span> pageNum, <span class="keyword">int</span> pageSize,User user)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">(<span class="keyword">int</span> pageNum, <span class="keyword">int</span> pageSize, Params params)</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.syl.demo.service.impl;</span><br><span class="line"><span class="keyword">import</span> com.syl.demo.dao.UserRepository;</span><br><span class="line"><span class="keyword">import</span> com.syl.demo.daomain.Grade;</span><br><span class="line"><span class="keyword">import</span> com.syl.demo.daomain.Params;</span><br><span class="line"><span class="keyword">import</span> com.syl.demo.daomain.School;</span><br><span class="line"><span class="keyword">import</span> com.syl.demo.daomain.User;</span><br><span class="line"><span class="keyword">import</span> com.syl.demo.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.StringUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.domain.PageRequest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.domain.Pageable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.jpa.domain.Specification;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.criteria.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>{</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserRepository userRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> userRepository.findAll();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//查询User，单表，多条件</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAll</span><span class="params">(<span class="keyword">int</span> pageNum, <span class="keyword">int</span> pageSize, User user)</span> </span>{</span><br><span class="line">        Pageable pageable = <span class="keyword">new</span> PageRequest(pageNum, pageSize);</span><br><span class="line">        List&lt;User&gt; uList = userRepository.findAll(<span class="keyword">new</span> Specification&lt;User&gt;() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Predicate <span class="title">toPredicate</span><span class="params">(Root&lt;User&gt; root, CriteriaQuery&lt;?&gt; criteriaQuery, CriteriaBuilder cb)</span> </span>{</span><br><span class="line">                List&lt;Predicate&gt; predicates = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">                <span class="keyword">if</span> (user.getUserId() != <span class="keyword">null</span> &amp;&amp; !user.getUserId().equals(<span class="string">""</span>)) {</span><br><span class="line">                    predicates.add(cb.like(root.get(<span class="string">"userId"</span>).as(String.class), <span class="string">"%"</span> + user.getUserId() + <span class="string">"%"</span>));</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">if</span> (user.getUserName() != <span class="keyword">null</span> &amp;&amp; !user.getUserName().equals(<span class="string">""</span>)) {</span><br><span class="line">                    predicates.add(cb.like(root.get(<span class="string">"userName"</span>).as(String.class), <span class="string">"%"</span> + user.getUserName() + <span class="string">"%"</span>));</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">if</span> (user.getGender() != <span class="keyword">null</span> &amp;&amp; !user.getGender().equals(<span class="string">""</span>)) {</span><br><span class="line">                    predicates.add(cb.like(root.get(<span class="string">"gender"</span>).as(String.class), <span class="string">"%"</span> + user.getGender() + <span class="string">"%"</span>));</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">if</span> (user.getAge() != <span class="keyword">null</span> &amp;&amp; !user.getAge().equals(<span class="string">""</span>)) {</span><br><span class="line">                    predicates.add(cb.like(root.get(<span class="string">"age"</span>).as(String.class), <span class="string">"%"</span> + user.getAge() + <span class="string">"%"</span>));</span><br><span class="line">                }</span><br><span class="line">                Predicate[] pre = <span class="keyword">new</span> Predicate[predicates.size()];</span><br><span class="line">                criteriaQuery.where(predicates.toArray(pre));</span><br><span class="line">                <span class="keyword">return</span> cb.and(predicates.toArray(pre));</span><br><span class="line">            }</span><br><span class="line">        }, pageable);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> uList;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//查询User，多表，多条件</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAll</span><span class="params">(<span class="keyword">int</span> pageNum, <span class="keyword">int</span> pageSize, Params params)</span> </span>{</span><br><span class="line">        Pageable pageable = <span class="keyword">new</span> PageRequest(pageNum, pageSize);</span><br><span class="line">        List&lt;User&gt; uList = userRepository.findAll(<span class="keyword">new</span> Specification&lt;User&gt;() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Predicate <span class="title">toPredicate</span><span class="params">(Root&lt;User&gt; root, CriteriaQuery&lt;?&gt; criteriaQuery, CriteriaBuilder cb)</span> </span>{</span><br><span class="line">                List&lt;Predicate&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">                <span class="comment">//根据userId 查询user</span></span><br><span class="line">                <span class="keyword">if</span> (StringUtils.isNotBlank(params.getUserId())) {</span><br><span class="line">                    list.add(cb.equal(root.get(<span class="string">"userId"</span>).as(String.class), params.getUserId()));</span><br><span class="line">                }</span><br><span class="line">                <span class="comment">//根据userName 模糊查询user</span></span><br><span class="line">                <span class="keyword">if</span> (StringUtils.isNotBlank(params.getUserName())) {</span><br><span class="line">                    list.add(cb.like(root.get(<span class="string">"userName"</span>).as(String.class), <span class="string">"%"</span> + params.getUserName() + <span class="string">"%"</span>));</span><br><span class="line">                }</span><br><span class="line">                <span class="comment">//根据gender 查询user</span></span><br><span class="line">                <span class="keyword">if</span> (StringUtils.isNotBlank(params.getGender())) {</span><br><span class="line">                    list.add(cb.equal(root.get(<span class="string">"gender"</span>).as(String.class), params.getGender()));</span><br><span class="line">                }</span><br><span class="line">                <span class="comment">//根据age&gt;? 查询user</span></span><br><span class="line">                <span class="keyword">if</span> (StringUtils.isNotBlank(params.getAge())) {</span><br><span class="line">                    list.add(cb.gt(root.get(<span class="string">"age"</span>).as(Integer.class), Integer.valueOf(params.getAge())));</span><br><span class="line">                }</span><br><span class="line">                <span class="comment">//根据gradeName 查询user</span></span><br><span class="line">                <span class="keyword">if</span> (StringUtils.isNotBlank(params.getGradeName())) {</span><br><span class="line">                    Join&lt;Grade, User&gt; join = root.join(<span class="string">"grade"</span>, JoinType.LEFT);</span><br><span class="line">                    list.add(cb.equal(join.get(<span class="string">"gradeName"</span>), params.getGradeName()));</span><br><span class="line">                }</span><br><span class="line">                <span class="comment">//根据schoolName 查询user</span></span><br><span class="line">                <span class="keyword">if</span> (StringUtils.isNotBlank(params.getSchoolName())) {</span><br><span class="line">                    Join&lt;School, User&gt; join = root.join(<span class="string">"grade"</span>, JoinType.LEFT);</span><br><span class="line">                    list.add(cb.equal(join.get(<span class="string">"school"</span>).get(<span class="string">"schoolName"</span>), params.getSchoolName()));</span><br><span class="line">                }</span><br><span class="line">                Predicate[] pre = <span class="keyword">new</span> Predicate[list.size()];</span><br><span class="line">                criteriaQuery.where(list.toArray(pre));</span><br><span class="line">                <span class="keyword">return</span> cb.and(list.toArray(pre));</span><br><span class="line">            }</span><br><span class="line">        }, pageable);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> uList;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>控制层</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.syl.demo.controller;</span><br><span class="line"><span class="keyword">import</span> com.syl.demo.daomain.Grade;</span><br><span class="line"><span class="keyword">import</span> com.syl.demo.daomain.Params;</span><br><span class="line"><span class="keyword">import</span> com.syl.demo.daomain.School;</span><br><span class="line"><span class="keyword">import</span> com.syl.demo.daomain.User;</span><br><span class="line"><span class="keyword">import</span> com.syl.demo.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by 孙义朗 on 2017/11/16 0016.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>{</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(value = <span class="string">"/getUser"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">getUser</span><span class="params">()</span> </span>{</span><br><span class="line">        List&lt;User&gt; uList = userService.findAll();</span><br><span class="line">        <span class="keyword">return</span> uList;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//查询User，单表，多条件</span></span><br><span class="line">    <span class="meta">@PostMapping</span>(value = <span class="string">"/getUser/{pageNum}/{pageSize}"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">getUser</span><span class="params">(@PathVariable(<span class="string">"pageNum"</span>)</span> Integer pageNum,</span></span><br><span class="line"><span class="function">                               @<span class="title">PathVariable</span><span class="params">(<span class="string">"pageSize"</span>)</span> Integer pageSize,</span></span><br><span class="line"><span class="function">                               @RequestBody User user) </span>{</span><br><span class="line">        List&lt;User&gt; uList = userService.findAll(pageNum, pageSize, user);</span><br><span class="line">        <span class="keyword">return</span> uList;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//查询User，多表，多条件</span></span><br><span class="line">    <span class="meta">@PostMapping</span>(value = <span class="string">"/getUser2/{pageNum}/{pageSize}"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">getUser2</span><span class="params">(@PathVariable(<span class="string">"pageNum"</span>)</span> Integer pageNum,</span></span><br><span class="line"><span class="function">                               @<span class="title">PathVariable</span><span class="params">(<span class="string">"pageSize"</span>)</span> Integer pageSize,</span></span><br><span class="line"><span class="function">                               @RequestBody Params params) </span>{</span><br><span class="line">        List&lt;User&gt; uList = userService.findAll(pageNum, pageSize, params);</span><br><span class="line">        <span class="keyword">return</span> uList;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
    
        <div class="post-more-div">
            <a href="/2020/10/08/SpringBoot定义查询条件、多表查询/" class="post-more waves-button">
                阅读全文 »
            </a>
        </div>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/">Spring</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Qt设置连接token"
  class="article-card article-type-post" itemprop="blogPost">

    


  
    <h3 class="post-title" itemprop="name">
      <a href="/2020/09/19/Qt设置连接token/">Qt设置连接token</a>
    </h3>
  




     <div class="post-meta">
        <time class="post-time" title="2020-09-19 16:42:00" datetime="2020-09-19T08:42:00.000Z"  itemprop="datePublished">2020-09-19</time>

    </div>

    <div class="post-content" id="post-content" itemprop="postContent">

    
        <a id="more"></a>

<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">QString Url_serial = <span class="string">"https://www.example/api/"</span>;</span><br><span class="line"><span class="function">QUrl <span class="title">serviceUrl</span><span class="params">(Url_serial)</span></span>;</span><br><span class="line"><span class="function">QNetworkRequest <span class="title">request_registered</span><span class="params">(serviceUrl)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置SSL认证方式</span></span><br><span class="line">QSslConfiguration sslconfig;</span><br><span class="line">sslconfig.setPeerVerifyMode(QSslSocket::VerifyNone);</span><br><span class="line">sslconfig.setProtocol(QSsl::TlsV1_2);</span><br><span class="line"><span class="comment">//sslconfig.setPeerVerifyDepth(1);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//设置本地证书</span></span><br><span class="line"><span class="function">QFile <span class="title">keyFile</span><span class="params">(<span class="string">"client.p12"</span>)</span></span>;</span><br><span class="line"><span class="keyword">bool</span> openOK = keyFile.open(QIODevice::ReadWrite);</span><br><span class="line"></span><br><span class="line">QSslKey key;</span><br><span class="line">QSslCertificate certs;</span><br><span class="line">QList&lt;QSslCertificate&gt; caCerts;</span><br><span class="line">QByteArray passPhrase = QString(<span class="string">"12345678"</span>).toLatin1();</span><br><span class="line">openOK = QSslCertificate::importPkcs12(&amp;keyFile, &amp;key, &amp;certs, &amp;caCerts, passPhrase);</span><br><span class="line">keyFile.close();</span><br><span class="line"></span><br><span class="line">request_registered.setSslConfiguration(sslconfig);</span><br><span class="line">request_registered.setRawHeader(<span class="string">"Accept"</span>,<span class="string">"*/*"</span>);</span><br><span class="line">request_registered.setRawHeader(<span class="string">"Connection"</span>,<span class="string">"keep-alive"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置 token 登陆凭证；</span></span><br><span class="line">request_registered.setRawHeader(QByteArray(<span class="string">"Authorization"</span>),QByteArray(getQJsonDocumentFromQJsonValue(token_val)));</span><br><span class="line">request_registered.setHeader(QNetworkRequest::UserAgentHeader,<span class="string">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/33.0.1750.152 Safari/537.36"</span>);</span><br><span class="line">request_registered.setHeader(QNetworkRequest::ContentTypeHeader, <span class="string">"application/x-www-form-urlencoded"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//组装数据</span></span><br><span class="line">QUrlQuery postData1;</span><br><span class="line"><span class="function">QByteArray <span class="title">serial_check1</span><span class="params">((<span class="keyword">char</span>*)Serial_num, <span class="number">16</span>)</span></span>;</span><br><span class="line">serial_check = serial_check1.toHex();</span><br><span class="line">postData1.addQueryItem(<span class="string">"seq"</span>,serial_check);</span><br><span class="line"></span><br><span class="line">qDebug() &lt;&lt; tr(<span class="string">"提交的用户token："</span>) + getQJsonDocumentFromQJsonValue(token_val);</span><br><span class="line"></span><br><span class="line"><span class="comment">//发起网络请求</span></span><br><span class="line">QNetworkReply* check = m_accessManager_Registered-&gt;post(request_registered,postData1.toString(QUrl::FullyEncoded).toUtf8());</span><br><span class="line">....</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>转自：<a href="https://codess.cc/archives/219.html" target="_blank" rel="noopener">https://codess.cc/archives/219.html</a></p>
</blockquote>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
    
        <div class="post-more-div">
            <a href="/2020/09/19/Qt设置连接token/" class="post-more waves-button">
                阅读全文 »
            </a>
        </div>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Qt/">Qt</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-SpringBoot报错总结"
  class="article-card article-type-post" itemprop="blogPost">

    


  
    <h3 class="post-title" itemprop="name">
      <a href="/2020/09/16/SpringBoot报错总结/">SpringBoot报错总结</a>
    </h3>
  




     <div class="post-meta">
        <time class="post-time" title="2020-09-16 17:26:00" datetime="2020-09-16T09:26:00.000Z"  itemprop="datePublished">2020-09-16</time>

    </div>

    <div class="post-content" id="post-content" itemprop="postContent">

    
        <a id="more"></a>

<h2 id="时区"><a href="#时区" class="headerlink" title="时区"></a>时区</h2><p>【报错信息】：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Caused by: com.mysql.cj.exceptions.InvalidConnectionAttributeException: The server time zone value 'ÖÐ¹ú±ê×¼Ê±¼ä' is unrecognized or represents more than one time zone. You must configure either the server or JDBC driver (via the serverTimezone configuration property) to use a more specifc time zone value if you want to utilize time zone support.</span><br></pre></td></tr></tbody></table></figure>

<p>【解决方法】修改database的url：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.datasource.url=jdbc:mysql://localhost:3306/springboot?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=GMT%2B8</span><br></pre></td></tr></tbody></table></figure>

<p>【报错信息】</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.sql.SQLException: Zero date value prohibited</span><br></pre></td></tr></tbody></table></figure>

<p>​    Mysql数据库在面对0000-00-00 00:00:00日期的处理时，如果没有设置对应的对策，就会产生异常</p>
<p>【解决方法】在jdbcUrl中设置处理<strong>zeroDateTimeBehavior</strong></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver-url=jdbc:mysql://127.0.0.1/test?zeroDateTimeBehavior=CONVERT_TO_NULL</span><br></pre></td></tr></tbody></table></figure>

<p>​    <strong>ZERO日期会转化为null</strong></p>
<blockquote>
<p><strong>注意：</strong>CONVERT_TO_NULL 一定是大写的，否则报错</p>
</blockquote>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
    
        <div class="post-more-div">
            <a href="/2020/09/16/SpringBoot报错总结/" class="post-more waves-button">
                阅读全文 »
            </a>
        </div>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/">Spring</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-SpringBoot获取Request的三种方式"
  class="article-card article-type-post" itemprop="blogPost">

    


  
    <h3 class="post-title" itemprop="name">
      <a href="/2020/09/10/SpringBoot获取Request的三种方式/">SpringBoot获取Request的三种方式</a>
    </h3>
  




     <div class="post-meta">
        <time class="post-time" title="2020-09-10 17:27:00" datetime="2020-09-10T09:27:00.000Z"  itemprop="datePublished">2020-09-10</time>

    </div>

    <div class="post-content" id="post-content" itemprop="postContent">

    
        <a id="more"></a>

<ol>
<li>通过静态方法获取</li>
</ol>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ServletRequestAttributes servletRequestAttributes = (ServletRequestAttributes)RequestContextHolder.getRequestAttributes();</span><br><span class="line"></span><br><span class="line">HttpServletRequest request = servletRequestAttributes.getRequest();</span><br><span class="line">HttpServletResponse response = servletRequestAttributes.getResponse();</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>通过参数直接获取，在方法上加上参数，Springboot就会自动绑定，可以直接使用。<br>如果有多个参数，把这两个加到后面即可。</li>
</ol>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(value = <span class="string">"/test"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">(String str,</span></span></span><br><span class="line"><span class="function"><span class="params">                   HttpServletRequest request,HttpServletResponse response)</span> </span>{</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="3">
<li>注入到类，这样就不用每个方法都写了</li>
</ol>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> HttpServletRequest request;</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> HttpServletResponse response;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping</span>(value = <span class="string">"/test"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">()</span> </span>{</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
    
        <div class="post-more-div">
            <a href="/2020/09/10/SpringBoot获取Request的三种方式/" class="post-more waves-button">
                阅读全文 »
            </a>
        </div>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/">Spring</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-查询数据库历史记录"
  class="article-card article-type-post" itemprop="blogPost">

    


  
    <h3 class="post-title" itemprop="name">
      <a href="/2020/09/08/查询数据库历史记录/">查询数据库历史记录</a>
    </h3>
  




     <div class="post-meta">
        <time class="post-time" title="2020-09-08 17:39:00" datetime="2020-09-08T09:39:00.000Z"  itemprop="datePublished">2020-09-08</time>

    </div>

    <div class="post-content" id="post-content" itemprop="postContent">

    
        <h2 id="正在执行"><a href="#正在执行" class="headerlink" title="正在执行"></a>正在执行</h2><p>使用processlist，但是有个弊端，就是只能查看正在执行的sql语句，对应历史记录，查看不到。好处是不用设置，不会保存。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> information_schema;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">processlist</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>或者：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> information_schema.<span class="string">`PROCESSLIST`</span> <span class="keyword">where</span> info <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span>;</span><br></pre></td></tr></tbody></table></figure>
    
        <div class="post-more-div">
            <a href="/2020/09/08/查询数据库历史记录/" class="post-more waves-button">
                阅读全文 »
            </a>
        </div>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SQL/">SQL</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-SpringBoot使用JWT认证"
  class="article-card article-type-post" itemprop="blogPost">

    


  
    <h3 class="post-title" itemprop="name">
      <a href="/2020/09/06/SpringBoot使用JWT认证/">SpringBoot使用JWT认证</a>
    </h3>
  




     <div class="post-meta">
        <time class="post-time" title="2020-09-06 17:26:00" datetime="2020-09-06T09:26:00.000Z"  itemprop="datePublished">2020-09-06</time>

    </div>

    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>JSON Web Token（JWT）是一个非常轻巧的规范。这个规范允许我们使用JWT在用户和服务器之间传递安全可靠的信息。<br><strong>JWT的组成</strong><br> 一个JWT实际上就是一个字符串，它由三部分组成，头部、载荷与签名。简单说明就到此为止，下面我们简单介绍如何使用JWT。<br> 1、引入相关的包<br> 在pom.xml中引入JWT的包，和SpringMVC包。</p>
    
        <div class="post-more-div">
            <a href="/2020/09/06/SpringBoot使用JWT认证/" class="post-more waves-button">
                阅读全文 »
            </a>
        </div>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/">Spring</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-SpringBoot-RequestBody的使用"
  class="article-card article-type-post" itemprop="blogPost">

    


  
    <h3 class="post-title" itemprop="name">
      <a href="/2020/08/27/SpringBoot-RequestBody的使用/">SpringBoot@RequestBody的使用</a>
    </h3>
  




     <div class="post-meta">
        <time class="post-time" title="2020-08-27 17:18:00" datetime="2020-08-27T09:18:00.000Z"  itemprop="datePublished">2020-08-27</time>

    </div>

    <div class="post-content" id="post-content" itemprop="postContent">

    
        <a id="more"></a>

<h1 id="RequestBody的使用"><a href="#RequestBody的使用" class="headerlink" title="@RequestBody的使用"></a>@RequestBody的使用</h1><blockquote>
<p>转载自：<a href="https://blog.csdn.net/justry_deng/article/details/80972817" target="_blank" rel="noopener">https://blog.csdn.net/justry_deng/article/details/80972817</a></p>
</blockquote>
<h2 id="基础知识介绍"><a href="#基础知识介绍" class="headerlink" title="基础知识介绍"></a>基础知识介绍</h2><p>@RequestBody主要用来接收前端传递给后端的json字符串中的数据的(请求体中的数据的)；GET方式无请求体，所以使用@RequestBody接收数据时，前端不能使用GET方式提交数据，而是用POST方式进行提交。在后端的同一个接收方法里，@RequestBody与@RequestParam()可以同时使用，@RequestBody最多只能有一个，而@RequestParam()可以有多个。</p>
<blockquote>
<p>注：一个请求，只有一个RequestBody；一个请求，可以有多个RequestParam。</p>
</blockquote>
<blockquote>
<p>注：当同时使用@RequestParam（）和@RequestBody时，@RequestParam（）指定的参数可以是<strong>普通元素、数组、集合、对象</strong>等等(即:当，@RequestBody 与@RequestParam()<strong>可以同时使用</strong>时，原SpringMVC接收参数的机制不变，只不过RequestBody 接收的是请求体里面的数据；而RequestParam接收的是key-value里面的参数，所以它会被切面进行处理从而可以用普通元素、数组、集合、对象等接收)。</p>
<p>即：如果参数时放在<strong>请求体</strong>中，传入后台的话，那么后台要用<strong>@RequestBody</strong>才能接收到；如果<strong>不是放在请求体中</strong>的话，那么后台接收前台传过来的参数时，要用<strong>@RequestParam来接收，或则形参前什么也不写</strong>也能接收。</p>
</blockquote>
<blockquote>
<p>注：如果参数前写了<strong>@RequestParam(xxx)</strong>，那么前端必须有对应的xxx名字才行(不管其是否有值，当然可以通过设置该注解的required属性来调节是否必须传)，如果没有xxx名的话，那么请求会出错，报400。</p>
</blockquote>
<blockquote>
<p>注：如果参数前不写@RequestParam(xxx)的话，那么就前端可以有可以没有对应的xxx名字才行，如果有xxx名的话，那么就会自动匹配；没有的话，请求也能正确发送。</p>
</blockquote>
<blockquote>
<p>追注：这里与feign消费服务时不同；feign消费服务时，如果参数前什么也不写，那么会被默认是@RequestBody的。</p>
</blockquote>
<p>如果后端参数是一个对象，且该参数前是以@RequestBody修饰的，那么前端传递json参数时，必须满足以下要求：</p>
<ul>
<li>后端@RequestBody注解对应的类在将HTTP的输入流(含请求体)<strong>装配到目标类(即：@RequestBody后面的类)时，会根据json字符串中的key来匹配对应实体类的属性，如果匹配一致且json中的该key对应的值符合(或可转换为)</strong>，这一条我会在下面详细分析，其他的都可简单略过，但是<strong>本文末的核心逻辑代码以及几个结论一定要看！</strong> 实体类的对应属性的类型要求时,会调用实体类的setter方法将值赋给该属性。</li>
<li>json字符串中，如果value为””的话，后端对应属性如果是String类型的，那么接受到的就是””，如果是后端属性的类型是Integer、Double等类型，那么接收到的就是null。</li>
<li>json字符串中，如果value为null的话，后端对应收到的就是null。</li>
<li>如果某个参数没有value的话，在传json字符串给后端时，要么干脆就不把该字段写到json字符串中；要么写value时， 必须有值，null 或””都行。千万不能有类似”stature”:，这样的写法，如:</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/pasted-34.png" alt="upload successful" title="">
                </div>
                <div class="image-caption">upload successful</div>
            </figure>

<blockquote>
<p>注：关于@RequestParam()的用法，这里就不再一一说明了，可详见 《程序员成长笔记(一)》中的相关章节。</p>
</blockquote>
<hr>
<h2 id="示例详细说明"><a href="#示例详细说明" class="headerlink" title="示例详细说明"></a>示例详细说明</h2><p>先给出两个等下要用到的实体类</p>
<p>User实体类：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/pasted-35.png" alt="upload successful" title="">
                </div>
                <div class="image-caption">upload successful</div>
            </figure>

<p>Team实体类：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/pasted-36.png" alt="upload successful" title="">
                </div>
                <div class="image-caption">upload successful</div>
            </figure>

<h3 id="RequestBody直接以String接收前端传过来的json数据"><a href="#RequestBody直接以String接收前端传过来的json数据" class="headerlink" title="@RequestBody直接以String接收前端传过来的json数据"></a><code>@RequestBody</code>直接以<strong>String</strong>接收前端传过来的json数据</h3><p>后端对应的Controller：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/pasted-37.png" alt="upload successful" title="">
                </div>
                <div class="image-caption">upload successful</div>
            </figure>

<p>使用PostMan测试：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/pasted-38.png" alt="upload successful" title="">
                </div>
                <div class="image-caption">upload successful</div>
            </figure>

<h3 id="RequestBody以简单对象接收前端传过来的json数据"><a href="#RequestBody以简单对象接收前端传过来的json数据" class="headerlink" title="@RequestBody以简单对象接收前端传过来的json数据"></a><code>@RequestBody</code>以<strong>简单对象</strong>接收前端传过来的json数据</h3><p>后端对应的Controller：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/pasted-39.png" alt="upload successful" title="">
                </div>
                <div class="image-caption">upload successful</div>
            </figure>

<p>使用PostMan测试：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/pasted-40.png" alt="upload successful" title="">
                </div>
                <div class="image-caption">upload successful</div>
            </figure>

<h3 id="RequestBody以复杂对象接收前端传过来的json数据"><a href="#RequestBody以复杂对象接收前端传过来的json数据" class="headerlink" title="@RequestBody以复杂对象接收前端传过来的json数据"></a><code>@RequestBody</code>以<strong>复杂对象</strong>接收前端传过来的json数据</h3><p>后端对应的Controller：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/pasted-41.png" alt="upload successful" title="">
                </div>
                <div class="image-caption">upload successful</div>
            </figure>

<p>使用PostMan测试：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/pasted-42.png" alt="upload successful" title="">
                </div>
                <div class="image-caption">upload successful</div>
            </figure>

<h3 id="RequestBody与简单的-RequestParam-同时使用"><a href="#RequestBody与简单的-RequestParam-同时使用" class="headerlink" title="@RequestBody与简单的@RequestParam()同时使用"></a>@RequestBody与<strong>简单的@RequestParam()</strong>同时使用</h3><p>后端对应的Controller：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/pasted-43.png" alt="upload successful" title="">
                </div>
                <div class="image-caption">upload successful</div>
            </figure>

<p>使用PostMan测试：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/pasted-44.png" alt="upload successful" title="">
                </div>
                <div class="image-caption">upload successful</div>
            </figure>

<h3 id="RequestBody与复杂的-RequestParam-同时使用"><a href="#RequestBody与复杂的-RequestParam-同时使用" class="headerlink" title="@RequestBody与复杂的@RequestParam()同时使用"></a>@RequestBody与<strong>复杂的@RequestParam()</strong>同时使用</h3><p>后端对应的Controller：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/pasted-45.png" alt="upload successful" title="">
                </div>
                <div class="image-caption">upload successful</div>
            </figure>

<p>使用PostMan测试：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/pasted-46.png" alt="upload successful" title="">
                </div>
                <div class="image-caption">upload successful</div>
            </figure>

<h3 id="RequestBody接收请求体中的json数据；不加注解接收URL中的数据并组装为对象"><a href="#RequestBody接收请求体中的json数据；不加注解接收URL中的数据并组装为对象" class="headerlink" title="@RequestBody接收请求体中的json数据；不加注解接收URL中的数据并组装为对象"></a>@RequestBody接收请求体中的<strong>json数据</strong>；不加注解接收URL中的数据并组装为对象</h3><p>后端对应的Controller：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/pasted-47.png" alt="upload successful" title="">
                </div>
                <div class="image-caption">upload successful</div>
            </figure>

<p>使用PostMan测试：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/pasted-48.png" alt="upload successful" title="">
                </div>
                <div class="image-caption">upload successful</div>
            </figure>

<p>注：如果在后端方法参数前，指定了@RequestParam()的话，那么前端必须要有对应字段才行(当然可以通过设置<br>    该注解的required属性来调节是否必须传)，否者会报错；如果参数前没有任何该注解，那么前端可以传，也可<br>    以不传，如：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/pasted-49.png" alt="upload successful" title="">
                </div>
                <div class="image-caption">upload successful</div>
            </figure>

<p>上图中，如果我们传参中没有指定token，那么请求能正常进去，但是token为null；如果在String token前指定了@RequestParam(“token”)，那么前端必须要有token这个键时，请求才能正常进去，否者报400错误。</p>
<hr>
<h3 id="RequestBody与前端传过来的json数据的匹配规则"><a href="#RequestBody与前端传过来的json数据的匹配规则" class="headerlink" title="@RequestBody与前端传过来的json数据的匹配规则"></a>@RequestBody与前端传过来的<strong>json数据</strong>的匹配规则</h3><blockquote>
<p>声明：根据不同的Content-Type等情况,Spring-MVC会采取不同的HttpMessageConverter实现来进行信息转换解析。<br>下面介绍的是最常用的：前端以Content-Type 为application/json,传递json字符串数据;后端以@RequestBody模型接收数据的情况。</p>
</blockquote>
<p><strong>解析json数据大体流程概述</strong>：<br>Http传递请求体信息，最终会被封装进<code>com.fasterxml.jackson.core.json.UTF8StreamJsonParser</code>中(提示：Spring采用<code>CharacterEncodingFilter</code>设置了默认编码为UTF-8)，然后在<code>public class BeanDeserializer extends BeanDeserializerBase implements java.io.Serializable</code>中，通过 <code>public Object deserializeFromObject(JsonParser p, DeserializationContext ctxt) throws IOException</code>方法进行解析。</p>
<h3 id="核心逻辑分析示例"><a href="#核心逻辑分析示例" class="headerlink" title="核心逻辑分析示例"></a><strong>核心逻辑分析示例</strong></h3><p>假设前端传的json串是这样的： <code>{"name1":"邓沙利文","age":123,"mot":"我是一只小小小小鸟~"}</code> 后端的模型只有name和age属性，以及对应的setter/getter方法；给出一般用到的<code>deserializeFromObject(JsonParser p, DeserializationContext ctxt)</code>方法的<strong>核心逻辑：</strong></p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/pasted-50.png" alt="upload successful" title="">
                </div>
                <div class="image-caption">upload successful</div>
            </figure>

<hr>
<h3 id="小技巧之指定模型中的属性对应什么key"><a href="#小技巧之指定模型中的属性对应什么key" class="headerlink" title="小技巧之指定模型中的属性对应什么key"></a><strong>小技巧之指定模型中的属性对应什么key</strong></h3><p>这里简单介绍，更多的可参考：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeanPropertyMap</span> <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">SettableBeanProperty</span>&gt;,<span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>给出Controller中的测试类:</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/pasted-51.png" alt="upload successful" title="">
                </div>
                <div class="image-caption">upload successful</div>
            </figure>

<p>给出模型中的属性(setter/getter方法没截出来)：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/pasted-52.png" alt="upload successful" title="">
                </div>
                <div class="image-caption">upload successful</div>
            </figure>

<p>使用postman测试一下，示例：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/pasted-53.png" alt="upload successful" title="">
                </div>
                <div class="image-caption">upload successful</div>
            </figure>

<p>上图简单测试了一下，但是测得并不全面,这里就不带大家一起测试了，直接给出。</p>
<hr>
<h3 id="全面的结论："><a href="#全面的结论：" class="headerlink" title="全面的结论："></a><strong>全面的结论</strong>：</h3><p><strong>结论①</strong>：<code>@JsonAlias</code>注解，实现:json转模型时，使json中的特定key能转化为特定的模型属性;但是模型转json时，对应的转换后的key仍然与属性名一致，见：上图示例中的name字段的请求与响应。以下图进一步说明：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/pasted-54.png" alt="upload successful" title="">
                </div>
                <div class="image-caption">upload successful</div>
            </figure>

<p>此时，json字符串转换为模型时，json中key为Name或为name123或为name的都能识别。</p>
<p><strong>结论②</strong>：@JsonProperty**注解，实现：json转模型时，使json中的特定key能转化为指定的模型属性；同样的，模<br>        型转json时，对应的转换后的key为指定的key，见：示例中的motto字段的请求与响应。<br>        以下图进一步说明：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/pasted-55.png" alt="upload successful" title="">
                </div>
                <div class="image-caption">upload successful</div>
            </figure>

<p>此时，json字符串转换为模型时，key为MOTTO的能识别，但key为motto的不能识别。</p>
<p><strong>结论③</strong>：@JsonAlias注解需要依赖于setter、getter，而@JsonProperty注解不需要。</p>
<p><strong>结论④</strong>：在不考虑上述两个注解的一般情况下，key与属性匹配时,默认大小写敏感。</p>
<p><strong>结论⑤</strong>：有多个相同的key的json字符串中，转换为模型时，会以相同的几个key中，排在最后的那个key的值给模型属性复制，因为setter会覆盖原来的值。见示例中的gender属性。</p>
<p><strong>结论⑥</strong>：后端@RequestBody注解对应的类在将HTTP的输入流(含请求体)装配到目标类(即:@RequestBody后面的类)时，会根据json字符串中的key来匹配对应实体类的属性，如果匹配一致且json中的该key对应的值符合(或可转换为)实体类的对应属性的类型要求时，会调用实体类的setter方法将值赋给该属性。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
    
        <div class="post-more-div">
            <a href="/2020/08/27/SpringBoot-RequestBody的使用/" class="post-more waves-button">
                阅读全文 »
            </a>
        </div>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/">Spring</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Lambda表达式递归"
  class="article-card article-type-post" itemprop="blogPost">

    


  
    <h3 class="post-title" itemprop="name">
      <a href="/2020/08/19/Lambda表达式递归/">Lambda表达式递归</a>
    </h3>
  




     <div class="post-meta">
        <time class="post-time" title="2020-08-19 15:38:00" datetime="2020-08-19T07:38:00.000Z"  itemprop="datePublished">2020-08-19</time>

    </div>

    <div class="post-content" id="post-content" itemprop="postContent">

    
        <h2 id="置顶"><a href="#置顶" class="headerlink" title="置顶"></a>置顶</h2><p>一个求和方法：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::function&lt;<span class="keyword">int</span>(<span class="keyword">const</span> <span class="keyword">int</span>&amp;)&gt;s = [&amp;](<span class="keyword">const</span> <span class="keyword">int</span>&amp; n) {</span><br><span class="line">    <span class="keyword">return</span> n == <span class="number">1</span> ? <span class="number">1</span> : n + s(n - <span class="number">1</span>);</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>

<p>可以直接使用</p>
    
        <div class="post-more-div">
            <a href="/2020/08/19/Lambda表达式递归/" class="post-more waves-button">
                阅读全文 »
            </a>
        </div>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C-11/">C++11</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-SpringBoot从打包到启动"
  class="article-card article-type-post" itemprop="blogPost">

    


  
    <h3 class="post-title" itemprop="name">
      <a href="/2020/08/17/SpringBoot从打包到启动/">SpringBoot从打包到启动</a>
    </h3>
  




     <div class="post-meta">
        <time class="post-time" title="2020-08-17 17:07:00" datetime="2020-08-17T09:07:00.000Z"  itemprop="datePublished">2020-08-17</time>

    </div>

    <div class="post-content" id="post-content" itemprop="postContent">

    
        <h2 id="一、创建项目"><a href="#一、创建项目" class="headerlink" title="一、创建项目"></a>一、创建项目</h2><p>创建项目一共有两种方式，下面分别进行介绍。</p>
<h3 id="1，在线创建项目"><a href="#1，在线创建项目" class="headerlink" title="1，在线创建项目"></a>1，在线创建项目</h3><p>（1）在线创建是 <strong>Spring Boot</strong> 官方提供的一种创建方式，在浏览器中访问如下网址：</p>
<ul>
<li><a href="https://start.spring.io/" target="_blank" rel="noopener">https://start.spring.io/</a></li>
</ul>
    
        <div class="post-more-div">
            <a href="/2020/08/17/SpringBoot从打包到启动/" class="post-more waves-button">
                阅读全文 »
            </a>
        </div>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/">Spring</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Spring基础"
  class="article-card article-type-post" itemprop="blogPost">

    


  
    <h3 class="post-title" itemprop="name">
      <a href="/2020/08/17/Spring基础/">Spring基础</a>
    </h3>
  




     <div class="post-meta">
        <time class="post-time" title="2020-08-17 17:06:00" datetime="2020-08-17T09:06:00.000Z"  itemprop="datePublished">2020-08-17</time>

    </div>

    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>[TOC]</p>
<h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>　　Spring框架是个轻量级的Java EE框架。所谓轻量级，是指不依赖于容器就能运行的。Struts、Hibernate也是轻量级的。 </p>
<p>　　Spring以IoC、AOP为主要思想，其中IoC，Inversion of Control 指控制反转或反向控制。在Spring框架中我们通过配置创建类对象，由Spring在运行阶段实例化、组装对象。AOP，Aspect Oriented Programming，面向切面编程，其思想是在执行某些代码前执行另外的代码，使程序更灵活、扩展性更好，可以随便地添加、删除某些功能。Servlet中的Filter便是一种AOP思想的实现。 </p>
    
        <div class="post-more-div">
            <a href="/2020/08/17/Spring基础/" class="post-more waves-button">
                阅读全文 »
            </a>
        </div>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/">Spring</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-杭州社保办理流程"
  class="article-card article-type-post" itemprop="blogPost">

    


  
    <h3 class="post-title" itemprop="name">
      <a href="/2020/08/15/杭州社保办理流程/">杭州社保办理流程</a>
    </h3>
  




     <div class="post-meta">
        <time class="post-time" title="2020-08-15 17:42:00" datetime="2020-08-15T09:42:00.000Z"  itemprop="datePublished">2020-08-15</time>

    </div>

    <div class="post-content" id="post-content" itemprop="postContent">

    
        <h2 id="社保"><a href="#社保" class="headerlink" title="社保"></a>社保</h2><ol>
<li>登录网址：杭州政务服务网 <a href="http://www.zjzwfw.gov.cn/" target="_blank" rel="noopener">http://www.zjzwfw.gov.cn/</a></li>
<li>切换到杭州市，部门窗口—市人力社保局</li>
<li>底部 杭州社会保险网上服务大厅</li>
<li>法人登录—法人数字证书登录—e照通扫码</li>
</ol>
    
        <div class="post-more-div">
            <a href="/2020/08/15/杭州社保办理流程/" class="post-more waves-button">
                阅读全文 »
            </a>
        </div>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/社保/">社保</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Dart多态"
  class="article-card article-type-post" itemprop="blogPost">

    


  
    <h3 class="post-title" itemprop="name">
      <a href="/2020/08/10/Dart多态/">Dart多态</a>
    </h3>
  




     <div class="post-meta">
        <time class="post-time" title="2020-08-10 16:02:00" datetime="2020-08-10T08:02:00.000Z"  itemprop="datePublished">2020-08-10</time>

    </div>

    <div class="post-content" id="post-content" itemprop="postContent">

    
        <h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><ul>
<li>使用关键字 extends 继承一个类</li>
<li><strong>子类会继承父类可见的属性和方法，不会继承构造方法</strong></li>
<li><strong>子类能够复写父类的方法，getter 和 setter</strong></li>
<li>单继承，多态性</li>
</ul>
    
        <div class="post-more-div">
            <a href="/2020/08/10/Dart多态/" class="post-more waves-button">
                阅读全文 »
            </a>
        </div>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Dart/">Dart</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Qt开发经验-飞扬青云"
  class="article-card article-type-post" itemprop="blogPost">

    


  
    <h3 class="post-title" itemprop="name">
      <a href="/2020/07/16/Qt开发经验-飞扬青云/">Qt开发经验-飞扬青云</a>
    </h3>
  




     <div class="post-meta">
        <time class="post-time" title="2020-07-16 16:41:00" datetime="2020-07-16T08:41:00.000Z"  itemprop="datePublished">2020-07-16</time>

    </div>

    <div class="post-content" id="post-content" itemprop="postContent">

    
        <a id="more"></a>

<h3 id="一、开发经验总结"><a href="#一、开发经验总结" class="headerlink" title="一、开发经验总结"></a>一、开发经验总结</h3><ol>
<li><p>当编译发现大量错误的时候，从第一个看起，一个一个的解决，不要急着去看下一个错误，往往后面的错误都是由于前面的错误引起的，第一个解决后很可能都解决了。</p>
</li>
<li><p>定时器是个好东西，学会好使用它，有时候用<code>QTimer::singleShot</code>可以解决意想不到的问题。</p>
</li>
<li><p>打开creator，在构建套件的环境中增加<code>MAKEFLAGS=-j8</code>，可以不用每次设置多线程编译。珍爱时间和生命。新版的QtCreator已经默认就是j8。</p>
</li>
<li><p>如果你想顺利用QtCreator部署安卓程序，首先你要在AndroidStudio 里面配置成功，把坑全部趟平。</p>
</li>
<li><p>很多时候找到Qt对应封装的方法后，记得多看看该函数的重载，多个参数的，你会发现不一样的世界，有时候会恍然大悟，原来Qt已经帮我们封装好了。</p>
</li>
<li><p>可以在pro文件中写上标记版本号+ico图标（Qt5才支持）</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">VERSION  = <span class="number">2020.10</span><span class="number">.25</span></span><br><span class="line">RC_ICONS = main0.ico</span><br></pre></td></tr></tbody></table></figure>

<ol start="7">
<li>管理员运行程序，限定在MSVC编译器。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QMAKE_LFLAGS += /MANIFESTUAC:<span class="string">"level='requireAdministrator' uiAccess='false'"</span> #以管理员运行</span><br><span class="line">QMAKE_LFLAGS += /SUBSYSTEM:WINDOWS,<span class="string">"5.01"</span> #VS2013 在XP运行</span><br></pre></td></tr></tbody></table></figure>

<ol start="8">
<li><p>运行文件附带调试输出窗口<br><code>CONFIG += console pro</code></p>
</li>
<li><p>绘制平铺背景<code>QPainter::drawTiledPixmap</code>,绘制圆角矩形<code>QPainter::drawRoundedRect()</code>,而不是<code>QPainter::drawRoundRect()</code>;</p>
</li>
<li><p>移除旧的样式</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//移除原有样式</span></span><br><span class="line">style()-&gt;unpolish(ui-&gt;btn);</span><br><span class="line"><span class="comment">//重新设置新的该控件的样式。</span></span><br><span class="line">style()-&gt;polish(ui-&gt;btn);</span><br></pre></td></tr></tbody></table></figure>

<ol start="11">
<li>获取类的属性</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> QMetaObject *metaobject = object-&gt;metaObject();</span><br><span class="line"><span class="keyword">int</span> count = metaobject-&gt;propertyCount();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; ++i) {</span><br><span class="line">    QMetaProperty metaproperty = metaobject-&gt;property(i);</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span> *name = metaproperty.name();</span><br><span class="line">    QVariant value = object-&gt;property(name);</span><br><span class="line">    qDebug() &lt;&lt; name &lt;&lt; value;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="12">
<li><p>Qt内置图标封装在QStyle中，大概七十多个图标，可以直接拿来用。<br><code>QStyle::SP_TitleBarMenuButton</code></p>
</li>
<li><p>根据操作系统位数判断加载</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">win32 {</span><br><span class="line">    contains(DEFINES, WIN64) { DESTDIR = $${PWD}/../../bin64</span><br><span class="line">    } <span class="keyword">else</span> { DESTDIR = $${PWD}/../../bin32 }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="14">
<li><p>Qt5增强了很多安全性验证，如果出现<code>setGeometry: Unable to set geometry</code>，请将该控件的可见移到加入布局之后。</p>
</li>
<li><p>可以将控件A添加到布局，然后控件B设置该布局，这种灵活性大大提高了控件的组合度，比如可以在文本框左侧右侧增加一个搜索按钮，按钮设置图标即可。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">QPushButton *btn = <span class="keyword">new</span> QPushButton;</span><br><span class="line">btn-&gt;resize(<span class="number">30</span>, ui-&gt;lineEdit-&gt;height());</span><br><span class="line">QHBoxLayout *layout = <span class="keyword">new</span> QHBoxLayout(ui-&gt;lineEdit);</span><br><span class="line">layout-&gt;setMargin(<span class="number">0</span>);</span><br><span class="line">layout-&gt;addStretch();</span><br><span class="line">layout-&gt;addWidget(btn);</span><br></pre></td></tr></tbody></table></figure>

<ol start="16">
<li><p>对QLCDNumber控件设置样式，需要将QLCDNumber的segmentstyle设置为flat。</p>
</li>
<li><p>巧妙的使用findChildren可以<strong>查找该控件下的所有子控件</strong>。findChild为查找单个。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查找指定类名objectName的控件</span></span><br><span class="line">QList&lt;QWidget *&gt; widgets = parentWidget.findChildren&lt;QWidget *&gt;(<span class="string">"widgetname"</span>);</span><br><span class="line"><span class="comment">//查找所有QPushButton</span></span><br><span class="line">QList&lt;QPushButton *&gt; allPButtons = parentWidget.findChildren&lt;QPushButton *&gt;();</span><br><span class="line"><span class="comment">//查找一级子控件,不然会一直遍历所有子控件</span></span><br><span class="line">QList&lt;QPushButton *&gt; childButtons = parentWidget.findChildren&lt;QPushButton *&gt;(QString(), Qt::FindDirectChildrenOnly);</span><br></pre></td></tr></tbody></table></figure>

<ol start="18">
<li>巧妙的使用inherits判断是否属于某种类。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">QTimer *timer = <span class="keyword">new</span> QTimer;         <span class="comment">// QTimer inherits QObject</span></span><br><span class="line">timer-&gt;inherits(<span class="string">"QTimer"</span>);          <span class="comment">// returns true</span></span><br><span class="line">timer-&gt;inherits(<span class="string">"QObject"</span>);         <span class="comment">// returns true</span></span><br><span class="line">timer-&gt;inherits(<span class="string">"QAbstractButton"</span>); <span class="comment">// returns false</span></span><br></pre></td></tr></tbody></table></figure>

<ol start="19">
<li><p>使用弱属性机制，可以存储临时的值用于传递判断。可以通过<code>widget-&gt;dynamicPropertyNames()</code>列出所有弱属性名称，然后通过<code>widget-&gt;property("name")</code>取出对应的弱属性的值。</p>
</li>
<li><p>在开发时, 无论是出于维护的便捷性, 还是节省内存资源的考虑, 都应该有一个 <strong>qss 文件来存放所有的样式表</strong>, 而不应该将 setStyleSheet 写的到处都是。如果是初学阶段或者测试阶段可以直接UI上右键设置样式表，正式项目还是建议统一到一个qss样式表文件比较好，统一管理。</p>
</li>
<li><p>如果出现<code>Z-order assignment: is not a valid widget.</code>错误提示，用记事本打开对应的ui文件，找到<code>&lt;zorder&gt;&lt;/zorder&gt;</code>为空的地方，删除即可。</p>
</li>
<li><p>善于利用QComboBox的<strong>addItem的第二个参数设置用户数据</strong>，可以实现很多效果，使用itemData取出来。</p>
</li>
<li><p>如果用了webengine模块，发布程序的时候带上QtWebEngineProcess.exe+translations文件夹+resources文件夹。</p>
</li>
<li><p><code>a.setAttribute(Qt::AA_NativeWindows);</code>可以让每个控件都拥有独立的句柄。</p>
</li>
<li><p>Qt+Android防止程序被关闭。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">if</span> defined(Q_OS_ANDROID)</span></span><br><span class="line"><span class="function">QAndroidService <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"><span class="keyword">return</span> a.exec()</span><br><span class="line">#<span class="keyword">else</span></span><br><span class="line">QApplication a(argc, argv);</span><br><span class="line"><span class="keyword">return</span> a.exec();</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></tbody></table></figure>

<ol start="26">
<li><p>可以对整体的指示器设置样式，例如 <code>*::down-arrow,*::menu-indicator{}  *::up-arrow:disabled,*::up-arrow:off{}</code>。</p>
</li>
<li><p>可以执行位置设置背景图片。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">QMainWindow &gt; .QWidget {</span><br><span class="line">    background-color: gainsboro;</span><br><span class="line">    background-image: url(:/images/pagefold.png);</span><br><span class="line">    background-position: top right;</span><br><span class="line">    background-repeat: no-repeat</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="28">
<li><p>嵌入式linux运行Qt程序  Qt4写法：<code>./HelloQt -qws</code> &amp;   Qt5写法：<code>./HelloQt --platform xcb</code></p>
</li>
<li><p>Qtcreator软件的配置文件存放在：<code>C:\Users\Administrator\AppData\Roaming\QtProject</code>，有时候如果发现出问题了，将这个文件夹删除后打开creator自动重新生成即可。</p>
</li>
<li><p>QMediaPlayer依赖本地解码器，WIN上下载k-lite或者LAV Filters安装即可。</p>
</li>
<li><p>判断编译器类型、编译器版本、操作系统。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//GCC编译器</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> __GNUC__</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> __GNUC__ &gt;= 3 <span class="comment">// GCC3.0以上</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//MSVC编译器</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> _MSC_VER</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> _MSC_VER &gt;=1000 <span class="comment">// VC++4.0以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> _MSC_VER &gt;=1100 <span class="comment">// VC++5.0以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> _MSC_VER &gt;=1200 <span class="comment">// VC++6.0以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> _MSC_VER &gt;=1300 <span class="comment">// VC2003以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> _MSC_VER &gt;=1400 <span class="comment">// VC2005以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> _MSC_VER &gt;=1500 <span class="comment">// VC2008以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> _MSC_VER &gt;=1600 <span class="comment">// VC2010以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> _MSC_VER &gt;=1700 <span class="comment">// VC2012以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> _MSC_VER &gt;=1800 <span class="comment">// VC2013以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> _MSC_VER &gt;=1900 <span class="comment">// VC2015以上</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Borland C++</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> __BORLANDC__</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Cygwin</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> __CYGWIN__</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> __CYGWIN32__</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//mingw</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> __MINGW32__</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//windows</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> _WIN32    <span class="comment">//32bit</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> _WIN64    <span class="comment">//64bit</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> _WINDOWS     <span class="comment">//图形界面程序</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> _CONSOLE     <span class="comment">//控制台程序</span></span></span><br><span class="line"><span class="comment">//Windows（95/98/Me/NT/2000/XP/Vista）和Windows CE都定义了</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (WINVER &gt;= 0x030a)     <span class="comment">// Windows 3.1以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (WINVER &gt;= 0x0400)     <span class="comment">// Windows 95/NT4.0以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (WINVER &gt;= 0x0410)     <span class="comment">// Windows 98以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (WINVER &gt;= 0x0500)     <span class="comment">// Windows Me/2000以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (WINVER &gt;= 0x0501)     <span class="comment">// Windows XP以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (WINVER &gt;= 0x0600)     <span class="comment">// Windows Vista以上</span></span></span><br><span class="line"><span class="comment">//_WIN32_WINNT 内核版本</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (_WIN32_WINNT &gt;= 0x0500) <span class="comment">// Windows 2000以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (_WIN32_WINNT &gt;= 0x0501) <span class="comment">// Windows XP以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (_WIN32_WINNT &gt;= 0x0600) <span class="comment">// Windows Vista以上</span></span></span><br></pre></td></tr></tbody></table></figure>

<ol start="32">
<li>在pro中判断Qt版本及构建套件位数</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#打印版本信息</span><br><span class="line">message(qt version: $$QT_VERSION)</span><br><span class="line">#判断当前qt版本号</span><br><span class="line">QT_VERSION = $$[QT_VERSION]</span><br><span class="line">QT_VERSION = $$split(QT_VERSION, <span class="string">"."</span>)</span><br><span class="line">QT_VER_MAJ = $$member(QT_VERSION, <span class="number">0</span>)</span><br><span class="line">QT_VER_MIN = $$member(QT_VERSION, <span class="number">1</span>)</span><br><span class="line">#下面是表示 Qt5<span class="number">.5</span></span><br><span class="line">greaterThan(QT_VER_MAJ, <span class="number">4</span>) {</span><br><span class="line">greaterThan(QT_VER_MIN, <span class="number">4</span>) {</span><br><span class="line">#自己根据需要做一些处理</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">#QT_ARCH是Qt5新增的,在Qt4上没效果</span><br><span class="line">#打印当前Qt构建套件的信息</span><br><span class="line">message($$QT_ARCH)</span><br><span class="line">#表示arm平台构建套件</span><br><span class="line">contains(QT_ARCH, arm) {}</span><br><span class="line">#表示<span class="number">32</span>位的构建套件</span><br><span class="line">contains(QT_ARCH, i386) {}</span><br><span class="line">#表示<span class="number">64</span>位的构建套件</span><br><span class="line">contains(QT_ARCH, x86_64) {}</span><br></pre></td></tr></tbody></table></figure>

<ol start="33">
<li>Qt最小化后恢复界面假死冻结，加上代码</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">showEvent</span><span class="params">(QShowEvent *e)</span></span>{</span><br><span class="line">setAttribute(Qt::WA_Mapped);</span><br><span class="line">QWidget::showEvent(e);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="34">
<li><p>获取标题栏高度：<code>style()-&gt;pixelMetric(QStyle::PM_TitleBarHeight);</code> PM_TitleBarHeight点进去你会发现新大陆。</p>
</li>
<li><p>设置<strong>高分屏属性</strong>以便支持2K4K等高分辨率，尤其是手机app。必须写在main函数的<code>QApplication a(argc, argv);</code>的前面。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (QT_VERSION &gt; QT_VERSION_CHECK(5,6,0))</span></span><br><span class="line">    QGuiApplication::setAttribute(Qt::AA_EnableHighDpiScaling);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></tbody></table></figure>

<ol start="36">
<li><p>如果运行程序出现 <code>Fault tolerant heap shim applied to current process. This is usually due to previous crashes.</code> 错误。<br>办法：打开注册表，找到<code>HKEY_LOCAL_MACHINE\Software\Microsoft\Windows  NT\CurrentVersion\AppCompatFlags\Layers\</code>，选中<code>Layers</code>键值，从右侧列表中删除自己的那个程序路径即可。</p>
</li>
<li><p>Qt内置了<code>QFormLayout</code>表单布局用于自动生成标签+输入框的组合的表单界面。</p>
</li>
<li><p>qml播放视频在linux需要安装 <code>sudo apt-get install libpulse-dev</code>。</p>
</li>
<li><p>可以直接继承<code>QSqlQueryModel</code>实现自定义的QueryModel，比如某一列字体颜色，占位符，其他样式等，重写<code>QVariant CustomSqlModel::data(const QModelIndex &amp;index, int role) const</code>。</p>
</li>
<li><p>Qt5以后提供了类QScroller直接将控件滚动。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//禁用横向滚动条</span></span><br><span class="line">ui-&gt;listWidget-&gt;setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff);</span><br><span class="line"><span class="comment">//禁用纵向滚动条</span></span><br><span class="line">ui-&gt;listWidget-&gt;setVerticalScrollBarPolicy(Qt::ScrollBarAlwaysOff);</span><br><span class="line"><span class="comment">//设置横向按照像素值为单位滚动</span></span><br><span class="line">ui-&gt;listWidget-&gt;setHorizontalScrollMode(QListWidget::ScrollPerPixel);</span><br><span class="line"><span class="comment">//设置纵向按照像素值为单位滚动</span></span><br><span class="line">ui-&gt;listWidget-&gt;setVerticalScrollMode(QListWidget::ScrollPerPixel);</span><br><span class="line"><span class="comment">//设置滚动对象以及滚动方式为鼠标左键拉动滚动</span></span><br><span class="line">QScroller::grabGesture(ui-&gt;listWidget, QScroller::LeftMouseButtonGesture);</span><br><span class="line"><span class="comment">//还有个QScrollerProperties可以设置滚动的一些参数</span></span><br></pre></td></tr></tbody></table></figure>

<ol start="41">
<li>如果使用sqlite数据库不想产生数据库文件，可以创建内存数据库。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QSqlDatabase db = QSqlDatabase::addDatabase(<span class="string">"QSQLITE"</span>);</span><br><span class="line">db.setDatabaseName(<span class="string">":memory:"</span>);</span><br></pre></td></tr></tbody></table></figure>

<ol start="42">
<li><p>清空数据表并重置自增ID，<code>sql = truncate table table_name</code>。</p>
</li>
<li><p>Qtchart模块从Qt5.7开始自带，最低编译要求Qt5.4。在安装的时候记得勾选，默认不勾选。使用该模块需要引入命名空间。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QChartView&gt;</span></span></span><br><span class="line">QT_CHARTS_USE_NAMESPACE</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomChart</span> :</span> <span class="keyword">public</span> QChartView</span><br></pre></td></tr></tbody></table></figure>

<ol start="44">
<li><p>QPushButton左对齐文字，需要设置样式表QPushButton{text-align:left;}</p>
</li>
<li><p>QLabel有三种设置文本的方法，掌握好Qt的属性系统，举一反三，可以做出很多效果。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ui-&gt;label-&gt;setStyleSheet(<span class="string">"qproperty-text:hello;"</span>);</span><br><span class="line">ui-&gt;label-&gt;setProperty(<span class="string">"text"</span>, <span class="string">"hello"</span>);</span><br><span class="line">ui-&gt;label-&gt;setText(<span class="string">"hello"</span>);</span><br></pre></td></tr></tbody></table></figure>

<ol start="46">
<li>巧妙的用QEventLoop开启事件循环，可以使得很多同步获取返回结果而不阻塞界面。QEventLoop内部新建了线程执行。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">QEventLoop loop;</span><br><span class="line">connect(reply, SIGNAL(finished()), &amp;loop, SLOT(quit()));</span><br><span class="line">loop.exec();</span><br></pre></td></tr></tbody></table></figure>

<ol start="47">
<li><p>多种预定义变量 <code>#if (defined webkit) || (defined webengine)</code>，去掉生成空的debug和release目录 <code>CONFIG -= debug_and_release</code>。</p>
</li>
<li><p>新版的Qtcreator增强了语法检查，会弹出很多警告提示等，可以在插件列表中关闭clang打头的几个即可，Help&gt;About Plugins。也可以设置代码检查级别，Tools&gt;Options &gt;C++ &gt;Code Model。</p>
</li>
<li><p>QSqlTableModel的rowCount方法，<strong>默认最大返回256</strong>，如果超过256，可以将表格拉到底部，会自动加载剩余的，每次最大加载256条数据，如果需要打印或者导出数据，记得最好采用sql语句去查询，而不是使用QSqlTableModel的rowCount方法。不然永远最大只会导出256条数据。<br>如果数据量很小，也可以采用如下方法：</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//主动加载所有数据,不然获取到的行数&lt;=256</span></span><br><span class="line"><span class="keyword">while</span>(model-&gt;canFetchMore()) {</span><br><span class="line">    model-&gt;fetchMore();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="50">
<li><p>如果需要指定无边框窗体，但是又需要保留操作系统的边框特性，可以<strong>自由拉伸边框</strong>，可以使用 <code>setWindowFlags(Qt::CustomizeWindowHint);</code></p>
</li>
<li><p>在某些http post数据的时候，如果采用的是&amp;字符串连接的数据发送，中文解析乱码的话，需要将中文进行<strong>URL转码</strong>。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QString content = <span class="string">"测试中文"</span>;</span><br><span class="line">QString note = content.toUtf8().toPercentEncoding();</span><br></pre></td></tr></tbody></table></figure>

<ol start="52">
<li><p>Qt<strong>默认不支持大资源文件</strong>，比如添加了字体文件，需要pro文件开启。<br><code>CONFIG += resources_big</code></p>
</li>
<li><p>Qt中继承QWidget之后，样式表不起作用，解决办法有三个。强烈推荐方法一。</p>
</li>
</ol>
<ul>
<li>方法一：设置属性 <code>this-&gt;setAttribute(Qt::WA_StyledBackground, true);</code></li>
<li>方法二：改成继承QFrame，因为QFrame自带paintEvent函数已做了实现，在使用样式表时会进行解析和绘制。</li>
<li>方法三：重新实现QWidget的paintEvent函数时，使用QStylePainter绘制。</li>
</ul>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> Widget::paintEvent(QPaintEvent *)</span><br><span class="line">{</span><br><span class="line">    QStyleOption option;</span><br><span class="line">    option.initFrom(<span class="keyword">this</span>);</span><br><span class="line">    <span class="function">QPainter <span class="title">painter</span><span class="params">(<span class="keyword">this</span>)</span></span>;</span><br><span class="line">    style()-&gt;drawPrimitive(QStyle::PE_Widget, &amp;option, &amp;painter, <span class="keyword">this</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="54">
<li><p>有时候在界面上加了弹簧，需要动态改变弹簧对应的拉伸策略，对应方法为changeSize，很多人会选择使用set开头去找，找不到的。</p>
</li>
<li><p>在使用QFile的过程中，不建议频繁的打开文件写入然后再关闭文件，比如间隔5ms输出日志，IO性能瓶颈很大，这种情况建议先打开文件不要关闭，等待合适的时机比如析构函数中或者日期变了需要重新变换日志文件的时候关闭文件。不然短时间内大量的打开关闭文件会很卡，文件越大越卡。</p>
</li>
<li><p>在很多网络应用程序，需要自定义心跳包来保持连接，不然断电或者非法关闭程序，对方识别不到，需要进行超时检测，但是有些程序没有提供心跳协议，此时需要启用系统层的保活程序，此方法适用于TCP连接。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> fd = tcpSocket-&gt;socketDescriptor();</span><br><span class="line"><span class="keyword">int</span> keepAlive = <span class="number">1</span>;      <span class="comment">//开启keepalive属性,缺省值:0(关闭)</span></span><br><span class="line"><span class="keyword">int</span> keepIdle = <span class="number">5</span>;       <span class="comment">//如果在5秒内没有任何数据交互,则进行探测,缺省值:7200(s)</span></span><br><span class="line"><span class="keyword">int</span> keepInterval = <span class="number">2</span>;   <span class="comment">//探测时发探测包的时间间隔为2秒,缺省值:75(s)</span></span><br><span class="line"><span class="keyword">int</span> keepCount = <span class="number">2</span>;      <span class="comment">//探测重试的次数,全部超时则认定连接失效,缺省值:9(次)</span></span><br><span class="line">setsockopt(fd, SOL_SOCKET, SO_KEEPALIVE, (<span class="keyword">void</span> *)&amp;keepAlive, <span class="keyword">sizeof</span>(keepAlive));</span><br><span class="line">setsockopt(fd, SOL_TCP, TCP_KEEPIDLE, (<span class="keyword">void</span> *)&amp;keepIdle, <span class="keyword">sizeof</span>(keepIdle));</span><br><span class="line">setsockopt(fd, SOL_TCP, TCP_KEEPINTVL, (<span class="keyword">void</span> *)&amp;keepInterval, <span class="keyword">sizeof</span>(keepInterval));</span><br><span class="line">setsockopt(fd, SOL_TCP, TCP_KEEPCNT, (<span class="keyword">void</span> *)&amp;keepCount, <span class="keyword">sizeof</span>(keepCount));</span><br></pre></td></tr></tbody></table></figure>

<ol start="57">
<li><p>如果程序打包好以后弹出提示 <code>This application failed to start because it could not find or load the Qt platform plugin</code> 一般都是因为platforms插件目录未打包或者打包错了的原因导致的。</p>
</li>
<li><p>非常不建议tr中包含中文，尽管现在的新版Qt支持中文到其他语言的翻译，但是很不规范，也不知道TMD是谁教的，tr的本意是包含英文，然后翻译到其他语言比如中文，现在大量的初学者滥用tr，如果没有翻译的需求，禁用tr，tr需要开销的，Qt默认会认为他需要翻译，会额外进行特殊处理。</p>
</li>
<li><p>很多人Qt和Qt Creator傻傻分不清楚，经常问Qt什么版本结果发一个Qt Creator的版本过来，Qt Creator是使用Qt编写的集成开发环境IDE，和宇宙第一的Visual Studio一样，他可以是msvc编译器的（WIN对应的Qt集成安装环境中自带的Qt Cerator是msvc的），也可以是mingw编译的，还可以是gcc的。如果是自定义控件插件，需要集成到Qt Creator中，必须保证该插件的动态库文件（dll或者so等文件）对应的编译器和Qt版本以及位数和Qt Creator的版本完全一致才行，否则基本不大可能集成进去。特别注意的是Qt集成环境安装包中的Qt版本和Qt Creator版本未必完全一致，必须擦亮眼睛看清楚，有些是完全一致的。</p>
</li>
<li><p>超过两处相同处理的代码，建议单独写成函数。代码尽量规范精简，比如 <code>if(a == 123)</code> 要写成 <code>if (123 == a)</code>，值在前面，再比如<code>if (ok == true)</code> 要写成 <code>if (ok)</code>，<code>if (ok == false)</code> 要写成 <code>if (!ok)</code>等。</p>
</li>
<li><p>很多人问Qt嵌入式平台用哪个好，这里统一回答（当前时间节点2018年）：imx6+335x比较稳定，性能高就用RK3288 RK3399，便宜的话就用全志H3，玩一玩可以用树莓派香橙派。</p>
</li>
<li><p>对于大段的注释代码，建议用 <code>#if 0 #endif</code> 将代码块包含起来，而不是将该段代码选中然后全部 <code>//</code> ，下次要打开这段代码的话，又需要重新选中一次取消，如果采用的是 <code>#if 0</code>则只要把<code>0</code>改成<code>1</code>即可，效率大大提升。</p>
</li>
<li><p>Qt打包发布，有很多办法，Qt5以后提供了打包工具windeployqt（linux上为linuxdeployqt，mac上为macdeployqt）可以很方便的将应用程序打包，使用下来发现也不是万能的，有时候会多打包一些没有依赖的文件，有时候又会忘记打包一些插件尤其是用了qml的情况下，而且不能识别第三方库，比如程序依赖ffmpeg，则对应的库需要自行拷贝，终极大法就是将你的可执行文件复制到Qt安装目录下的bin目录，然后整个一起打包，挨个删除不大可能依赖的组件，直到删到正常运行为止。</p>
</li>
<li><p>Qt中的动画，底层用的是QElapsedTimer定时器来完成处理，比如产生一些指定规则算法的数据，然后对属性进行处理。</p>
</li>
<li><p>在绘制无背景颜色只有边框颜色的圆形时候，可以用绘制360度的圆弧替代，效果完全一致。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">QRect <span class="title">rect</span><span class="params">(-radius, -radius, radius * <span class="number">2</span>, radius * <span class="number">2</span>)</span></span>;</span><br><span class="line"><span class="comment">//以下两种方法二选一,其实绘制360度的圆弧=绘制无背景的圆形</span></span><br><span class="line">painter-&gt;drawArc(rect, <span class="number">0</span>, <span class="number">360</span> * <span class="number">16</span>);</span><br><span class="line">painter-&gt;drawEllipse(rect);</span><br></pre></td></tr></tbody></table></figure>

<ol start="66">
<li><p>不要把d指针看的很玄乎，其实就是在类的实现文件定义了一个私有类，用来存放局部变量，个人建议在做一些小项目时，没有太大必要引入这种机制，会降低代码可读性，增加复杂性，新手接受项目后会看的很懵逼。</p>
</li>
<li><p>很多人在绘制的时候，设置画笔以为就只可以设置个单调的颜色，其实QPen还可以设置brush，这样灵活性就提高不知道多少倍，比如设置QPen的brush以后，可以使用各种渐变，比如<strong>绘制渐变颜色</strong>的进度条和文字等，而不再是单调的一种颜色。</p>
</li>
<li><p>很多控件都带有viewport，比如QTextEdit/QTableWidget/QScrollArea，有时候对这些控件直接处理的时候发现不起作用，需要对其viewport()设置才行，比如设置滚动条区域背景透明，需要使用<code>scrollArea-&gt;viewport()-&gt;setStyleSheet("background-color:transparent;");</code>而不是<code>scrollArea-&gt;setStyleSheet("QScrollArea{background-color:transparent;}");</code></p>
</li>
<li><p>有时候设置了鼠标跟踪<code>setMouseTracking</code>为真，如果该窗体上面还有其他控件，当鼠标移到其他控件上面的时候，父类的鼠标移动事件MouseMove识别不到了，此时需要用到HoverMove事件，需要先设置 <code>setAttribute(Qt::WA_Hover, true);</code></p>
</li>
<li><p>Qt封装的<code>QDateTime</code>日期时间类非常强大，可以字符串和日期时间相互转换，也可以毫秒数和日期时间相互转换，还可以1970经过的秒数和日期时间相互转换等。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">QDateTime dateTime;</span><br><span class="line">QString dateTime_str = dateTime.currentDateTime().toString(<span class="string">"yyyy-MM-dd hh:mm:ss"</span>);</span><br><span class="line"><span class="comment">//从字符串转换为毫秒（需完整的年月日时分秒）</span></span><br><span class="line">datetime.fromString(<span class="string">"2011-09-10 12:07:50:541"</span>, <span class="string">"yyyy-MM-dd hh:mm:ss:zzz"</span>).toMSecsSinceEpoch();</span><br><span class="line"><span class="comment">//从字符串转换为秒（需完整的年月日时分秒）</span></span><br><span class="line">datetime.fromString(<span class="string">"2011-09-10 12:07:50:541"</span>, <span class="string">"yyyy-MM-dd hh:mm:ss:zzz"</span>).toTime_t();</span><br><span class="line"><span class="comment">//从毫秒转换到年月日时分秒</span></span><br><span class="line">datetime.fromMSecsSinceEpoch(<span class="number">1315193829218</span>).toString(<span class="string">"yyyy-MM-dd hh:mm:ss:zzz"</span>);</span><br><span class="line"><span class="comment">//从秒转换到年月日时分秒（若有zzz，则为000）</span></span><br><span class="line">datetime.fromTime_t(<span class="number">1315193829</span>).toString(<span class="string">"yyyy-MM-dd hh:mm:ss[:zzz]"</span>);</span><br></pre></td></tr></tbody></table></figure>

<ol start="71">
<li><p>在我们使用QList、QStringList、QByteArray等链表或者数组的过程中，如果只需要取值，而不是赋值，强烈<strong>建议使用 <code>at()</code> 取值而不是 <code>[]</code> 操作符</strong>，在官方书籍《C++ GUI Qt 4编程（第二版）》的书中有特别的强调说明，此教材的原作者据说是Qt开发的核心人员编写的，所以还是比较权威，至于使用 at() 与使用 [] 操作符速度效率的比较，网上也有网友做过此类对比。原文在书的212页，这样描述的：Qt对所有的容器和许多其他类都使用隐含共享，隐含共享是Qt对不希望修改的数据决不进行复制的保证，为了使隐含共享的作用发挥得最好，可以采用两个新的编程习惯。第一种习惯是对于一个（非常量的）向量或者列表进行只读存取时，使用 at() 函数而不用 [] 操作符，因为Qt的容器类不能辨别 [] 操作符是否将出现在一个赋值的左边还是右边，他假设最坏的情况出现并且强制执行深层赋值，而 at() 函数则不被允许出现在一个赋值的左边。</p>
</li>
<li><p>如果是dialog窗体，需要在exec以后还能让其他代码继续执行，请在dialog窗体exec前增加一行代码，否则会阻塞窗体消息。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">QDialog dialog;</span><br><span class="line">dialog.setWindowModality(Qt::WindowModal);</span><br><span class="line">dialog.exec();</span><br></pre></td></tr></tbody></table></figure>

<ol start="73">
<li><p>安全的删除Qt的对象类，<strong>强烈建议使用<code>deleteLater</code>而不是<code>delete</code></strong>，因为deleteLater会选择在合适的时机进行释放，而delete会立即释放，很可能会出错崩溃。如果要<strong>批量删除对象集合</strong>，可以用<code>qDeleteAll</code>，比如 <code>qDeleteAll(btns);</code></p>
</li>
<li><p>在QTableView控件中，如果需要自定义的列按钮、复选框、下拉框等其他模式显示，可以采用自定义委托QItemDelegate来实现，如果需要禁用某列，则在自定义委托的重载createEditor函数返回0即可。自定义委托对应的控件在进入编辑状态的时候出现，如果想一直出现，则需要重载paint函数用drawPrimitive或者drawControl来绘制。</p>
</li>
<li><p>将 <code>QApplication::style()</code> 对应的drawPrimitive、drawControl、drawItemText、drawItemPixmap等几个方法用熟悉了，再结合QStyleOption属性，可以玩转各种自定义委托，还可以直接使用paint函数中的painter进行各种绘制，各种牛逼的表格、树状列表、下拉框等，绝对屌炸天。<code>QApplication::style()-&gt;drawControl</code> 的第4个参数如果不设置，则绘制出来的控件不会应用样式表。</p>
</li>
<li><p>心中有坐标，万物皆painter，强烈建议在学习自定义控件绘制的时候，将qpainter.h头文件中的函数全部看一遍、试一遍、理解一遍，这里边包含了所有Qt内置的绘制的接口，对应的参数都试一遍，你会发现很多新大陆，会大大激发你的绘制的兴趣，犹如神笔马良一般，策马崩腾遨游代码绘制的世界。</p>
</li>
<li><p>在使用<code>setItemWidget</code>或者<code>setCellWidget</code>的过程中，有时候会发现设置的控件没有居中显示而是默认的左对齐，而且不会自动拉伸填充，对于追求完美的程序员来说，这个可不大好看，有个终极通用办法就是，将这个控件放到一个widget的布局中，然后将widget添加到item中，这样就完美解决了，而且这样可以组合多个控件产生复杂的控件。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//实例化进度条控件</span></span><br><span class="line">QProgressBar *progress = <span class="keyword">new</span> QProgressBar;</span><br><span class="line"><span class="comment">//增加widget+布局巧妙实现居中</span></span><br><span class="line">QWidget *widget = <span class="keyword">new</span> QWidget;</span><br><span class="line">QHBoxLayout *layout = <span class="keyword">new</span> QHBoxLayout;</span><br><span class="line">layout-&gt;setSpacing(<span class="number">0</span>);</span><br><span class="line">layout-&gt;setMargin(<span class="number">0</span>);</span><br><span class="line">layout-&gt;addWidget(progress);</span><br><span class="line">widget-&gt;setLayout(layout);</span><br><span class="line">ui-&gt;tableWidget-&gt;setCellWidget(<span class="number">0</span>, <span class="number">0</span>, widget);</span><br></pre></td></tr></tbody></table></figure>

<ol start="78">
<li>很多时候需要在已知背景色的情况下，能够清晰的绘制文字，这个时候需要计算对应的文字颜色。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据背景色自动计算合适的前景色</span></span><br><span class="line"><span class="keyword">double</span> gray = (<span class="number">0.299</span> * color.red() + <span class="number">0.587</span> * color.green() + <span class="number">0.114</span> * color.blue()) / <span class="number">255</span>;</span><br><span class="line">QColor textColor = gray &gt; <span class="number">0.5</span> ? Qt::black : Qt::white;</span><br></pre></td></tr></tbody></table></figure>

<ol start="79">
<li>对QTableView或者QTableWidget禁用列拖动。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (QT_VERSION &lt;= QT_VERSION_CHECK(5,0,0))</span></span><br><span class="line">    ui-&gt;tableView-&gt;horizontalHeader()-&gt;setResizeMode(<span class="number">0</span>, QHeaderView::Fixed);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line">    ui-&gt;tableView-&gt;horizontalHeader()-&gt;setSectionResizeMode(<span class="number">0</span>, QHeaderView::Fixed);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></tbody></table></figure>

<ol start="80">
<li><p>从Qt4转到Qt5，有些类的方法已经废弃或者过时了，如果想要<strong>在Qt5中启用Qt4的方法</strong>，比如QHeadVew的setMovable，可以在你的pro或者pri文件中加上一行即可：<code>DEFINES += QT_DISABLE_DEPRECATED_BEFORE=0</code></p>
</li>
<li><p>Qt中的QColor对颜色封装的很完美，支持各种转换，比如rgb、hsb、cmy、hsl，对应的是toRgb、toHsv、toCmyk、toHsl，还支持透明度设置，颜色值还能转成16进制格式显示。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">QColor <span class="title">color</span><span class="params">(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>)</span></span>;</span><br><span class="line">qDebug() &lt;&lt; color.name() &lt;&lt; color.name(QColor::HexArgb);</span><br><span class="line"><span class="comment">//输出 #ff0000 #64ff0000</span></span><br></pre></td></tr></tbody></table></figure>

<ol start="82">
<li>QVariant类型异常的强大，可以说是万能的类型，在进行配置文件的存储的时候，经常会用到QVariant的转换，QVariant默认自带了toString、toFloat等各种转换，但是还是不够，比如有时候需要从QVariant转到QColor，而却没有提供toColor的函数，这个时候就要用到万能办法。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (variant.typeName() == <span class="string">"QColor"</span>) {</span><br><span class="line">    QColor color = variant.value&lt;QColor&gt;();</span><br><span class="line">    QFont font = variant.value&lt;QFont&gt;();</span><br><span class="line">    QString nodeValue = color.name(QColor::HexArgb);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="83">
<li><p>Qt中的<strong>QString和const char *之间转换</strong>，最好用<code>toStdString().c_str()</code>而不是<code>toLocal8Bit().constData()</code>，比如在setProperty中如果用后者，字符串中文就会不正确，英文正常。</p>
</li>
<li><p>Qt的信号槽机制非常牛逼，也是Qt的独特的核心功能之一，有时候我们在很多窗体中传递信号来实现更新或者处理，如果窗体层级比较多，比如窗体A的父类是窗体B，窗体B的父类是窗体C，窗体C有个子窗体D，如果窗体A一个信号要传递给窗体D，问题来了，必须先经过窗体B中转到窗体C再到窗体D才行，这样的话各种信号关联信号的connect会非常多而且管理起来比较乱，可以考虑增加一个全局的单例类AppEvent，公共的信号放这里，然后窗体A对应信号绑定到AppEvent，窗体D绑定AppEvent的信号到对应的槽函数即可，干净清爽整洁。</p>
</li>
<li><p>QTextEdit右键菜单默认英文的，如果想要中文显示，加载widgets.qm文件即可，一个Qt程序中可以安装多个翻译文件，不冲突。</p>
</li>
<li><p>Qt中有个全局的焦点切换信号<code>focusChanged</code>，可以用它做自定义的输入法。Qt4中默认会安装输入法上下文，比如在main函数打印<code>a.inputContext</code>会显示值，这个默认安装的输入法上下文，会拦截两个牛逼的信号<code>QEvent::RequestSoftwareInputPanel</code>和<code>QEvent::CloseSoftwareInputPanel</code>，以至于就算你安装了全局的事件过滤器依然识别不到这两个信号，你只需要在main函数执行<code>a.setInputContext(0)</code>即可，意思是安装输入法上下文为空。</p>
</li>
<li><p>在Qt5.10以后，表格控件QTableWidget或者QTableView的默认最小列宽改成了15，以前的版本是0，所以在新版的qt中，如果设置表格的列宽过小，不会应用，取的是最小的列宽。所以如果要设置更小的列宽需要重新设置<code>ui-&gt;tableView-&gt;horizontalHeader()-&gt;setMinimumSectionSize(0);</code></p>
</li>
<li><p>Qt源码中内置了一些<strong>未公开的不能直接使用的黑科技</strong>，都藏在对应模块的private中，比如<code>gui-private</code> <code>widgets-private</code>等，比如zip文件解压类<code>QZipReader</code>、压缩类<code>QZipWriter</code>就在<code>gui-private模块</code>中，需要在pro中引入<code>QT += gui-private</code>才能使用。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"QtGui/private/qzipreader_p.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"QtGui/private/qzipwriter_p.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function">QZipReader <span class="title">reader</span><span class="params">(dirPath)</span></span>;</span><br><span class="line"><span class="function">QString <span class="title">path</span><span class="params">(<span class="string">""</span>)</span></span>;</span><br><span class="line"><span class="comment">//解压文件夹到当前目录</span></span><br><span class="line">reader.extractAll(path);</span><br><span class="line"><span class="comment">//文件夹名称</span></span><br><span class="line">QZipReader::FileInfo fileInfo = reader.entryInfoAt(<span class="number">0</span>);</span><br><span class="line"><span class="comment">//解压文件</span></span><br><span class="line"><span class="function">QFile <span class="title">file</span><span class="params">(filePath)</span></span>;</span><br><span class="line">file.open(QIODevice::WriteOnly);</span><br><span class="line">file.write(reader.fileData(QString::fromLocal8Bit(<span class="string">"%1"</span>).arg(filePath)));</span><br><span class="line">file.close();</span><br><span class="line">reader.close();</span><br><span class="line"></span><br><span class="line">QZipWriter *writer = <span class="keyword">new</span> QZipWriter(dirPath);</span><br><span class="line"><span class="comment">//添加文件夹</span></span><br><span class="line">writer-&gt;addDirectory(unCompress);</span><br><span class="line"><span class="comment">//添加文件</span></span><br><span class="line"><span class="function">QFile <span class="title">file</span><span class="params">(filePath)</span></span>;</span><br><span class="line">file.open(QIODevice::ReadOnly);</span><br><span class="line">writer-&gt;addFile(data, file.readAll());</span><br><span class="line">file.close();</span><br><span class="line">writer-&gt;close();</span><br></pre></td></tr></tbody></table></figure>

<ol start="89">
<li><p>理论上串口和网络收发数据都是默认异步的，操作系统自动调度，完全不会卡住界面，网上那些说收发数据卡住界面主线程的都是扯几把蛋，真正的耗时是在运算以及运算后的处理，而不是收发数据，在一些小数据量运算处理的项目中，一般不建议动用线程去处理，线程需要调度开销的，不要什么东西都往线程里边扔，线程不是万能的。只有当真正需要将一些很耗时的操作比如编码解码等，才需要移到线程处理。</p>
</li>
<li><p>在构造函数中获取控件的宽高很可能是不正确的，需要在控件首次显示以后再获取才是正确的，控件是在首次显示以后才会设置好正确的宽高值，记住是在首次显示以后，而不是构造函数或者程序启动好以后，如果程序启动好以后有些容器控件比如QTabWidget中的没有显示的页面的控件，你去获取宽高很可能也是不正确的，万无一失的办法就是首次显示以后去获取。</p>
</li>
<li><p>数据库处理一般建议在主线程，如果非要在其他线程，务必记得打开数据库也要在那个线程，即在那个线程使用数据库就在那个线程打开，不能打开数据库在主线程，执行sql在子线程，很可能出问题。</p>
</li>
<li><p>新版的QTcpServer类在64位版本的Qt下很可能不会进入incomingConnection函数，那是因为Qt5对应的incomingConnection函数参数变了，由之前的int改成了qintptr，改成qintptr有个好处，在32位上自动是quint32而在64位上自动是quint64，如果在Qt5中继续写的参数是int则在32位上没有问题在64位上才有问题，所以为了兼容Qt4和Qt5，必须按照不一样的参数写。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (QT_VERSION &gt; QT_VERSION_CHECK(5,0,0))</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">incomingConnection</span><span class="params">(qintptr handle)</span></span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">incomingConnection</span><span class="params">(<span class="keyword">int</span> handle)</span></span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></tbody></table></figure>

<ol start="93">
<li><p>Qt支持所有的界面控件比如QPushButton、QLineEdit自动关联 <code>on_控件名_信号(参数)</code> 信号槽，比如按钮的单击信号 <code>on_pushButton_clicked()</code>，然后直接实现槽函数即可。</p>
</li>
<li><p>QWebEngineView控件由于使用了opengl，在某些电脑上可能由于opengl的驱动过低会导致花屏或者各种奇奇怪怪的问题，比如showfullscreen的情况下鼠标右键失效，需要在main函数启用软件opengl渲染。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (QT_VERSION &gt; QT_VERSION_CHECK(5,4,0))</span></span><br><span class="line">    QCoreApplication::setAttribute(Qt::AA_UseSoftwareOpenGL);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br></pre></td></tr></tbody></table></figure>

<p>另外一个方法解决 全屏+QWebEngineView控件一起会产生右键菜单无法弹出的BUG,需要上移一个像素</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">QRect rect = qApp-&gt;desktop()-&gt;geometry();</span><br><span class="line">rect.setY(<span class="number">-1</span>);</span><br><span class="line">rect.setHeight(rect.height());</span><br><span class="line"><span class="keyword">this</span>-&gt;setGeometry(rect);</span><br></pre></td></tr></tbody></table></figure>

<ol start="95">
<li>QStyle内置了很多方法用处很大，比如精确获取滑动条鼠标按下处的值。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QStyle::sliderValueFromPosition(minimum(), maximum(), event-&gt;x(), width());</span><br></pre></td></tr></tbody></table></figure>

<ol start="96">
<li>用QFile读写文件的时候，推荐<strong>用<code>QTextStream</code>文件流的方式来读写文件</strong>，速度快很多，基本上会有30%的提升，文件越大性能区别越大。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//从文件加载英文属性与中文属性对照表</span></span><br><span class="line"><span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">":/propertyname.txt"</span>)</span></span>;</span><br><span class="line"><span class="keyword">if</span> (file.open(QFile::ReadOnly)) {</span><br><span class="line">    <span class="comment">//QTextStream方法读取速度至少快30%</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line">    <span class="keyword">while</span>(!file.atEnd()) {</span><br><span class="line">        QString line = file.readLine();</span><br><span class="line">        appendName(line);</span><br><span class="line">    }</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line">    <span class="function">QTextStream <span class="title">in</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">    <span class="keyword">while</span> (!in.atEnd()) {</span><br><span class="line">        QString line = in.readLine();</span><br><span class="line">        appendName(line);</span><br><span class="line">    }</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    file.close();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="97">
<li>用<code>QFile.readAll()</code>读取QSS文件默认是ANSI格式，不支持UTF8，如果在QtCreator中打开qss文件来编辑保存，这样很可能导致qss加载以后没有效果。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> frmMain::initStyle()</span><br><span class="line">{</span><br><span class="line">    <span class="comment">//加载样式表</span></span><br><span class="line">    QString qss;</span><br><span class="line">    <span class="comment">//QFile file(":/qss/psblack.css");</span></span><br><span class="line">    <span class="comment">//QFile file(":/qss/flatwhite.css");</span></span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">":/qss/lightblue.css"</span>)</span></span>;</span><br><span class="line">    <span class="keyword">if</span> (file.open(QFile::ReadOnly)) {</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 1</span></span><br><span class="line">        <span class="comment">//用QTextStream读取样式文件不用区分文件编码 带bom也行</span></span><br><span class="line">        QStringList <span class="built_in">list</span>;</span><br><span class="line">        <span class="function">QTextStream <span class="title">in</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">        <span class="comment">//in.setCodec("utf-8");</span></span><br><span class="line">        <span class="keyword">while</span> (!in.atEnd()) {</span><br><span class="line">            QString line;</span><br><span class="line">            in &gt;&gt; line;</span><br><span class="line">            <span class="built_in">list</span> &lt;&lt; line;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        qss = <span class="built_in">list</span>.join("\n");</span><br><span class="line">#<span class="keyword">else</span></span><br><span class="line">        //用readAll读取默认支持的是ANSI格式,如果不小心用creator打开编辑过了很可能打不开</span><br><span class="line">        qss = QLatin1String(file.readAll());</span><br><span class="line">#endif</span><br><span class="line">        QString paletteColor = qss.mid(20, 7);</span><br><span class="line">        qApp-&gt;setPalette(QPalette(QColor(paletteColor)));</span><br><span class="line">        qApp-&gt;setStyleSheet(qss);</span><br><span class="line">        file.close();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="98">
<li>QString内置了很多转换函数，比如可以调用toDouble转为double数据，但是当你转完并打印的时候你会发现精确少了，只剩下三位了，其实原始数据还是完整的精确度的，只是打印的时候优化成了三位，如果要保证完整的精确度，可以调用 <code>qSetRealNumberPrecision</code> 函数设置精确度位数即可。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">QString s1, s2;</span><br><span class="line">s1 = <span class="string">"666.5567124"</span>;</span><br><span class="line">s2.setNum(<span class="number">888.5632123</span>, <span class="string">'f'</span>, <span class="number">7</span>);</span><br><span class="line">qDebug() &lt;&lt; qSetRealNumberPrecision(<span class="number">10</span>) &lt;&lt; s1.toDouble() &lt;&lt; s2.toDouble();</span><br></pre></td></tr></tbody></table></figure>

<ol start="99">
<li>用<code>QScriptValueIterator</code>解析数据的时候，会发现总是会多一个节点内容，并且内容为空，如果需要跳过则增加一行代码。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (it.hasNext()) {</span><br><span class="line">    it.next();    </span><br><span class="line">    <span class="keyword">if</span> (it.flags() &amp; QScriptValue::SkipInEnumeration)      </span><br><span class="line">       <span class="keyword">continue</span>;     </span><br><span class="line">    qDebug() &lt;&lt; it.name();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="100">
<li><p><code>setPixmap</code>是最糟糕的贴图方式，一般只用来简单的不是很频繁的贴图，<strong>频繁的建议painter绘制</strong>，默认双缓冲，在高级点用opengl绘制，利用GPU。</p>
</li>
<li><p>如果需要在尺寸改变的时候不重绘窗体，则设置属性即可 <code>this-&gt;setAttribute(Qt::WA_StaticContents, true);</code> 这样可以避免可以避免对已经显示区域的重新绘制。</p>
</li>
<li><p>默认程序中获取焦点以后会有虚边框，如果看着觉得碍眼不舒服可以去掉，设置样式即可：<code>setStyleSheet("*{outline:0px;}");</code></p>
</li>
<li><p>Qt表格控件一些常用的设置封装，QTableWidget继承自QTableView，所以下面这个函数支持传入QTableWidget。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> QUIHelper::initTableView(QTableView *tableView, <span class="keyword">int</span> rowHeight, <span class="keyword">bool</span> headVisible, <span class="keyword">bool</span> edit)</span><br><span class="line">{</span><br><span class="line">    <span class="comment">//奇数偶数行颜色交替</span></span><br><span class="line">    tableView-&gt;setAlternatingRowColors(<span class="literal">false</span>);</span><br><span class="line">    <span class="comment">//垂直表头是否可见</span></span><br><span class="line">    tableView-&gt;verticalHeader()-&gt;setVisible(headVisible);</span><br><span class="line">    <span class="comment">//选中一行表头是否加粗</span></span><br><span class="line">    tableView-&gt;horizontalHeader()-&gt;setHighlightSections(<span class="literal">false</span>);</span><br><span class="line">    <span class="comment">//最后一行拉伸填充</span></span><br><span class="line">    tableView-&gt;horizontalHeader()-&gt;setStretchLastSection(<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">//行标题最小宽度尺寸</span></span><br><span class="line">    tableView-&gt;horizontalHeader()-&gt;setMinimumSectionSize(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">//行标题最大高度</span></span><br><span class="line">    tableView-&gt;horizontalHeader()-&gt;setMaximumHeight(rowHeight);</span><br><span class="line">    <span class="comment">//默认行高</span></span><br><span class="line">    tableView-&gt;verticalHeader()-&gt;setDefaultSectionSize(rowHeight);</span><br><span class="line">    <span class="comment">//选中时一行整体选中</span></span><br><span class="line">    tableView-&gt;setSelectionBehavior(QAbstractItemView::SelectRows);</span><br><span class="line">    <span class="comment">//只允许选择单个</span></span><br><span class="line">    tableView-&gt;setSelectionMode(QAbstractItemView::SingleSelection);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//表头不可单击</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (QT_VERSION &gt; QT_VERSION_CHECK(5,0,0))</span></span><br><span class="line">    tableView-&gt;horizontalHeader()-&gt;setSectionsClickable(<span class="literal">false</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line">    tableView-&gt;horizontalHeader()-&gt;setClickable(<span class="literal">false</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//鼠标按下即进入编辑模式</span></span><br><span class="line">    <span class="keyword">if</span> (edit) {</span><br><span class="line">        tableView-&gt;setEditTriggers(QAbstractItemView::CurrentChanged | QAbstractItemView::DoubleClicked);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        tableView-&gt;setEditTriggers(QAbstractItemView::NoEditTriggers);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="104">
<li>在一些大的项目中，可能嵌套了很多子项目，有时候会遇到子项目依赖其他子项目的时候，比如一部分子项目用来生成动态库，一部分子项目依赖这个动态库进行编译，此时就需要子项目按照顺序编译。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">TEMPLATE = subdirs</span><br><span class="line">#设置ordered参数以后会依次编译 demo designer examples</span><br><span class="line">CONFIG  += ordered</span><br><span class="line">SUBDIRS += demo</span><br><span class="line">SUBDIRS += designer</span><br><span class="line">SUBDIRS += examples</span><br></pre></td></tr></tbody></table></figure>

<ol start="105">
<li>MSVC编译器的选择说明</li>
</ol>
<ul>
<li>如果是32位的Qt则编译器选择x86开头的</li>
<li>如果是64位的Qt则编译器选择amd64开头的</li>
<li>具体是看安装的Qt构建套件版本以及目标运行平台的系统位数和架构</li>
<li>一般现在的电脑默认以64位的居多，选择amd64即可</li>
<li>如果用户需要兼容32位的系统则建议选择32位的Qt，这样即可在32位也可以在64位系统运行</li>
<li>诸葛大佬补充：x86/x64都是编译环境和运行环境相同，没有或。带下划线的就是交叉编译，前面是编译环境，后面是运行环境。</li>
</ul>
<table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>x86</td>
<td>32/64位系统上编译在32/64位系统上运行</td>
</tr>
<tr>
<td>x86_amd64</td>
<td>32/64位系统上编译在64位系统上运行</td>
</tr>
<tr>
<td>x86_arm</td>
<td>32/64位系统上编译在arm系统上运行</td>
</tr>
<tr>
<td>amd64</td>
<td>64位系统上编译在64位系统上运行</td>
</tr>
<tr>
<td>amd64_x86</td>
<td>64位系统上编译在32/64位系统上运行</td>
</tr>
<tr>
<td>amd64_arm</td>
<td>64位系统上编译在arm系统上运行</td>
</tr>
</tbody></table>
<ol start="106">
<li>很多时候用QDialog的时候会发现阻塞了消息，而有的时候我们希望是后台的一些消息继续运行不要终止，此时需要做个设置。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QDialog dialog;</span><br><span class="line">dialog.setWindowModality(Qt::WindowModal);</span><br></pre></td></tr></tbody></table></figure>

<ol start="107">
<li>很多初学者甚至几年工作经验的人，对多线程有很深的误解和滥用，尤其是在串口和网络通信这块，什么都往多线程里面丢，一旦遇到界面卡，就把数据收发啥的都搞到多线程里面去，殊不知绝大部分时候那根本没啥用，因为没找到出问题的根源。</li>
</ol>
<ul>
<li>如果你没有使用wait***函数的话，大部分的界面卡都出在数据处理和展示中，比如传过来的是一张图片的数据，你需要将这些数据转成图片，这个肯定是耗时的；</li>
<li>还有就是就收到的数据曲线绘制出来，如果过于频繁或者间隔过短，肯定会给UI造成很大的压力的，最好的办法是解决如何不要频繁绘制UI比如合并数据一起绘制等；</li>
<li>如果是因为绘制UI造成的卡，那多线程也是没啥用的，因为UI只能在主线程；</li>
<li>串口和网络的数据收发默认都是异步的，由操作系统调度的，如果数据处理复杂而且数据量大，你要做的是将数据处理放到多线程中；</li>
<li>如果没有严格的数据同步需求，根本不需要调用wait***之类的函数来立即发送和接收数据，实际需求中大部分的应用场景其实异步收发数据就足够了；</li>
<li>有严格数据同步需求的场景还是放到多线程会好一些，不然你wait***就卡在那边了；</li>
<li>多线程是需要占用系统资源的，理论上来说，如果线程数量超过了CPU的核心数量，其实多线程调度可能花费的时间更多，各位在使用过程中要权衡利弊；</li>
</ul>
<ol start="108">
<li>在嵌入式linux上，如果设置了无边框窗体，而该窗体中又有文本框之类的，发现没法产生焦点进行输入，此时需要主动激活窗体才行。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这种方式设置的无边框窗体在嵌入式设备上无法产生焦点</span></span><br><span class="line">setWindowFlags(Qt::WindowStaysOnTopHint | Qt::FramelessWindowHint | Qt::X11BypassWindowManagerHint);</span><br><span class="line"></span><br><span class="line"><span class="comment">//需要在show以后主动激活窗体</span></span><br><span class="line">w-&gt;show();</span><br><span class="line">w-&gt;activateWindow();</span><br></pre></td></tr></tbody></table></figure>

<h3 id="二、其他经验"><a href="#二、其他经验" class="headerlink" title="二、其他经验"></a>二、其他经验</h3><ol>
<li><p>Qt界的中文乱码问题，版本众多导致的如何选择安装包问题，如何打包发布程序的问题，堪称Qt界的三座大山！</p>
</li>
<li><p>在Qt的学习过程中，学会查看对应类的头文件是一个好习惯，如果在该类的头文件没有找到对应的函数，可以去他的父类中找找，实在不行还有爷爷类，肯定能找到的。通过头文件你会发现很多函数接口其实Qt已经帮我们封装好了，有空还可以阅读下他的实现代码。</p>
</li>
<li><p>Qt安装目录下的Examples目录下的例子，看完学完，月薪20K起步；Qt常用类的头文件的函数看完学完使用一遍并加以融会贯通，月薪30K起步。</p>
</li>
<li><p>Qt在开发阶段<strong>不支持中文目录</strong>，切记，这是无数人可能犯的错误，在安装Qt集成开发环境以及编译器的时候，务必记得目录必须英文，否则很可能不正常，建议尽量用默认的安装位置。</p>
</li>
<li><p>如果<strong>出现崩溃和段错误，80%都是因为要么越界，要么未初始化</strong>，死扣这两点，80%的问题解决了。</p>
</li>
<li><p>Qt一共有几百个版本，关于如何选择Qt版本的问题，我一般保留四个版本，为了兼容Qt4用4.8.7，最后的支持XP的版本5.7.0，最新的长期支持版本比如5.12，最高的新版本比如5.14.2。强烈不建议使用5.0到5.3之间的版本，太多BUG和坑，稳定性和兼容性相比于之后的版本相当差，能换就换，不能换睡服领导也要换。</p>
</li>
<li><p>终极秘籍：如果遇到问题搜索Qt方面找不到答案，试着将关键字用JAVA C# android打头，你会发现别有一番天地，其他人很可能做过！</p>
</li>
<li><p>最后一条：<strong>珍爱生命，远离编程</strong>。祝大家头发浓密，睡眠良好，情绪稳定，财富自由！</p>
</li>
</ol>
<h3 id="三、推荐的Qt论坛-个人博客-网站-群"><a href="#三、推荐的Qt论坛-个人博客-网站-群" class="headerlink" title="三、推荐的Qt论坛+个人博客+网站+群"></a>三、推荐的Qt论坛+个人博客+网站+群</h3><table>
<thead>
<tr>
<th>名称</th>
<th>网址</th>
</tr>
</thead>
<tbody><tr>
<td>QQ学习群</td>
<td>Qt交流大会群 853086607 Qt技术交流群 46679801 Qt进阶之路群 734623697</td>
</tr>
<tr>
<td>QtWidget开源demo集合</td>
<td><a href="https://gitee.com/feiyangqingyun/QWidgetDemo" target="_blank" rel="noopener">https://gitee.com/feiyangqingyun/QWidgetDemo</a></td>
</tr>
<tr>
<td>QtQuick/Qml开源demo集合</td>
<td><a href="https://gitee.com/jaredtao/TaoQuick" target="_blank" rel="noopener">https://gitee.com/jaredtao/TaoQuick</a></td>
</tr>
<tr>
<td>qtcn</td>
<td><a href="http://www.qtcn.org" target="_blank" rel="noopener">http://www.qtcn.org</a></td>
</tr>
<tr>
<td>豆子的空间</td>
<td><a href="https://www.devbean.net" target="_blank" rel="noopener">https://www.devbean.net</a></td>
</tr>
<tr>
<td>yafeilinux</td>
<td><a href="http://www.qter.org" target="_blank" rel="noopener">http://www.qter.org</a></td>
</tr>
<tr>
<td>一去二三里</td>
<td><a href="http://blog.csdn.net/liang19890820" target="_blank" rel="noopener">http://blog.csdn.net/liang19890820</a></td>
</tr>
<tr>
<td>乌托邦2号</td>
<td><a href="http://blog.csdn.net/taiyang1987912" target="_blank" rel="noopener">http://blog.csdn.net/taiyang1987912</a></td>
</tr>
<tr>
<td>foruok</td>
<td><a href="http://blog.csdn.net/foruok" target="_blank" rel="noopener">http://blog.csdn.net/foruok</a></td>
</tr>
<tr>
<td>jason</td>
<td><a href="http://blog.csdn.net/wsj18808050" target="_blank" rel="noopener">http://blog.csdn.net/wsj18808050</a></td>
</tr>
<tr>
<td>朝十晚八</td>
<td><a href="http://www.cnblogs.com/swarmbees" target="_blank" rel="noopener">http://www.cnblogs.com/swarmbees</a></td>
</tr>
<tr>
<td>BIG_C_GOD</td>
<td><a href="http://blog.csdn.net/big_c_god" target="_blank" rel="noopener">http://blog.csdn.net/big_c_god</a></td>
</tr>
<tr>
<td>公孙二狗</td>
<td><a href="https://qtdebug.com/qtbook" target="_blank" rel="noopener">https://qtdebug.com/qtbook</a></td>
</tr>
<tr>
<td>雨田哥</td>
<td><a href="https://blog.csdn.net/ly305750665" target="_blank" rel="noopener">https://blog.csdn.net/ly305750665</a></td>
</tr>
<tr>
<td>郑天佐</td>
<td><a href="https://blog.csdn.net/zhengtianzuo06" target="_blank" rel="noopener">https://blog.csdn.net/zhengtianzuo06</a></td>
</tr>
<tr>
<td>寒山-居士</td>
<td><a href="https://blog.csdn.net/esonpo" target="_blank" rel="noopener">https://blog.csdn.net/esonpo</a></td>
</tr>
<tr>
<td>feiyangqingyun</td>
<td><a href="https://blog.csdn.net/feiyangqingyun" target="_blank" rel="noopener">https://blog.csdn.net/feiyangqingyun</a></td>
</tr>
<tr>
<td>前行中小猪</td>
<td><a href="http://blog.csdn.net/goforwardtostep" target="_blank" rel="noopener">http://blog.csdn.net/goforwardtostep</a></td>
</tr>
<tr>
<td>涛哥的知乎专栏</td>
<td><a href="https://zhuanlan.zhihu.com/TaoQt" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/TaoQt</a></td>
</tr>
<tr>
<td>Qt君</td>
<td><a href="https://blog.csdn.net/nicai_xiaoqinxi" target="_blank" rel="noopener">https://blog.csdn.net/nicai_xiaoqinxi</a></td>
</tr>
<tr>
<td>Qt老外视频教程</td>
<td><a href="http://space.bilibili.com/2592237/#!/index" target="_blank" rel="noopener">http://space.bilibili.com/2592237/#!/index</a></td>
</tr>
<tr>
<td>Qt维基补充文档</td>
<td><a href="https://wiki.qt.io/Main" target="_blank" rel="noopener">https://wiki.qt.io/Main</a></td>
</tr>
<tr>
<td>Qt源码查看网站</td>
<td><a href="https://code.woboq.org/qt5" target="_blank" rel="noopener">https://code.woboq.org/qt5</a></td>
</tr>
<tr>
<td>Qt官方下载地址</td>
<td><a href="https://download.qt.io" target="_blank" rel="noopener">https://download.qt.io</a></td>
</tr>
<tr>
<td>Qt官方下载新地址</td>
<td><a href="https://download.qt.io/new_archive/qt/" target="_blank" rel="noopener">https://download.qt.io/new_archive/qt/</a></td>
</tr>
<tr>
<td>Qt国内镜像下载地址</td>
<td><a href="https://mirrors.cloud.tencent.com/qt" target="_blank" rel="noopener">https://mirrors.cloud.tencent.com/qt</a></td>
</tr>
<tr>
<td>精美图表控件QWT</td>
<td><a href="http://qwt.sourceforge.net/" target="_blank" rel="noopener">http://qwt.sourceforge.net/</a></td>
</tr>
<tr>
<td>精美图表控件QCustomPlot</td>
<td><a href="https://www.qcustomplot.com/" target="_blank" rel="noopener">https://www.qcustomplot.com/</a></td>
</tr>
<tr>
<td>免费图标下载</td>
<td><a href="http://www.easyicon.net/" target="_blank" rel="noopener">http://www.easyicon.net/</a></td>
</tr>
<tr>
<td>图形字体下载</td>
<td><a href="https://www.iconfont.cn/" target="_blank" rel="noopener">https://www.iconfont.cn/</a></td>
</tr>
<tr>
<td>漂亮界面网站</td>
<td><a href="https://www.ui.cn/" target="_blank" rel="noopener">https://www.ui.cn/</a></td>
</tr>
</tbody></table>
<h3 id="三、其他"><a href="#三、其他" class="headerlink" title="三、其他"></a>三、其他</h3><ol>
<li>C++入门书籍推荐《C++ primer plus》，进阶书籍推荐《C++ primer》。</li>
<li>Qt入门书籍推荐霍亚飞的《Qt Creator快速入门》，Qt进阶书籍推荐官方的《C++ GUI Qt4编程》，qml书籍推荐《Qt5编程入门》。</li>
<li>强烈推荐程序员自我修养和规划系列书《大话程序员》《程序员的成长课》《解忧程序员》，受益匪浅，受益终生！</li>
</ol>
<blockquote>
<p>全部转载自： <a href="https://gitee.com/feiyangqingyun/qtkaifajingyan" target="_blank" rel="noopener">https://gitee.com/feiyangqingyun/qtkaifajingyan</a> </p>
</blockquote>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
    
        <div class="post-more-div">
            <a href="/2020/07/16/Qt开发经验-飞扬青云/" class="post-more waves-button">
                阅读全文 »
            </a>
        </div>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Qt/">Qt</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/整理/">整理</a></li></ul>

    </div>
    
</article>

        </li>
    
    </ul>

    
<nav id="page-nav">
    <div class="inner">
    <a class="extend prev" rel="prev" href="/">上一页</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/3/">下一页</a>
    </div>
</nav>


</div>

        <footer class="footer">
    <div class="footer-content">
        <span class="power">
            <i class="icon icon-lg icon-copyright"></i>
            2019
            <i class="icon icon-lg icon-heart"></i>
            <a href="http://blog.iwxyi.com">http://blog.iwxyi.com</a>
            <br/>
            Power by
            <a href="https://hexo.io/" target="_blank" rel="external nofollow">Hexo</a>&nbsp;·&nbsp;
            Theme
            <a class="tomotoeslink" href="https://github.com/tomotoes/hexo-theme-tomotoes/" target="_blank" rel="external nofollow">tomotoes</a>
        </span>

        <br/>

        <span id="RunTime" style="color:#a7a7a2;"></span>
        <br/>

        <span>
            
	<i class="icon icon-lg icon-user">
<span id="busuanzi_container_site_uv" style='display:none'>
       访问用户：<span id="busuanzi_value_site_uv"></span>
    </span>人</i>
    ·
    <i class="icon icon-lg icon-eye">
    <span id="busuanzi_container_site_pv" style='display:none'>
      访问次数：<span id="busuanzi_value_site_pv"></span>
    </span>次
    </i>


        </span>
        <br/>

        <span class="license"><a  target="_blank" rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">博客内容遵循 知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
    </div>
</footer>

    </main>
    
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>


    <!-- waves按钮特效 -->
<script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>

<!-- 主题配置脚本 -->
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };
</script>

<!-- jquery -->
<script src="/js/jquery.min.js?v=3.0"></script>

<!-- 搜索 -->

<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item waves-block waves-effect" onclick="location.href='{path}'">
    <div class="title ellipsis" title="{title}">{title}</div>
</li>
</template>


<!-- main博客脚本 -->
<script src="/js/main.min.js?v=3.0" ></script>

<!-- 动画&配置 -->
<script src="/js/script.min.js?v=3.0" ></script>

<!-- 脚本管理 -->
<script>

if(window.innerWidth > 800){
	/* 3D标题 */
	$(".content-header").on("mousemove", threedee);

	/* 底部追随鼠标 */
	$(".footer").hover(2);

	/* gotop键的涟漪 */
	$("#gotop").hover(1);

	/* 赞赏的粒子雨 */
	$("#reward").hover(3);

	/* 微信公众号的底部渲染 */
	$("#wechat").hover(4);

    /* 标题跳动 */
    $(".archivestitle").bumpyText();

	/* 图片点击放大 */
	const postimg = jQuery(".post-content img:not(.github-emoji)");
	postimg.on("click",function(){

		mask.classList.add("in");
		main.classList.add("Mask");
		menu.classList.add("Mask");
		var myimg = this.cloneNode(true);
		myimg.classList.add("imgShow");

		setTimeout(function(){
			jQuery(myimg).animate({
				opacity:"1"
			},1000);
		},0);

		document.body.appendChild(myimg);

		myimg.onclick=function(){
			document.body.removeChild(myimg);
			mask.classList.remove("in");
			main.classList.remove("Mask");
			menu.classList.remove("Mask");
		};

	});

}

/* 名字跳动 */
$("#name").bumpyText();


/* 网站运行时间 */
setInterval(function () {
	setTime("2019/10/11");
}, 1000);

/* 文章块的淡出 */
postshow();

/* 座右铭 */

   getHitokoto();



/* 粘贴提示 */
G($(".post-content"), location.href, "小乂");


/* 控制台 */
if (window.console && window.console.log) {
	setTimeout(function () {
		console.log("\n %c 一个坏掉的番茄 %c  © Simon Ma  http://tomotoes.com \n\n", "color:#FFFFFB;background:#1abc9c;padding:5px 0;border-radius:.5rem 0 0 .5rem;", "color:#FFFFFB;background:#080808;padding:5px 0;border-radius:0 .5rem .5rem 0;");
	}, 0);
}

</script>




<!-- 公式渲染 -->



<!-- 不蒜子 -->

<script defer src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/z16.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false}});</script></body>
</html>
