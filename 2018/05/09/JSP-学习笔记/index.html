<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    <meta http-equiv="Content-Language" content="zh-cn">
    <meta charset="utf-8">
    
    
    <link rel="canonical" href="http://blog.iwxyi.com/2018/05/09/JSP-学习笔记/">
    
    
    <title>JSP-学习笔记 | 云笺 | 一些技术摘要和写作技巧</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    
    <meta name="theme-color" content="#77AAFF">
    
    
    <meta name="keywords" content="学习笔记,JSP">
    
    

    

    <!-- Baidu Push -->
<script>
	(function(){
		var bp = document.createElement('script');
		var curProtocol = window.location.protocol.split(':')[0];
		if (curProtocol === 'https') {
			bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
		}
		else {
			bp.src = 'http://push.zhanzhang.baidu.com/push.js';
		}
		var s = document.getElementsByTagName("script")[0];
		s.parentNode.insertBefore(bp, s);
	})();

	var _hmt = _hmt || [];
</script>



    
    <meta name="description" content="了解第一个 JSP 程序12345678910&amp;lt;html&amp;gt;    &amp;lt;head&amp;gt;           &amp;lt;title&amp;gt;第一个 JSP 程序&amp;lt;/title&amp;gt;    &amp;lt;/head&amp;gt;    &amp;lt;body&amp;gt;           &amp;lt;%                  out.println(&quot;Hello World！&quot;);">
<meta name="keywords" content="学习笔记,JSP">
<meta property="og:type" content="article">
<meta property="og:title" content="JSP-学习笔记">
<meta property="og:url" content="http://blog.iwxyi.com/2018/05/09/JSP-学习笔记/index.html">
<meta property="og:site_name" content="云笺">
<meta property="og:description" content="了解第一个 JSP 程序12345678910&amp;lt;html&amp;gt;    &amp;lt;head&amp;gt;           &amp;lt;title&amp;gt;第一个 JSP 程序&amp;lt;/title&amp;gt;    &amp;lt;/head&amp;gt;    &amp;lt;body&amp;gt;           &amp;lt;%                  out.println(&quot;Hello World！&quot;);">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/01/7B4B85CF-FE4B-43CB-AAFF-F8594AD4342C.jpg">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/01/7D8C47F0-0DDE-4F1D-8BE1-B2C9C955683E.jpg">
<meta property="og:image" content="https://www.runoob.com/wp-content/uploads/2014/01/jspheadmsg.jpg">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/01/jsp1.gif">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/01/js_http_status_codes.jpg">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/01/jsp5.gif">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/01/xml-1.jpg">
<meta property="og:image" content="https://www.runoob.com/wp-content/uploads/2014/01/jsp-exeception-1.jpg">
<meta property="og:updated_time" content="2019-10-13T07:25:52.901Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JSP-学习笔记">
<meta name="twitter:description" content="了解第一个 JSP 程序12345678910&amp;lt;html&amp;gt;    &amp;lt;head&amp;gt;           &amp;lt;title&amp;gt;第一个 JSP 程序&amp;lt;/title&amp;gt;    &amp;lt;/head&amp;gt;    &amp;lt;body&amp;gt;           &amp;lt;%                  out.println(&quot;Hello World！&quot;);">
<meta name="twitter:image" content="http://www.runoob.com/wp-content/uploads/2014/01/7B4B85CF-FE4B-43CB-AAFF-F8594AD4342C.jpg">
    
        <link rel="alternate" type="application/atom+xml" title="云笺" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link id="style" rel="stylesheet" href="/css/style.css?v=3.0">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    
            
</head>

<body>
    <div id="loading" class="active"></div>
    <aside id="menu"  class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" >
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg" alt="avatar">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname" id="name">命燃芯乂</h5>
          
            <div id="yiyanmotto" class="motto">&nbsp;</div>
          
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
              <li class="waves-block waves-effect">
                  <a href="/"  >
                    <i class="icon icon-lg icon-home"></i>
                    <span>主 页</span><i class="icon icon-lg icon-caret-left"></i>
                  </a>
              </li>
            
              <li class="waves-block waves-effect">
                  <a href="/archives"  >
                    <i class="icon icon-lg icon-archives"></i>
                    <span>归 档</span><i class="icon icon-lg icon-caret-left"></i>
                  </a>
              </li>
            
              <li class="waves-block waves-effect">
                  <a href="/categories"  >
                    <i class="icon icon-lg icon-th-list"></i>
                    <span>分 类</span><i class="icon icon-lg icon-caret-left"></i>
                  </a>
              </li>
            
              <li class="waves-block waves-effect">
                  <a href="/tags"  >
                    <i class="icon icon-lg icon-tags"></i>
                    <span>标 签</span><i class="icon icon-lg icon-caret-left"></i>
                  </a>
              </li>
            
              <li class="waves-block waves-effect">
                  <a href="/about"  >
                    <i class="icon icon-lg icon-smile-o"></i>
                    <span>关 于</span><i class="icon icon-lg icon-caret-left"></i>
                  </a>
              </li>
            
      <div class="nav2">
          
              <a class="nav2item" data-title="Email" href="mailto:wxy@iwxyi.com" target="_parent"title="Email" >
                <i class="icon icon-lg icon-envelope-o envelope-o"></i>
              </a>
          
              <a class="nav2item" data-title="Github" href="https://github.com/mrxy001" target="_blank"title="Github" >
                <i class="icon icon-lg icon-github github"></i>
              </a>
          
              <a class="nav2item" data-title="微博" href="https://weibo.com/u/6065548594" target="_blank"title="微博" >
                <i class="icon icon-lg icon-weibo weibo"></i>
              </a>
          

            </div>
        
      </ul>
        
    </div>
  </div>
 
</aside>


    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">JSP-学习笔记</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        <a href="../../atom.xml" target="_blank" class="header-icon waves-effect waves-circle waves-light" id="Rss">
            <i class="icon icon-lg icon-rss"></i>
        </a>
    </div>
</header>
<header class="content-header post-header">
    
    
    <div class="container fade-scale">
        <div id="myheader">
            <h1 class="title">
                
            </h1>
            <h5 class="subtitle">
                
                
            </h5>
        </div>
    </div>

</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#了解"><span class="post-toc-number">1.</span> <span class="post-toc-text">了解</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第一个-JSP-程序"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">第一个 JSP 程序</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSP-生命周期"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">JSP 生命周期</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JSP编译"><span class="post-toc-number">1.2.1.</span> <span class="post-toc-text">JSP编译</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JSP初始化"><span class="post-toc-number">1.2.2.</span> <span class="post-toc-text">JSP初始化</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JSP执行"><span class="post-toc-number">1.2.3.</span> <span class="post-toc-text">JSP执行</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JSP清理"><span class="post-toc-number">1.2.4.</span> <span class="post-toc-text">JSP清理</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#JSP-语法"><span class="post-toc-number">2.</span> <span class="post-toc-text">JSP 语法</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#输出"><span class="post-toc-number">2.0.1.</span> <span class="post-toc-text">输出</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#中文编码"><span class="post-toc-number">2.0.2.</span> <span class="post-toc-text">中文编码</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#声明变量"><span class="post-toc-number">2.0.3.</span> <span class="post-toc-text">声明变量</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JSP-表达式"><span class="post-toc-number">2.0.4.</span> <span class="post-toc-text">JSP 表达式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JSP-注释"><span class="post-toc-number">2.0.5.</span> <span class="post-toc-text">JSP 注释</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JSP-指令"><span class="post-toc-number">2.0.6.</span> <span class="post-toc-text">JSP 指令</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JSP-行为"><span class="post-toc-number">2.0.7.</span> <span class="post-toc-text">JSP 行为</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JSP-对象"><span class="post-toc-number">2.0.8.</span> <span class="post-toc-text">JSP 对象</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#控制流语句"><span class="post-toc-number">2.0.9.</span> <span class="post-toc-text">控制流语句</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#判断语句"><span class="post-toc-number">2.0.10.</span> <span class="post-toc-text">判断语句</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#if…else…"><span class="post-toc-number">2.0.10.1.</span> <span class="post-toc-text">if…else…</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#switch"><span class="post-toc-number">2.0.10.2.</span> <span class="post-toc-text">switch</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#循环语句"><span class="post-toc-number">2.0.11.</span> <span class="post-toc-text">循环语句</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JSP-运算符"><span class="post-toc-number">2.0.12.</span> <span class="post-toc-text">JSP 运算符</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JSP-字面量"><span class="post-toc-number">2.0.13.</span> <span class="post-toc-text">JSP 字面量</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSP-指令-1"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">JSP 指令</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Page-指令"><span class="post-toc-number">2.1.0.1.</span> <span class="post-toc-text">Page 指令</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Include指令"><span class="post-toc-number">2.1.0.2.</span> <span class="post-toc-text">Include指令</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Taglib指令"><span class="post-toc-number">2.1.0.3.</span> <span class="post-toc-text">Taglib指令</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSP-动作元素"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">JSP 动作元素</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#lt-jsp-include-gt-动作元素"><span class="post-toc-number">2.2.0.1.</span> <span class="post-toc-text">&lt;jsp:include&gt;动作元素</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#实例"><span class="post-toc-number">2.2.0.1.1.</span> <span class="post-toc-text">实例</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#lt-jsp-useBean-gt-动作元素"><span class="post-toc-number">2.2.0.2.</span> <span class="post-toc-text">&lt;jsp:useBean&gt;动作元素</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#lt-jsp-setProperty-gt-动作元素"><span class="post-toc-number">2.2.0.3.</span> <span class="post-toc-text">&lt;jsp:setProperty&gt;动作元素</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#lt-jsp-getProperty-gt-动作元素"><span class="post-toc-number">2.2.0.4.</span> <span class="post-toc-text">&lt;jsp:getProperty&gt;动作元素</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#实例-1"><span class="post-toc-number">2.2.0.4.1.</span> <span class="post-toc-text">实例</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#lt-jsp-forward-gt-动作元素"><span class="post-toc-number">2.2.0.5.</span> <span class="post-toc-text">&lt;jsp:forward&gt; 动作元素</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#lt-jsp-plugin-gt-动作元素"><span class="post-toc-number">2.2.0.6.</span> <span class="post-toc-text">&lt;jsp:plugin&gt;动作元素</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#lt-jsp-element-gt-、-lt-jsp-attribute-gt-、-lt-jsp-body-gt-动作元素"><span class="post-toc-number">2.2.0.7.</span> <span class="post-toc-text">&lt;jsp:element&gt; 、 &lt;jsp:attribute&gt;、 &lt;jsp:body&gt;动作元素</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#实例-2"><span class="post-toc-number">2.2.0.7.1.</span> <span class="post-toc-text">实例</span></a></li></ol></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#lt-jsp-text-gt-动作元素"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">&lt;jsp:text&gt;动作元素</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSP-隐式对象"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">JSP 隐式对象</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#request对象"><span class="post-toc-number">2.4.0.1.</span> <span class="post-toc-text">request对象</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#response对象"><span class="post-toc-number">2.4.0.2.</span> <span class="post-toc-text">response对象</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#out对象"><span class="post-toc-number">2.4.0.3.</span> <span class="post-toc-text">out对象</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#session对象"><span class="post-toc-number">2.4.0.4.</span> <span class="post-toc-text">session对象</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#application对象"><span class="post-toc-number">2.4.0.5.</span> <span class="post-toc-text">application对象</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#config对象"><span class="post-toc-number">2.4.0.6.</span> <span class="post-toc-text">config对象</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#pageContext-对象"><span class="post-toc-number">2.4.0.7.</span> <span class="post-toc-text">pageContext 对象</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#page-对象"><span class="post-toc-number">2.4.0.8.</span> <span class="post-toc-text">page 对象</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#exception-对象"><span class="post-toc-number">2.4.0.9.</span> <span class="post-toc-text">exception 对象</span></a></li></ol></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#JSP-响应"><span class="post-toc-number">3.</span> <span class="post-toc-text">JSP 响应</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSP-客户端请求"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">JSP 客户端请求</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HttpServletRequest类"><span class="post-toc-number">3.1.1.</span> <span class="post-toc-text">HttpServletRequest类</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HTTP信息头示例"><span class="post-toc-number">3.1.2.</span> <span class="post-toc-text">HTTP信息头示例</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSP-服务器响应"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">JSP 服务器响应</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HttpServletResponse类"><span class="post-toc-number">3.2.1.</span> <span class="post-toc-text">HttpServletResponse类</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HTTP响应头程序示例"><span class="post-toc-number">3.2.2.</span> <span class="post-toc-text">HTTP响应头程序示例</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#自动刷新实例"><span class="post-toc-number">3.2.2.1.</span> <span class="post-toc-text">自动刷新实例</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSP-HTTP-状态码"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">JSP HTTP 状态码</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#设置HTTP状态码的方法"><span class="post-toc-number">3.3.1.</span> <span class="post-toc-text">设置HTTP状态码的方法</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HTTP状态码程序示例"><span class="post-toc-number">3.3.2.</span> <span class="post-toc-text">HTTP状态码程序示例</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#JSP-表单"><span class="post-toc-number">4.</span> <span class="post-toc-text">JSP 表单</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSP-表单处理"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">JSP 表单处理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#GET-方法"><span class="post-toc-number">4.1.1.</span> <span class="post-toc-text">GET 方法</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#POST-方法"><span class="post-toc-number">4.1.2.</span> <span class="post-toc-text">POST 方法</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JSP-读取表单数据"><span class="post-toc-number">4.1.3.</span> <span class="post-toc-text">JSP 读取表单数据</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#GET-实例"><span class="post-toc-number">4.1.3.1.</span> <span class="post-toc-text">GET 实例</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#POST-实例"><span class="post-toc-number">4.1.3.2.</span> <span class="post-toc-text">POST 实例</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#传递-CHeckbox-实例"><span class="post-toc-number">4.1.3.3.</span> <span class="post-toc-text">传递 CHeckbox 实例</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#读取所有表单参数"><span class="post-toc-number">4.1.3.4.</span> <span class="post-toc-text">读取所有表单参数</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSP-过滤器"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">JSP 过滤器</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Servlet-过滤器方法"><span class="post-toc-number">4.2.1.</span> <span class="post-toc-text">Servlet 过滤器方法</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#FilterConfig-使用"><span class="post-toc-number">4.2.1.1.</span> <span class="post-toc-text">FilterConfig 使用</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#JSP-过滤器实例"><span class="post-toc-number">4.2.1.2.</span> <span class="post-toc-text">JSP 过滤器实例</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用多个过滤器"><span class="post-toc-number">4.2.2.</span> <span class="post-toc-text">使用多个过滤器</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Cookie-处理"><span class="post-toc-number">4.3.</span> <span class="post-toc-text">Cookie 处理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Cookie-剖析"><span class="post-toc-number">4.3.1.</span> <span class="post-toc-text">Cookie 剖析</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Servlet-Cookie-方法"><span class="post-toc-number">4.3.2.</span> <span class="post-toc-text">Servlet Cookie 方法</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#设置-Cookie"><span class="post-toc-number">4.3.3.</span> <span class="post-toc-text">设置 Cookie</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#读取-Cookie"><span class="post-toc-number">4.3.4.</span> <span class="post-toc-text">读取 Cookie</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#删除-Cookie"><span class="post-toc-number">4.3.5.</span> <span class="post-toc-text">删除 Cookie</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSP-Session"><span class="post-toc-number">4.4.</span> <span class="post-toc-text">JSP Session</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#session对象-1"><span class="post-toc-number">4.4.1.</span> <span class="post-toc-text">session对象</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Session-实例"><span class="post-toc-number">4.4.1.1.</span> <span class="post-toc-text">Session 实例</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#删除-Session-数据"><span class="post-toc-number">4.4.2.</span> <span class="post-toc-text">删除 Session 数据</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSP-文件上传"><span class="post-toc-number">4.5.</span> <span class="post-toc-text">JSP 文件上传</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#编写后台-Servlet"><span class="post-toc-number">4.5.1.</span> <span class="post-toc-text">编写后台 Servlet</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#编译和运行-Servlet"><span class="post-toc-number">4.5.2.</span> <span class="post-toc-text">编译和运行 Servlet</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#JSP-功能"><span class="post-toc-number">5.</span> <span class="post-toc-text">JSP 功能</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSP-日期"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">JSP 日期</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#获取当前日期和时间"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">获取当前日期和时间</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#日期比较"><span class="post-toc-number">5.2.1.</span> <span class="post-toc-text">日期比较</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用SimpleDateFormat格式化日期"><span class="post-toc-number">5.2.2.</span> <span class="post-toc-text">使用SimpleDateFormat格式化日期</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#SimpleDateFormat格式码"><span class="post-toc-number">5.2.3.</span> <span class="post-toc-text">SimpleDateFormat格式码</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSP-页面重定向"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">JSP 页面重定向</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSP-点击量统计"><span class="post-toc-number">5.4.</span> <span class="post-toc-text">JSP 点击量统计</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#复位计数器"><span class="post-toc-number">5.4.1.</span> <span class="post-toc-text">复位计数器</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSP-自动刷新"><span class="post-toc-number">5.5.</span> <span class="post-toc-text">JSP 自动刷新</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSP-发送邮件"><span class="post-toc-number">5.6.</span> <span class="post-toc-text">JSP 发送邮件</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#发送简单的邮件"><span class="post-toc-number">5.6.1.</span> <span class="post-toc-text">发送简单的邮件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HTML-邮件、附件"><span class="post-toc-number">5.6.2.</span> <span class="post-toc-text">HTML 邮件、附件</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#JSP-高级教程"><span class="post-toc-number">6.</span> <span class="post-toc-text">JSP 高级教程</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSP-标准标签库（JSTL）"><span class="post-toc-number">6.1.</span> <span class="post-toc-text">JSP 标准标签库（JSTL）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JSTL-库安装"><span class="post-toc-number">6.1.1.</span> <span class="post-toc-text">JSTL 库安装</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#核心标签"><span class="post-toc-number">6.1.2.</span> <span class="post-toc-text">核心标签</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#格式化标签"><span class="post-toc-number">6.1.3.</span> <span class="post-toc-text">格式化标签</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#格式化标签-1"><span class="post-toc-number">6.1.4.</span> <span class="post-toc-text">格式化标签</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#SQL标签"><span class="post-toc-number">6.1.5.</span> <span class="post-toc-text">SQL标签</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#XML-标签"><span class="post-toc-number">6.2.</span> <span class="post-toc-text">XML 标签</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSTL函数"><span class="post-toc-number">6.3.</span> <span class="post-toc-text">JSTL函数</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSP-数据库"><span class="post-toc-number">6.4.</span> <span class="post-toc-text">JSP 数据库</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#创建测试数据"><span class="post-toc-number">6.4.1.</span> <span class="post-toc-text">创建测试数据</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#SELECT-操作"><span class="post-toc-number">6.4.2.</span> <span class="post-toc-text">SELECT 操作</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#INSERT-操作"><span class="post-toc-number">6.4.3.</span> <span class="post-toc-text">INSERT 操作</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#DELETE-操作"><span class="post-toc-number">6.4.4.</span> <span class="post-toc-text">DELETE 操作</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#UPDATE-操作"><span class="post-toc-number">6.4.5.</span> <span class="post-toc-text">UPDATE 操作</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSP-XML-数据处理"><span class="post-toc-number">6.5.</span> <span class="post-toc-text">JSP XML 数据处理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#发送-XML"><span class="post-toc-number">6.5.1.</span> <span class="post-toc-text">发送 XML</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#处理-XML"><span class="post-toc-number">6.5.2.</span> <span class="post-toc-text">处理 XML</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#格式化-XML"><span class="post-toc-number">6.5.3.</span> <span class="post-toc-text">格式化 XML</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JavaBean"><span class="post-toc-number">6.6.</span> <span class="post-toc-text">JavaBean</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#访问-JavaBean"><span class="post-toc-number">6.6.1.</span> <span class="post-toc-text">访问 JavaBean</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#访问-JavaBean-对象的属性"><span class="post-toc-number">6.6.2.</span> <span class="post-toc-text">访问 JavaBean 对象的属性</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#自定义标签"><span class="post-toc-number">6.7.</span> <span class="post-toc-text">自定义标签</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#创建-HELLO-标签"><span class="post-toc-number">6.7.1.</span> <span class="post-toc-text">创建 HELLO 标签</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#访问标签体"><span class="post-toc-number">6.7.2.</span> <span class="post-toc-text">访问标签体</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#自定义标签属性"><span class="post-toc-number">6.7.3.</span> <span class="post-toc-text">自定义标签属性</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSP-表达式语言"><span class="post-toc-number">6.8.</span> <span class="post-toc-text">JSP 表达式语言</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#一个简单的语法"><span class="post-toc-number">6.8.1.</span> <span class="post-toc-text">一个简单的语法</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#EL中的基础操作符"><span class="post-toc-number">6.8.2.</span> <span class="post-toc-text">EL中的基础操作符</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JSP-EL中的函数"><span class="post-toc-number">6.8.3.</span> <span class="post-toc-text">JSP EL中的函数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JSP-EL隐含对象"><span class="post-toc-number">6.8.4.</span> <span class="post-toc-text">JSP EL隐含对象</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#pageContext对象"><span class="post-toc-number">6.8.5.</span> <span class="post-toc-text">pageContext对象</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Scope对象"><span class="post-toc-number">6.8.6.</span> <span class="post-toc-text">Scope对象</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#param和paramValues对象"><span class="post-toc-number">6.8.7.</span> <span class="post-toc-text">param和paramValues对象</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#header和headerValues对象"><span class="post-toc-number">6.8.8.</span> <span class="post-toc-text">header和headerValues对象</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSP-异常处理"><span class="post-toc-number">6.9.</span> <span class="post-toc-text">JSP 异常处理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用-Exception-对象"><span class="post-toc-number">6.9.1.</span> <span class="post-toc-text">使用 Exception 对象</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#在错误页面使用-JSTL-标签"><span class="post-toc-number">6.9.2.</span> <span class="post-toc-text">在错误页面使用 JSTL 标签</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用-try-…-catch-块"><span class="post-toc-number">6.9.3.</span> <span class="post-toc-text">使用 try … catch 块</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSP-调试"><span class="post-toc-number">6.10.</span> <span class="post-toc-text">JSP 调试</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSP-国际化"><span class="post-toc-number">6.11.</span> <span class="post-toc-text">JSP 国际化</span></a></li></ol></li></ol>
        </nav>
    </aside>
   
<article id="post-JSP-学习笔记"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">JSP-学习笔记</h1>
        <div class="post-meta">
            <i class="icon icon-lg icon-calendar-o"></i>
            发表于
            <time class="post-time" title="2018-05-09 15:25:00" datetime="2018-05-09T07:25:00.000Z"  itemprop="datePublished">2018-05-09</time>

            <br id="mybreak"/>
            
	<i class="icon icon-lg icon-folder-o"></i>
	分类：<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Code/">Code</a></li></ul>


            <i>·</i>
            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>次浏览
</span>


        </div>
        <div class="post-count-custom">
            <i class="icon icon-lg icon-comment-o"></i>
            阅读本文可能花费您&nbsp;<span class="post-count">83</span>&nbsp;分钟
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="了解"><a href="#了解" class="headerlink" title="了解"></a>了解</h1><h2 id="第一个-JSP-程序"><a href="#第一个-JSP-程序" class="headerlink" title="第一个 JSP 程序"></a>第一个 JSP 程序</h2><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">           &lt;title&gt;第一个 JSP 程序&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">           &lt;%</span><br><span class="line">                  out.println(<span class="string">"Hello World！"</span>);</span><br><span class="line">           %&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>

<a id="more"></a>

<h2 id="JSP-生命周期"><a href="#JSP-生命周期" class="headerlink" title="JSP 生命周期"></a>JSP 生命周期</h2><h3 id="JSP编译"><a href="#JSP编译" class="headerlink" title="JSP编译"></a>JSP编译</h3><p>当浏览器请求JSP页面时，JSP引擎会首先去检查是否需要编译这个文件。如果这个文件没有被编译过，或者在上次编译后被更改过，则编译这个JSP文件。</p>
<p>编译的过程包括三个步骤：</p>
<ul>
<li>解析JSP文件。</li>
<li>将JSP文件转为servlet。</li>
<li>编译servlet。</li>
</ul>
<hr>
<h3 id="JSP初始化"><a href="#JSP初始化" class="headerlink" title="JSP初始化"></a>JSP初始化</h3><p>容器载入JSP文件后，它会在为请求提供任何服务前调用jspInit()方法。如果您需要执行自定义的JSP初始化任务，复写jspInit()方法就行了，就像下面这样：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">jspInit</span><span class="params">()</span></span>{</span><br><span class="line">  <span class="comment">// 初始化代码</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>一般来讲程序只初始化一次，servlet也是如此。通常情况下您可以在jspInit()方法中初始化数据库连接、打开文件和创建查询表。</p>
<hr>
<h3 id="JSP执行"><a href="#JSP执行" class="headerlink" title="JSP执行"></a>JSP执行</h3><p>这一阶段描述了JSP生命周期中一切与请求相关的交互行为，直到被销毁。</p>
<p>当JSP网页完成初始化后，JSP引擎将会调用_jspService()方法。</p>
<p>_jspService()方法需要一个HttpServletRequest对象和一个HttpServletResponse对象作为它的参数，就像下面这样：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">void _jspService(HttpServletRequest request,</span><br><span class="line">                 HttpServletResponse response)</span><br><span class="line">{</span><br><span class="line">   // 服务端处理代码</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>_jspService()方法在每个request中被调用一次并且负责产生与之相对应的response，并且它还负责产生所有7个HTTP方法的回应，比如GET、POST、DELETE等等。</p>
<hr>
<h3 id="JSP清理"><a href="#JSP清理" class="headerlink" title="JSP清理"></a>JSP清理</h3><p>JSP生命周期的销毁阶段描述了当一个JSP网页从容器中被移除时所发生的一切。</p>
<p>jspDestroy()方法在JSP中等价于servlet中的销毁方法。当您需要执行任何清理工作时复写jspDestroy()方法，比如释放数据库连接或者关闭文件夹等等。</p>
<p>jspDestroy()方法的格式如下：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">jspDestroy</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">   <span class="comment">// 清理代码</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h1 id="JSP-语法"><a href="#JSP-语法" class="headerlink" title="JSP 语法"></a>JSP 语法</h1><p>##基础语法</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;% 代码片段 %&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>效果等同于</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:scriptlet&gt;</span><br><span class="line">   代码片段</span><br><span class="line">&lt;/jsp:scriptlet&gt;</span><br></pre></td></tr></tbody></table></figure>

<hr>
<h3 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h3><figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">	out.println(<span class="string">"Your IP address is "</span> + request.getRemoteAddr());</span><br><span class="line">%&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="中文编码"><a href="#中文编码" class="headerlink" title="中文编码"></a>中文编码</h3><figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="声明变量"><a href="#声明变量" class="headerlink" title="声明变量"></a>声明变量</h3><figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;%! <span class="keyword">int</span> i = <span class="number">0</span>; %&gt; </span><br><span class="line">&lt;%! <span class="keyword">int</span> a, b, c; %&gt; </span><br><span class="line">&lt;%! Circle a = <span class="keyword">new</span> Circle(<span class="number">2.0</span>); %&gt;</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:declaration&gt;</span><br><span class="line">   代码片段</span><br><span class="line">&lt;/jsp:declaration&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="JSP-表达式"><a href="#JSP-表达式" class="headerlink" title="JSP 表达式"></a>JSP 表达式</h3><p>先被转化成String，然后插入到表达式出现的地方。</p>
<p>表达式元素中可以包含任何符合Java语言规范的表达式，但是不能使用分号来结束表达式。</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%= 表达式 %&gt;</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:expression&gt;</span><br><span class="line">   表达式</span><br><span class="line">&lt;/jsp:expression&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="JSP-注释"><a href="#JSP-注释" class="headerlink" title="JSP 注释"></a>JSP 注释</h3><figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%-- 该部分注释在网页中不会被显示--%&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>HTML 注释</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="comment">&lt;!-- 注释 --&gt;</span></span><br><span class="line">&gt;</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<h3 id="JSP-指令"><a href="#JSP-指令" class="headerlink" title="JSP 指令"></a>JSP 指令</h3><p>JSP指令用来设置与整个JSP页面相关的属性。</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ directive attribute=<span class="string">"value"</span> %&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>这里有三种指令标签：</p>
<table>
<thead>
<tr>
<th><strong>指令</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>&lt;%@ page … %&gt;</td>
<td>定义页面的依赖属性，比如脚本语言、error页面、缓存需求等等</td>
</tr>
<tr>
<td>&lt;%@ include … %&gt;</td>
<td>包含其他文件</td>
</tr>
<tr>
<td>&lt;%@ taglib … %&gt;</td>
<td>引入标签库的定义，可以是自定义标签</td>
</tr>
</tbody></table>
<h3 id="JSP-行为"><a href="#JSP-行为" class="headerlink" title="JSP 行为"></a>JSP 行为</h3><p>JSP行为标签使用XML语法结构来控制servlet引擎。它能够动态插入一个文件，重用JavaBean组件，引导用户去另一个页面，为Java插件产生相关的HTML等等。</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:action_name attribute=<span class="string">"value"</span> /&gt;</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th><strong>语法</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>jsp:include</td>
<td>用于在当前页面中包含静态或动态资源</td>
</tr>
<tr>
<td>jsp:useBean</td>
<td>寻找和初始化一个JavaBean组件</td>
</tr>
<tr>
<td>jsp:setProperty</td>
<td>设置 JavaBean组件的值</td>
</tr>
<tr>
<td>jsp:getProperty</td>
<td>将 JavaBean组件的值插入到 output中</td>
</tr>
<tr>
<td>jsp:forward</td>
<td>从一个JSP文件向另一个文件传递一个包含用户请求的request对象</td>
</tr>
<tr>
<td>jsp:plugin</td>
<td>用于在生成的HTML页面中包含Applet和JavaBean对象</td>
</tr>
<tr>
<td>jsp:element</td>
<td>动态创建一个XML元素</td>
</tr>
<tr>
<td>jsp:attribute</td>
<td>定义动态创建的XML元素的属性</td>
</tr>
<tr>
<td>jsp:body</td>
<td>定义动态创建的XML元素的主体</td>
</tr>
<tr>
<td>jsp:text</td>
<td>用于封装模板数据</td>
</tr>
</tbody></table>
<h3 id="JSP-对象"><a href="#JSP-对象" class="headerlink" title="JSP 对象"></a>JSP 对象</h3><table>
<thead>
<tr>
<th><strong>对象</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>request</td>
<td><strong>HttpServletRequest</strong>类的实例</td>
</tr>
<tr>
<td>response</td>
<td><strong>HttpServletResponse</strong>类的实例</td>
</tr>
<tr>
<td>out</td>
<td><strong>PrintWriter</strong>类的实例，用于把结果输出至网页上</td>
</tr>
<tr>
<td>session</td>
<td><strong>HttpSession</strong>类的实例</td>
</tr>
<tr>
<td>application</td>
<td><strong>ServletContext</strong>类的实例，与应用上下文有关</td>
</tr>
<tr>
<td>config</td>
<td><strong>ServletConfig</strong>类的实例</td>
</tr>
<tr>
<td>pageContext</td>
<td><strong>PageContext</strong>类的实例，提供对JSP页面所有对象以及命名空间的访问</td>
</tr>
<tr>
<td>page</td>
<td>类似于Java类中的this关键字</td>
</tr>
<tr>
<td>Exception</td>
<td><strong>Exception</strong>类的对象，代表发生错误的JSP页面中对应的异常对象</td>
</tr>
</tbody></table>
<h3 id="控制流语句"><a href="#控制流语句" class="headerlink" title="控制流语句"></a>控制流语句</h3><p>同 Java</p>
<h3 id="判断语句"><a href="#判断语句" class="headerlink" title="判断语句"></a>判断语句</h3><h4 id="if…else…"><a href="#if…else…" class="headerlink" title="if…else…"></a>if…else…</h4><figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;%! <span class="keyword">int</span> day = <span class="number">3</span>; %&gt; </span><br><span class="line">&lt;h3&gt;IF...ELSE 实例&lt;/h3&gt;</span><br><span class="line">&lt;% <span class="keyword">if</span> (day == <span class="number">1</span> | day == <span class="number">7</span>) { %&gt;</span><br><span class="line">      &lt;p&gt;今天是周末&lt;/p&gt;</span><br><span class="line">&lt;% } <span class="keyword">else</span> { %&gt;</span><br><span class="line">      &lt;p&gt;今天不是周末&lt;/p&gt;</span><br><span class="line">&lt;% } %&gt;</span><br></pre></td></tr></tbody></table></figure>

<h4 id="switch"><a href="#switch" class="headerlink" title="switch"></a>switch</h4><figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%! <span class="keyword">int</span> day = <span class="number">3</span>; %&gt; </span><br><span class="line">&lt;% </span><br><span class="line"><span class="keyword">switch</span>(day) {</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">   out.println(<span class="string">"星期天"</span>);</span><br><span class="line">   <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">   ...</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">   out.println(<span class="string">"星期六"</span>);</span><br><span class="line">}</span><br><span class="line">%&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="循环语句"><a href="#循环语句" class="headerlink" title="循环语句"></a>循环语句</h3><p>可以使用Java的三个基本循环类型：for，while，和 do…while</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%! <span class="keyword">int</span> fontSize; %&gt; </span><br><span class="line">&lt;h3&gt;For 循环实例&lt;/h3&gt;</span><br><span class="line">&lt;% <span class="keyword">for</span> ( fontSize = <span class="number">1</span>; fontSize &lt;= <span class="number">3</span>; fontSize++){ %&gt;</span><br><span class="line">   &lt;font color="green" size="&lt;%= fontSize %&gt;"&gt;菜鸟教程&lt;/font&gt;&lt;br /&gt;</span><br><span class="line">&lt;% } %&gt;</span><br></pre></td></tr></tbody></table></figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://www.runoob.com/wp-content/uploads/2014/01/7B4B85CF-FE4B-43CB-AAFF-F8594AD4342C.jpg" alt="运行结果" title="">
                </div>
                <div class="image-caption">运行结果</div>
            </figure>



<h3 id="JSP-运算符"><a href="#JSP-运算符" class="headerlink" title="JSP 运算符"></a>JSP 运算符</h3><p>JSP支持所有Java逻辑和算术运算符。</p>
<h3 id="JSP-字面量"><a href="#JSP-字面量" class="headerlink" title="JSP 字面量"></a>JSP 字面量</h3><ul>
<li>布尔值(boolean)：true 和 false;</li>
<li>整型(int)：与 Java 中的一样;</li>
<li>浮点型(float)：与 Java 中的一样;</li>
<li>字符串(string)：以单引号或双引号开始和结束;</li>
<li>Null：null。</li>
</ul>
<h2 id="JSP-指令-1"><a href="#JSP-指令-1" class="headerlink" title="JSP 指令"></a>JSP 指令</h2><p>JSP指令用来设置整个JSP页面相关的属性，如网页的编码方式和脚本语言。</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ directive attribute=<span class="string">"value"</span> %&gt;</span><br></pre></td></tr></tbody></table></figure>

<h4 id="Page-指令"><a href="#Page-指令" class="headerlink" title="Page 指令"></a>Page 指令</h4><p>Page指令为容器提供当前页面的使用说明。一个JSP页面可以包含多个page指令。</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page attribute=<span class="string">"value"</span> %&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>等价的XML格式：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:directive.page attribute=<span class="string">"value"</span> /&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>下表列出与Page指令相关的属性：</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>buffer</td>
<td>指定out对象使用缓冲区的大小</td>
</tr>
<tr>
<td>autoFlush</td>
<td>控制out对象的 缓存区</td>
</tr>
<tr>
<td>contentType</td>
<td>指定当前JSP页面的MIME类型和字符编码</td>
</tr>
<tr>
<td>errorPage</td>
<td>指定当JSP页面发生异常时需要转向的错误处理页面</td>
</tr>
<tr>
<td>isErrorPage</td>
<td>指定当前页面是否可以作为另一个JSP页面的错误处理页面</td>
</tr>
<tr>
<td>extends</td>
<td>指定servlet从哪一个类继承</td>
</tr>
<tr>
<td>import</td>
<td>导入要使用的Java类</td>
</tr>
<tr>
<td>info</td>
<td>定义JSP页面的描述信息</td>
</tr>
<tr>
<td>isThreadSafe</td>
<td>指定对JSP页面的访问是否为线程安全</td>
</tr>
<tr>
<td>language</td>
<td>定义JSP页面所用的脚本语言，默认是Java</td>
</tr>
<tr>
<td>session</td>
<td>指定JSP页面是否使用session</td>
</tr>
<tr>
<td>isELIgnored</td>
<td>指定是否执行EL表达式</td>
</tr>
<tr>
<td>isScriptingEnabled</td>
<td>确定脚本元素能否被使用</td>
</tr>
</tbody></table>
<h4 id="Include指令"><a href="#Include指令" class="headerlink" title="Include指令"></a>Include指令</h4><p>JSP可以通过include指令来包含其他文件。被包含的文件可以是JSP文件、HTML文件或文本文件。</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ include file=<span class="string">"文件相对 url 地址"</span> %&gt;</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:directive.include file=<span class="string">"文件相对 url 地址"</span> /&gt;</span><br></pre></td></tr></tbody></table></figure>

<h4 id="Taglib指令"><a href="#Taglib指令" class="headerlink" title="Taglib指令"></a>Taglib指令</h4><p>JSP API允许用户自定义标签，一个自定义标签库就是自定义标签的集合。</p>
<p>Taglib指令引入一个自定义标签集合的定义，包括库路径、自定义标签。</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib uri=<span class="string">"uri"</span> prefix=<span class="string">"prefixOfTag"</span> %&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>uri属性确定标签库的位置，prefix属性指定标签库的前缀。</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:directive.taglib uri=<span class="string">"uri"</span> prefix=<span class="string">"prefixOfTag"</span> /&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="JSP-动作元素"><a href="#JSP-动作元素" class="headerlink" title="JSP 动作元素"></a>JSP 动作元素</h2><p>与JSP指令元素不同的是，JSP动作元素在请求处理阶段起作用。JSP动作元素是用XML语法写成的。</p>
<p>利用JSP动作可以动态地插入文件、重用JavaBean组件、把用户重定向到另外的页面、为Java插件生成HTML代码。</p>
<p>动作元素只有一种语法，它符合XML标准：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:action_name attribute=<span class="string">"value"</span> /&gt;</span><br></pre></td></tr></tbody></table></figure>

<h4 id="lt-jsp-include-gt-动作元素"><a href="#lt-jsp-include-gt-动作元素" class="headerlink" title="<jsp:include>动作元素"></a><code>&lt;jsp:include&gt;</code>动作元素</h4><p><code>&lt;jsp:include&gt;</code>动作元素用来包含静态和动态的文件。该动作把指定文件插入正在生成的页面。语法格式如下：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:include page=<span class="string">"相对 URL 地址"</span> flush=<span class="string">"true"</span> /&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>flush：布尔属性，定义在包含资源前是否刷新缓存区。</p>
<p>前面已经介绍过include指令，它是在JSP文件被转换成Servlet的时候引入文件，而这里的jsp:include动作不同，插入文件的时间是在页面被请求的时候。</p>
<h5 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h5><p>date.jsp文件代码：</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;p&gt;</span><br><span class="line">   今天的日期是: &lt;%= (<span class="keyword">new</span> java.util.Date()).toLocaleString()%&gt;</span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>main.jsp文件代码：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;h2&gt;include 动作实例&lt;/h2&gt;</span><br><span class="line">&lt;jsp:include page=<span class="string">"date.jsp"</span> flush=<span class="string">"true"</span> /&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>运行结果</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">今天的日期是: 2016-6-25 14:08:17</span><br></pre></td></tr></tbody></table></figure>

<h4 id="lt-jsp-useBean-gt-动作元素"><a href="#lt-jsp-useBean-gt-动作元素" class="headerlink" title="<jsp:useBean>动作元素"></a><code>&lt;jsp:useBean&gt;</code>动作元素</h4><p><strong>jsp:useBean</strong> 动作用来加载一个将在JSP页面中使用的JavaBean，使得我们可以发挥 Java 组件复用的优势。</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=<span class="string">"name"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"package.class"</span> /&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>在类载入后，我们既可以通过 jsp:setProperty 和 jsp:getProperty 动作来修改和检索bean的属性。</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>class</td>
<td>指定Bean的完整包名。</td>
</tr>
<tr>
<td>type</td>
<td>指定将引用该对象变量的类型。</td>
</tr>
<tr>
<td>beanName</td>
<td>通过 java.beans.Beans 的 instantiate() 方法指定Bean的名字。</td>
</tr>
</tbody></table>
<h4 id="lt-jsp-setProperty-gt-动作元素"><a href="#lt-jsp-setProperty-gt-动作元素" class="headerlink" title="<jsp:setProperty>动作元素"></a><code>&lt;jsp:setProperty&gt;</code>动作元素</h4><p>jsp:setProperty用来设置已经实例化的Bean对象的属性，有两种用法。</p>
<p>首先，你可以在jsp:useBean元素的外面（后面）使用jsp:setProperty，如下所示：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=<span class="string">"myName"</span> ... /&gt;</span><br><span class="line">...</span><br><span class="line">&lt;jsp:setProperty name=<span class="string">"myName"</span> property=<span class="string">"someProperty"</span> .../&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>此时，不管jsp:useBean是找到了一个现有的Bean，还是新创建了一个Bean实例，jsp:setProperty都会执行。</p>
<hr>
<p>第二种用法是把jsp:setProperty放入jsp:useBean元素的内部，如下所示：</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=<span class="string">"myName"</span> ... &gt;</span><br><span class="line">...</span><br><span class="line">   &lt;jsp:setProperty name=<span class="string">"myName"</span> property=<span class="string">"someProperty"</span> .../&gt;</span><br><span class="line">&lt;/jsp:useBean&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>此时，jsp:setProperty只有在新建Bean实例时才会执行，如果是使用现有实例则不执行jsp:setProperty。</p>
<p>jsp:setProperty动作有下面四个属性,如下表：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>必需。它表示要设置属性的是哪个Bean。</td>
</tr>
<tr>
<td>property</td>
<td>必需。它表示要设置哪个属性。有一个特殊用法：如果property的值是”*”，表示所有名字和Bean属性名字匹配的请求参数都将被传递给相应的属性set方法。</td>
</tr>
<tr>
<td>value</td>
<td>可选。该属性用来指定Bean属性的值。value和param不能同时使用，但可以使用其中任意一个。</td>
</tr>
<tr>
<td>param</td>
<td>可选。它指定用哪个请求参数作为Bean属性的值。如果当前请求没有参数，则什么事情也不做，系统不会把null传递给Bean属性的set方法。因此，你可以让Bean自己提供默认属性值，只有当请求参数明确指定了新值时才修改默认属性值。</td>
</tr>
</tbody></table>
<h4 id="lt-jsp-getProperty-gt-动作元素"><a href="#lt-jsp-getProperty-gt-动作元素" class="headerlink" title="<jsp:getProperty>动作元素"></a><code>&lt;jsp:getProperty&gt;</code>动作元素</h4><p>jsp:getProperty动作提取指定Bean属性的值，转换成字符串，然后输出。语法格式如下：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=<span class="string">"myName"</span> ... /&gt;</span><br><span class="line">...</span><br><span class="line">&lt;jsp:getProperty name=<span class="string">"myName"</span> property=<span class="string">"someProperty"</span> .../&gt;</span><br></pre></td></tr></tbody></table></figure>

<h5 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h5><p>使用 Bean</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.main;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestBean</span> </span>{</span><br><span class="line">   <span class="keyword">private</span> String message = <span class="string">"菜鸟教程"</span>;</span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getMessage</span><span class="params">()</span> </span>{</span><br><span class="line">      <span class="keyword">return</span>(message);</span><br><span class="line">   }</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMessage</span><span class="params">(String message)</span> </span>{</span><br><span class="line">      <span class="keyword">this</span>.message = message;</span><br><span class="line">   }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>编译以上实例文件 TestBean.java ：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ javac TestBean.java</span><br></pre></td></tr></tbody></table></figure>

<p>在main.jsp文件中调用该Bean:</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;h2&gt;Jsp 使用 JavaBean 实例&lt;/h2&gt;</span><br><span class="line">&lt;jsp:useBean id=<span class="string">"test"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"com.runoob.main.TestBean"</span> /&gt;</span><br><span class="line"> </span><br><span class="line">&lt;jsp:setProperty name=<span class="string">"test"</span> property=<span class="string">"message"</span> value=<span class="string">"菜鸟教程..."</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;输出信息....&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;jsp:getProperty name=<span class="string">"test"</span> property=<span class="string">"message"</span> /&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>运行结果</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输出信息...</span><br><span class="line">菜鸟教程...</span><br></pre></td></tr></tbody></table></figure>

<h4 id="lt-jsp-forward-gt-动作元素"><a href="#lt-jsp-forward-gt-动作元素" class="headerlink" title="<jsp:forward> 动作元素"></a><code>&lt;jsp:forward&gt;</code> 动作元素</h4><p>jsp:forward动作把请求转到另外的页面。</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:forward page=<span class="string">"相对 URL 地址"</span> /&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>page属性包含的是一个相对URL。page的值既可以直接给出，也可以在请求的时候动态计算，可以是一个JSP页面或者一个 Java Servlet.</p>
<h4 id="lt-jsp-plugin-gt-动作元素"><a href="#lt-jsp-plugin-gt-动作元素" class="headerlink" title="<jsp:plugin>动作元素"></a><code>&lt;jsp:plugin&gt;</code>动作元素</h4><p><code>jsp:plugin</code>动作用来根据浏览器的类型，插入通过Java插件 运行Java Applet所必需的OBJECT或EMBED元素。</p>
<p>如果需要的插件不存在，它会下载插件，然后执行Java组件。 Java组件可以是一个applet或一个JavaBean。</p>
<p>plugin动作有多个对应HTML元素的属性用于格式化Java 组件。param元素可用于向Applet 或 Bean 传递参数。</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:plugin type=<span class="string">"applet"</span> codebase=<span class="string">"dirname"</span> code=<span class="string">"MyApplet.class"</span></span><br><span class="line">                           width=<span class="string">"60"</span> height=<span class="string">"80"</span>&gt;</span><br><span class="line">   &lt;jsp:param name=<span class="string">"fontcolor"</span> value=<span class="string">"red"</span> /&gt;</span><br><span class="line">   &lt;jsp:param name=<span class="string">"background"</span> value=<span class="string">"black"</span> /&gt;</span><br><span class="line"> </span><br><span class="line">   &lt;jsp:fallback&gt;</span><br><span class="line">      Unable to initialize Java Plugin</span><br><span class="line">   &lt;/jsp:fallback&gt;</span><br><span class="line"> </span><br><span class="line">&lt;/jsp:plugin&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>如果你有兴趣可以尝试使用applet来测试jsp:plugin动作元素，<code>&lt;fallback&gt;</code>元素是一个新元素，在组件出现故障的错误时发送给用户错误信息。</p>
<h4 id="lt-jsp-element-gt-、-lt-jsp-attribute-gt-、-lt-jsp-body-gt-动作元素"><a href="#lt-jsp-element-gt-、-lt-jsp-attribute-gt-、-lt-jsp-body-gt-动作元素" class="headerlink" title="<jsp:element> 、 <jsp:attribute>、 <jsp:body>动作元素"></a><code>&lt;jsp:element&gt;</code> 、 <code>&lt;jsp:attribute&gt;</code>、 <code>&lt;jsp:body&gt;</code>动作元素</h4><p><code>&lt;jsp:element&gt;</code> 、 <code>&lt;jsp:attribute&gt;</code>、 <code>&lt;jsp:body&gt;</code>动作元素动态定义XML元素。动态是非常重要的，这就意味着XML元素在编译时是动态生成的而非静态。</p>
<h5 id="实例-2"><a href="#实例-2" class="headerlink" title="实例"></a>实例</h5><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"utf-8"</span>&gt;</span><br><span class="line">&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;jsp:element name=<span class="string">"xmlElement"</span>&gt;</span><br><span class="line">&lt;jsp:attribute name=<span class="string">"xmlElementAttr"</span>&gt;</span><br><span class="line">   属性值</span><br><span class="line">&lt;/jsp:attribute&gt;</span><br><span class="line">&lt;jsp:body&gt;</span><br><span class="line">   XML 元素的主体</span><br><span class="line">&lt;/jsp:body&gt;</span><br><span class="line">&lt;/jsp:element&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>运行结果</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://www.runoob.com/wp-content/uploads/2014/01/7D8C47F0-0DDE-4F1D-8BE1-B2C9C955683E.jpg" alt="运行结果" title="">
                </div>
                <div class="image-caption">运行结果</div>
            </figure>



<h2 id="lt-jsp-text-gt-动作元素"><a href="#lt-jsp-text-gt-动作元素" class="headerlink" title="<jsp:text>动作元素"></a><code>&lt;jsp:text&gt;</code>动作元素</h2><p><code>&lt;jsp:text&gt;</code>动作元素允许在JSP页面和文档中使用写入文本的模板，语法格式如下：</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:text&gt;模板数据&lt;/jsp:text&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>以上文本模板不能包含其他元素，只能只能包含文本和EL表达式（注：EL表达式将在后续章节中介绍）。请注意，在XML文件中，您不能使用表达式如 ${whatever &gt; 0}，因为&gt;符号是非法的。 你可以使用 ${whatever gt 0}表达式或者嵌入在一个CDATA部分的值。</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:text&gt;&lt;![CDATA[&lt;br&gt;]]&gt;&lt;/jsp:text&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>如果你需要在 XHTML 中声明 DOCTYPE,必须使用到<code>&lt;jsp:text&gt;</code>动作元素，实例如下：</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:text&gt;&lt;![CDATA[&lt;!DOCTYPE html</span><br><span class="line">PUBLIC <span class="string">"-//W3C//DTD XHTML 1.0 Strict//EN"</span></span><br><span class="line"><span class="string">"DTD/xhtml1-strict.dtd"</span>&gt;]]&gt;</span><br><span class="line">&lt;/jsp:text&gt;</span><br><span class="line">&lt;head&gt;&lt;title&gt;jsp:text action&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;books&gt;&lt;book&gt;&lt;jsp:text&gt;  </span><br><span class="line">    Welcome to JSP Programming</span><br><span class="line">&lt;/jsp:text&gt;&lt;/book&gt;&lt;/books&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>你可以对以上实例尝试使用<code>&lt;jsp:text&gt;</code>及不使用该动作元素执行结果的区别。</p>
<h2 id="JSP-隐式对象"><a href="#JSP-隐式对象" class="headerlink" title="JSP 隐式对象"></a>JSP 隐式对象</h2><p>JSP隐式对象是JSP容器为每个页面提供的Java对象，开发者可以直接使用它们而不用显式声明。JSP隐式对象也被称为预定义变量。</p>
<h4 id="request对象"><a href="#request对象" class="headerlink" title="request对象"></a>request对象</h4><p>request对象是javax.servlet.http.HttpServletRequest 类的实例。每当客户端请求一个JSP页面时，JSP引擎就会制造一个新的request对象来代表这个请求。</p>
<p>request对象提供了一系列方法来获取HTTP头信息，cookies，HTTP方法等等。</p>
<h4 id="response对象"><a href="#response对象" class="headerlink" title="response对象"></a>response对象</h4><p>response对象是javax.servlet.http.HttpServletResponse类的实例。当服务器创建request对象时会同时创建用于响应这个客户端的response对象。</p>
<p>response对象也定义了处理HTTP头模块的接口。通过这个对象，开发者们可以添加新的cookies，时间戳，HTTP状态码等等。</p>
<h4 id="out对象"><a href="#out对象" class="headerlink" title="out对象"></a>out对象</h4><p>out对象是 javax.servlet.jsp.JspWriter 类的实例，用来在response对象中写入内容。</p>
<p>最初的JspWriter类对象根据页面是否有缓存来进行不同的实例化操作。可以在page指令中使用buffered=’false’属性来轻松关闭缓存。</p>
<p>JspWriter类包含了大部分java.io.PrintWriter类中的方法。不过，JspWriter新增了一些专为处理缓存而设计的方法。还有就是，JspWriter类会抛出IOExceptions异常，而PrintWriter不会。</p>
<p>下表列出了我们将会用来输出boolean，char，int，double，String，object等类型数据的重要方法：</p>
<table>
<thead>
<tr>
<th><strong>方法</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>out.print(dataType dt)</strong></td>
<td>输出Type类型的值</td>
</tr>
<tr>
<td><strong>out.println(dataType dt)</strong></td>
<td>输出Type类型的值然后换行</td>
</tr>
<tr>
<td><strong>out.flush()</strong></td>
<td>刷新输出流</td>
</tr>
</tbody></table>
<h4 id="session对象"><a href="#session对象" class="headerlink" title="session对象"></a>session对象</h4><p>session对象是 javax.servlet.http.HttpSession 类的实例。和Java Servlets中的session对象有一样的行为。</p>
<p>session对象用来跟踪在各个客户端请求间的会话。</p>
<h4 id="application对象"><a href="#application对象" class="headerlink" title="application对象"></a>application对象</h4><p>application对象直接包装了servlet的ServletContext类的对象，是javax.servlet.ServletContext 类的实例。</p>
<p>这个对象在JSP页面的整个生命周期中都代表着这个JSP页面。这个对象在JSP页面初始化时被创建，随着jspDestroy()方法的调用而被移除。</p>
<p>通过向application中添加属性，则所有组成您web应用的JSP文件都能访问到这些属性。</p>
<h4 id="config对象"><a href="#config对象" class="headerlink" title="config对象"></a>config对象</h4><p>config对象是 javax.servlet.ServletConfig 类的实例，直接包装了servlet的ServletConfig类的对象。</p>
<p>这个对象允许开发者访问Servlet或者JSP引擎的初始化参数，比如文件路径等。</p>
<p>以下是config对象的使用方法，不是很重要，所以不常用：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config.getServletName();</span><br></pre></td></tr></tbody></table></figure>

<p>它返回包含在<code>&lt;servlet-name&gt;</code>元素中的servlet名字，注意，<code>&lt;servlet-name&gt;</code>元素在 WEB-INF\web.xml 文件中定义。</p>
<h4 id="pageContext-对象"><a href="#pageContext-对象" class="headerlink" title="pageContext 对象"></a>pageContext 对象</h4><p>pageContext对象是javax.servlet.jsp.PageContext 类的实例，用来代表整个JSP页面。</p>
<p>这个对象主要用来访问页面信息，同时过滤掉大部分实现细节。</p>
<p>这个对象存储了request对象和response对象的引用。application对象，config对象，session对象，out对象可以通过访问这个对象的属性来导出。</p>
<p>pageContext对象也包含了传给JSP页面的指令信息，包括缓存信息，ErrorPage URL,页面scope等。</p>
<p>PageContext类定义了一些字段，包括PAGE_SCOPE，REQUEST_SCOPE，SESSION_SCOPE， APPLICATION_SCOPE。它也提供了40余种方法，有一半继承自javax.servlet.jsp.JspContext 类。</p>
<p>其中一个重要的方法就是removeArribute()，它可接受一个或两个参数。比如，pageContext.removeArribute(“attrName”)移除四个scope中相关属性，但是下面这种方法只移除特定scope中的相关属性：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pageContext.removeAttribute(<span class="string">"attrName"</span>, PAGE_SCOPE);</span><br></pre></td></tr></tbody></table></figure>

<h4 id="page-对象"><a href="#page-对象" class="headerlink" title="page 对象"></a>page 对象</h4><p>这个对象就是页面实例的引用。它可以被看做是整个JSP页面的代表。</p>
<p>page 对象就是this对象的同义词。</p>
<h4 id="exception-对象"><a href="#exception-对象" class="headerlink" title="exception 对象"></a>exception 对象</h4><p>exception 对象包装了从先前页面中抛出的异常信息。它通常被用来产生对出错条件的适当响应。</p>
<h1 id="JSP-响应"><a href="#JSP-响应" class="headerlink" title="JSP 响应"></a>JSP 响应</h1><h2 id="JSP-客户端请求"><a href="#JSP-客户端请求" class="headerlink" title="JSP 客户端请求"></a>JSP 客户端请求</h2><p>下表列出了浏览器端信息头的一些重要内容：</p>
<table>
<thead>
<tr>
<th><strong>信息</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>Accept</td>
<td>指定浏览器或其他客户端可以处理的MIME类型。它的值通常为 <strong>image/png</strong> 或 <strong>image/jpeg</strong></td>
</tr>
<tr>
<td>Accept-Charset</td>
<td>指定浏览器要使用的字符集。比如 ISO-8859-1</td>
</tr>
<tr>
<td>Accept-Encoding</td>
<td>指定编码类型。它的值通常为 <strong>gzip</strong> 或<strong>compress</strong></td>
</tr>
<tr>
<td>Accept-Language</td>
<td>指定客户端首选语言，servlet会优先返回以当前语言构成的结果集，如果servlet支持这种语言的话。比如 en，en-us，ru等等</td>
</tr>
<tr>
<td>Authorization</td>
<td>在访问受密码保护的网页时识别不同的用户</td>
</tr>
<tr>
<td>Connection</td>
<td>表明客户端是否可以处理HTTP持久连接。持久连接允许客户端或浏览器在一个请求中获取多个文件。<strong>Keep-Alive</strong> 表示启用持久连接</td>
</tr>
<tr>
<td>Content-Length</td>
<td>仅适用于POST请求，表示 POST 数据的字节数</td>
</tr>
<tr>
<td>Cookie</td>
<td>返回先前发送给浏览器的cookies至服务器</td>
</tr>
<tr>
<td>Host</td>
<td>指出原始URL中的主机名和端口号</td>
</tr>
<tr>
<td>If-Modified-Since</td>
<td>表明只有当网页在指定的日期被修改后客户端才需要这个网页。 服务器发送304码给客户端，表示没有更新的资源</td>
</tr>
<tr>
<td>If-Unmodified-Since</td>
<td>与If-Modified-Since相反， 只有文档在指定日期后仍未被修改过，操作才会成功</td>
</tr>
<tr>
<td>Referer</td>
<td>标志着所引用页面的URL。比如，如果你在页面1，然后点了个链接至页面2，那么页面1的URL就会包含在浏览器请求页面2的信息头中</td>
</tr>
<tr>
<td>User-Agent</td>
<td>用来区分不同浏览器或客户端发送的请求，并对不同类型的浏览器返回不同的内容</td>
</tr>
</tbody></table>
<h3 id="HttpServletRequest类"><a href="#HttpServletRequest类" class="headerlink" title="HttpServletRequest类"></a>HttpServletRequest类</h3><p>request对象是javax.servlet.http.HttpServletRequest类的实例。每当客户端请求一个页面时，JSP引擎就会产生一个新的对象来代表这个请求。</p>
<p>request对象提供了一系列方法来获取HTTP信息头，包括表单数据，cookies，HTTP方法等等。</p>
<p>一些在JSP编程中常用的获取HTTP信息头的方法：</p>
<table>
<thead>
<tr>
<th><strong>序号</strong></th>
<th><strong>方法</strong> <strong>&amp;</strong> <strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><strong>Cookie[] getCookies()</strong><br>返回客户端所有的Cookie的数组</td>
</tr>
<tr>
<td>2</td>
<td><strong>Enumeration getAttributeNames()</strong><br>返回request对象的所有属性名称的集合</td>
</tr>
<tr>
<td>3</td>
<td><strong>Enumeration getHeaderNames()</strong><br>返回所有HTTP头的名称集合</td>
</tr>
<tr>
<td>4</td>
<td><strong>Enumeration getParameterNames()</strong><br>返回请求中所有参数的集合</td>
</tr>
<tr>
<td>5</td>
<td><strong>HttpSession getSession()</strong><br>返回request对应的session对象，如果没有，则创建一个</td>
</tr>
<tr>
<td>6</td>
<td><strong>HttpSession getSession(boolean create)</strong><br>返回request对应的session对象，如果没有并且参数create为true，则返回一个新的session对象</td>
</tr>
<tr>
<td>7</td>
<td><strong>Locale getLocale()</strong><br>返回当前页的Locale对象，可以在response中设置</td>
</tr>
<tr>
<td>8</td>
<td><strong>Object getAttribute(String name)</strong><br>返回名称为name的属性值，如果不存在则返回null。</td>
</tr>
<tr>
<td>9</td>
<td><strong>ServletInputStream getInputStream()</strong><br>返回请求的输入流</td>
</tr>
<tr>
<td>10</td>
<td><strong>String getAuthType()</strong><br>返回认证方案的名称，用来保护servlet，比如 “BASIC” 或者 “SSL” 或 null 如果 JSP没设置保护措施</td>
</tr>
<tr>
<td>11</td>
<td><strong>String getCharacterEncoding()</strong><br>返回request的字符编码集名称</td>
</tr>
<tr>
<td>12</td>
<td><strong>String getContentType()</strong><br>返回request主体的MIME类型，若未知则返回null</td>
</tr>
<tr>
<td>13</td>
<td><strong>String getContextPath()</strong><br>返回request URI中指明的上下文路径</td>
</tr>
<tr>
<td>14</td>
<td><strong>String getHeader(String name)</strong><br>返回name指定的信息头</td>
</tr>
<tr>
<td>15</td>
<td><strong>String getMethod()</strong><br>返回此request中的HTTP方法，比如 GET,，POST，或PUT</td>
</tr>
<tr>
<td>16</td>
<td><strong>String getParameter(String name)</strong><br>返回此request中name指定的参数，若不存在则返回null</td>
</tr>
<tr>
<td>17</td>
<td><strong>String getPathInfo()</strong><br>返回任何额外的与此request URL相关的路径</td>
</tr>
<tr>
<td>18</td>
<td><strong>String getProtocol()</strong><br>返回此request所使用的协议名和版本</td>
</tr>
<tr>
<td>19</td>
<td><strong>String getQueryString()</strong><br>返回此 request URL包含的查询字符串</td>
</tr>
<tr>
<td>20</td>
<td><strong>String getRemoteAddr()</strong><br>返回客户端的IP地址</td>
</tr>
<tr>
<td>21</td>
<td><strong>String getRemoteHost()</strong><br>返回客户端的完整名称</td>
</tr>
<tr>
<td>22</td>
<td><strong>String getRemoteUser()</strong><br>返回客户端通过登录认证的用户，若用户未认证则返回null</td>
</tr>
<tr>
<td>23</td>
<td><strong>String getRequestURI()</strong><br>返回request的URI</td>
</tr>
<tr>
<td>24</td>
<td><strong>String getRequestedSessionId()</strong><br>返回request指定的session ID</td>
</tr>
<tr>
<td>25</td>
<td><strong>String getServletPath()</strong><br>返回所请求的servlet路径</td>
</tr>
<tr>
<td>26</td>
<td><strong>String[] getParameterValues(String name)</strong><br>返回指定名称的参数的所有值，若不存在则返回null</td>
</tr>
<tr>
<td>27</td>
<td><strong>boolean isSecure()</strong><br>返回request是否使用了加密通道，比如HTTPS</td>
</tr>
<tr>
<td>28</td>
<td><strong>int getContentLength()</strong><br>返回request主体所包含的字节数，若未知的返回-1</td>
</tr>
<tr>
<td>29</td>
<td><strong>int getIntHeader(String name)</strong><br>返回指定名称的request信息头的值</td>
</tr>
<tr>
<td>30</td>
<td><strong>int getServerPort()</strong><br>返回服务器端口号</td>
</tr>
</tbody></table>
<h3 id="HTTP信息头示例"><a href="#HTTP信息头示例" class="headerlink" title="HTTP信息头示例"></a>HTTP信息头示例</h3><p>在这个例子中，我们会使用<code>HttpServletRequest类的getHeaderNames()方法</code>来读取HTTP信息头。这个方法以枚举的形式返回当前HTTP请求的头信息。</p>
<p>获取Enumeration对象后，用标准的方式来遍历Enumeration对象，用hasMoreElements()方法来确定什么时候停止，用nextElement()方法来获得每个参数的名字。</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.io.*,java.util.*"</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;h2&gt;HTTP 头部请求实例&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">&lt;table width=<span class="string">"100%"</span> border=<span class="string">"1"</span> align=<span class="string">"center"</span>&gt;</span><br><span class="line">    &lt;tr bgcolor=<span class="string">"#949494"</span>&gt;</span><br><span class="line">    	&lt;th&gt;Header Name&lt;/th&gt;&lt;th&gt;Header Value(s)&lt;/th&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">       Enumeration headerNames = request.getHeaderNames();</span><br><span class="line">       <span class="keyword">while</span>(headerNames.hasMoreElements()) {</span><br><span class="line">          String paramName = (String)headerNames.nextElement();</span><br><span class="line">          out.print(<span class="string">"&lt;tr&gt;&lt;td&gt;"</span> + paramName + <span class="string">"&lt;/td&gt;\n"</span>);</span><br><span class="line">          String paramValue = request.getHeader(paramName);</span><br><span class="line">          out.println(<span class="string">"&lt;td&gt; "</span> + paramValue + <span class="string">"&lt;/td&gt;&lt;/tr&gt;\n"</span>);</span><br><span class="line">       }</span><br><span class="line">    %&gt;</span><br><span class="line">&lt;/table&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>访问main.jsp，将会得到以下结果：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://www.runoob.com/wp-content/uploads/2014/01/jspheadmsg.jpg" alt="img" title="">
                </div>
                <div class="image-caption">img</div>
            </figure>



<h2 id="JSP-服务器响应"><a href="#JSP-服务器响应" class="headerlink" title="JSP 服务器响应"></a>JSP 服务器响应</h2><p>Response响应对象主要将JSP容器处理后的结果传回到客户端。可以通过response变量设置HTTP的状态和向客户端发送数据，如Cookie、HTTP文件头信息等。</p>
<p>一个典型的响应看起来就像下面这样：</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Header2: ...</span><br><span class="line">...</span><br><span class="line">HeaderN: ...</span><br><span class="line">  (空行)</span><br><span class="line"><span class="meta">&lt;!doctype ...&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span>...<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>状态行包含HTTP版本信息，比如HTTP/1.1，一个状态码，比如200，还有一个非常短的信息对应着状态码，比如OK。</p>
<p>下表摘要出了HTTP1.1响应头中最有用的部分：</p>
<table>
<thead>
<tr>
<th><strong>响应头</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>Allow</td>
<td>指定服务器支持的request方法（GET，POST等等）</td>
</tr>
<tr>
<td>Cache-Control</td>
<td>指定响应文档能够被安全缓存的情况。通常取值为 <strong>public**</strong>，<strong>**private</strong> 或<strong>no-cache</strong> 等等。 Public意味着文档可缓存，Private意味着文档只为单用户服务并且只能使用私有缓存。No-cache 意味着文档不被缓存。</td>
</tr>
<tr>
<td>Connection</td>
<td>命令浏览器是否要使用持久的HTTP连接。<strong>close**</strong>值** 命令浏览器不使用持久HTTP连接，而keep-alive 意味着使用持久化连接。</td>
</tr>
<tr>
<td>Content-Disposition</td>
<td>让浏览器要求用户将响应以给定的名称存储在磁盘中</td>
</tr>
<tr>
<td>Content-Encoding</td>
<td>指定传输时页面的编码规则</td>
</tr>
<tr>
<td>Content-Language</td>
<td>表述文档所使用的语言，比如en， en-us,，ru等等</td>
</tr>
<tr>
<td>Content-Length</td>
<td>表明响应的字节数。只有在浏览器使用持久化 (keep-alive) HTTP 连接时才有用</td>
</tr>
<tr>
<td>Content-Type</td>
<td>表明文档使用的MIME类型</td>
</tr>
<tr>
<td>Expires</td>
<td>指明啥时候过期并从缓存中移除</td>
</tr>
<tr>
<td>Last-Modified</td>
<td>指明文档最后修改时间。客户端可以 缓存文档并且在后续的请求中提供一个 <strong>If-Modified-Since</strong>请求头</td>
</tr>
<tr>
<td>Location</td>
<td>在300秒内，包含所有的有一个状态码的响应地址，浏览器会自动重连然后检索新文档</td>
</tr>
<tr>
<td>Refresh</td>
<td>指明浏览器每隔多久请求更新一次页面。</td>
</tr>
<tr>
<td>Retry-After</td>
<td>与503 (Service Unavailable)一起使用来告诉用户多久后请求将会得到响应</td>
</tr>
<tr>
<td>Set-Cookie</td>
<td>指明当前页面对应的cookie</td>
</tr>
</tbody></table>
<h3 id="HttpServletResponse类"><a href="#HttpServletResponse类" class="headerlink" title="HttpServletResponse类"></a>HttpServletResponse类</h3><p>response 对象是 javax.servlet.http.HttpServletResponse 类的一个实例。就像服务器会创建request对象一样，它也会创建一个客户端响应。</p>
<p>response对象定义了处理创建HTTP信息头的接口。通过使用这个对象，开发者们可以添加新的cookie或时间戳，还有HTTP状态码等等。</p>
<p>下表列出了用来设置HTTP响应头的方法，这些方法由HttpServletResponse 类提供：</p>
<table>
<thead>
<tr>
<th><strong>S.N.</strong></th>
<th><strong>方法</strong> <strong>&amp;</strong> <strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><strong>String encodeRedirectURL(String url)</strong><br>对sendRedirect()方法使用的URL进行编码</td>
</tr>
<tr>
<td>2</td>
<td><strong>String encodeURL(String url)</strong><br>将URL编码，回传包含Session ID的URL</td>
</tr>
<tr>
<td>3</td>
<td><strong>boolean containsHeader(String name)</strong><br>返回指定的响应头是否存在</td>
</tr>
<tr>
<td>4</td>
<td><strong>boolean isCommitted()</strong><br>返回响应是否已经提交到客户端</td>
</tr>
<tr>
<td>5</td>
<td><strong>void addCookie(Cookie cookie)</strong><br>添加指定的cookie至响应中</td>
</tr>
<tr>
<td>6</td>
<td><strong>void addDateHeader(String name, long date)</strong><br>添加指定名称的响应头和日期值</td>
</tr>
<tr>
<td>7</td>
<td><strong>void addHeader(String name, String value)</strong><br>添加指定名称的响应头和值</td>
</tr>
<tr>
<td>8</td>
<td><strong>void addIntHeader(String name, int value)</strong><br>添加指定名称的响应头和int值</td>
</tr>
<tr>
<td>9</td>
<td><strong>void flushBuffer()</strong><br>将任何缓存中的内容写入客户端</td>
</tr>
<tr>
<td>10</td>
<td><strong>void reset()</strong><br>清除任何缓存中的任何数据，包括状态码和各种响应头</td>
</tr>
<tr>
<td>11</td>
<td><strong>void resetBuffer()</strong><br>清除基本的缓存数据，不包括响应头和状态码</td>
</tr>
<tr>
<td>12</td>
<td><strong>void sendError(int sc)</strong><br>使用指定的状态码向客户端发送一个出错响应，然后清除缓存</td>
</tr>
<tr>
<td>13</td>
<td><strong>void sendError(int sc, String msg)</strong><br>使用指定的状态码和消息向客户端发送一个出错响应</td>
</tr>
<tr>
<td>14</td>
<td><strong>void sendRedirect(String location)</strong><br>使用指定的URL向客户端发送一个临时的间接响应</td>
</tr>
<tr>
<td>15</td>
<td><strong>void setBufferSize(int size)</strong><br>设置响应体的缓存区大小</td>
</tr>
<tr>
<td>16</td>
<td><strong>void setCharacterEncoding(String charset)</strong><br>指定响应的编码集（MIME字符集），例如UTF-8</td>
</tr>
<tr>
<td>17</td>
<td><strong>void setContentLength(int len)</strong><br>指定HTTP servlets中响应的内容的长度，此方法用来设置 HTTP Content-Length 信息头</td>
</tr>
<tr>
<td>18</td>
<td><strong>void setContentType(String type)</strong><br>设置响应的内容的类型，如果响应还未被提交的话</td>
</tr>
<tr>
<td>19</td>
<td><strong>void setDateHeader(String name, long date)</strong><br>使用指定名称和值设置响应头的名称和内容</td>
</tr>
<tr>
<td>20</td>
<td><strong>void setHeader(String name, String value)</strong><br>使用指定名称和值设置响应头的名称和内容</td>
</tr>
<tr>
<td>21</td>
<td><strong>void setIntHeader(String name, int value)</strong><br>使用指定名称和值设置响应头的名称和内容</td>
</tr>
<tr>
<td>22</td>
<td><strong>void setLocale(Locale loc)</strong><br>设置响应的语言环境，如果响应尚未被提交的话</td>
</tr>
<tr>
<td>23</td>
<td><strong>void setStatus(int sc)</strong><br>设置响应的状态码</td>
</tr>
</tbody></table>
<h3 id="HTTP响应头程序示例"><a href="#HTTP响应头程序示例" class="headerlink" title="HTTP响应头程序示例"></a>HTTP响应头程序示例</h3><h4 id="自动刷新实例"><a href="#自动刷新实例" class="headerlink" title="自动刷新实例"></a>自动刷新实例</h4><p>接下来的例子使用setIntHeader()方法和setRefreshHeader()方法来模拟一个数字时钟：</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.io.*,java.util.*"</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h2&gt;自动刷新实例&lt;/h2&gt;</span><br><span class="line">&lt;%</span><br><span class="line">   <span class="comment">// 设置每隔5秒自动刷新</span></span><br><span class="line">   response.setIntHeader(<span class="string">"Refresh"</span>, <span class="number">5</span>);</span><br><span class="line">   <span class="comment">// 获取当前时间</span></span><br><span class="line">   Calendar calendar = <span class="keyword">new</span> GregorianCalendar();</span><br><span class="line">   String am_pm;</span><br><span class="line">   <span class="keyword">int</span> hour = calendar.get(Calendar.HOUR);</span><br><span class="line">   <span class="keyword">int</span> minute = calendar.get(Calendar.MINUTE);</span><br><span class="line">   <span class="keyword">int</span> second = calendar.get(Calendar.SECOND);</span><br><span class="line">   <span class="keyword">if</span>(calendar.get(Calendar.AM_PM) == <span class="number">0</span>)</span><br><span class="line">      am_pm = <span class="string">"AM"</span>;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">      am_pm = <span class="string">"PM"</span>;</span><br><span class="line">   String CT = hour+<span class="string">":"</span>+ minute +<span class="string">":"</span>+ second +<span class="string">" "</span>+ am_pm;</span><br><span class="line">   out.println(<span class="string">"当前时间: "</span> + CT + <span class="string">"\n"</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>它将会每隔5秒显示一下系统当前时间。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://www.runoob.com/wp-content/uploads/2014/01/jsp1.gif" alt="img" title="">
                </div>
                <div class="image-caption">img</div>
            </figure>



<h2 id="JSP-HTTP-状态码"><a href="#JSP-HTTP-状态码" class="headerlink" title="JSP HTTP 状态码"></a>JSP HTTP 状态码</h2><p>HTTP请求与HTTP响应的格式相近，都有着如下结构：</p>
<ul>
<li>以状态行+CRLF（回车换行）开始</li>
<li>零行或多行头模块+CRLF</li>
<li>一个空行，比如CRLF</li>
<li>可选的消息体比如文件，查询数据，查询输出</li>
</ul>
<p>一个服务器响应头看起来就像下面这样：</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">......</span><br><span class="line">......</span><br></pre></td></tr></tbody></table></figure>

<p>状态行包含HTTP版本，一个状态码，和状态码相对应的短消息。</p>
<table>
<thead>
<tr>
<th><strong>状态码</strong></th>
<th><strong>消息</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>100</td>
<td>Continue</td>
<td>只有一部分请求被服务器接收，但只要没被服务器拒绝，客户端就会延续这个请求</td>
</tr>
<tr>
<td>101</td>
<td>Switching Protocols</td>
<td>服务器交换机协议</td>
</tr>
<tr>
<td>200</td>
<td>OK</td>
<td>请求被确认</td>
</tr>
<tr>
<td>201</td>
<td>Created</td>
<td>请求时完整的，新的资源被创建</td>
</tr>
<tr>
<td>202</td>
<td>Accepted</td>
<td>请求被接受，但未处理完</td>
</tr>
<tr>
<td>203</td>
<td>Non-authoritative Information</td>
<td></td>
</tr>
<tr>
<td>204</td>
<td>No Content</td>
<td></td>
</tr>
<tr>
<td>205</td>
<td>Reset Content</td>
<td></td>
</tr>
<tr>
<td>206</td>
<td>Partial Content</td>
<td></td>
</tr>
<tr>
<td>300</td>
<td>Multiple Choices</td>
<td>一个超链接表，用户可以选择一个超链接并访问，最大支持5个超链接</td>
</tr>
<tr>
<td>301</td>
<td>Moved Permanently</td>
<td>被请求的页面已经移动到了新的URL下</td>
</tr>
<tr>
<td>302</td>
<td>Found</td>
<td>被请求的页面暂时性地移动到了新的URL下</td>
</tr>
<tr>
<td>303</td>
<td>See Other</td>
<td>被请求的页面可以在一个不同的URL下找到</td>
</tr>
<tr>
<td>304</td>
<td>Not Modified</td>
<td></td>
</tr>
<tr>
<td>305</td>
<td>Use Proxy</td>
<td></td>
</tr>
<tr>
<td>306</td>
<td><em>Unused</em></td>
<td>已经不再使用此状态码，但状态码被保留</td>
</tr>
<tr>
<td>307</td>
<td>Temporary Redirect</td>
<td>被请求的页面暂时性地移动到了新的URL下</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request</td>
<td>服务器无法识别请求</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>被请求的页面需要用户名和密码</td>
</tr>
<tr>
<td>402</td>
<td>Payment Required</td>
<td><em>目前还不能使用此状态码</em></td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>禁止访问所请求的页面</td>
</tr>
<tr>
<td>404</td>
<td>Not Found</td>
<td>服务器无法找到所请求的页面</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed</td>
<td>请求中所指定的方法不被允许</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable</td>
<td>服务器只能创建一个客户端无法接受的响应</td>
</tr>
<tr>
<td>407</td>
<td>Proxy Authentication Required</td>
<td>在请求被服务前必须认证一个代理服务器</td>
</tr>
<tr>
<td>408</td>
<td>Request Timeout</td>
<td>请求时间超过了服务器所能等待的时间，连接被断开</td>
</tr>
<tr>
<td>409</td>
<td>Conflict</td>
<td>请求有矛盾的地方</td>
</tr>
<tr>
<td>410</td>
<td>Gone</td>
<td>被请求的页面不再可用</td>
</tr>
<tr>
<td>411</td>
<td>Length Required</td>
<td>“Content-Length”没有被定义，服务器拒绝接受请求</td>
</tr>
<tr>
<td>412</td>
<td>Precondition Failed</td>
<td>请求的前提条件被服务器评估为false</td>
</tr>
<tr>
<td>413</td>
<td>Request Entity Too Large</td>
<td>因为请求的实体太大，服务器拒绝接受请求</td>
</tr>
<tr>
<td>414</td>
<td>Request-url Too Long</td>
<td>服务器拒绝接受请求，因为URL太长。多出现在把”POST”请求转换为”GET”请求时所附带的大量查询信息</td>
</tr>
<tr>
<td>415</td>
<td>Unsupported Media Type</td>
<td>服务器拒绝接受请求，因为媒体类型不被支持</td>
</tr>
<tr>
<td>417</td>
<td>Expectation Failed</td>
<td></td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error</td>
<td>请求不完整，服务器遇见了出乎意料的状况</td>
</tr>
<tr>
<td>501</td>
<td>Not Implemented</td>
<td>请求不完整，服务器不提供所需要的功能</td>
</tr>
<tr>
<td>502</td>
<td>Bad Gateway</td>
<td>请求不完整，服务器从上游服务器接受了一个无效的响应</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable</td>
<td>请求不完整，服务器暂时重启或关闭</td>
</tr>
<tr>
<td>504</td>
<td>Gateway Timeout</td>
<td>网关超时</td>
</tr>
<tr>
<td>505</td>
<td>HTTP Version Not Supported</td>
<td>服务器不支持所指定的HTTP版本</td>
</tr>
</tbody></table>
<h3 id="设置HTTP状态码的方法"><a href="#设置HTTP状态码的方法" class="headerlink" title="设置HTTP状态码的方法"></a>设置HTTP状态码的方法</h3><p>下表列出了HttpServletResponse 类中用来设置状态码的方法：</p>
<table>
<thead>
<tr>
<th><strong>S.N.</strong></th>
<th><strong>方法</strong> <strong>&amp;</strong> <strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><strong>public void setStatus ( int statusCode )</strong><br>此方法可以设置任意的状态码。如果您的响应包含一个特殊的状态码和一个文档，请确保在用PrintWriter返回任何内容前调用setStatus方法</td>
</tr>
<tr>
<td>2</td>
<td><strong>public void sendRedirect(String url)</strong><br>此方法产生302响应，同时产生一个 <em>Location</em> 头告诉URL 一个新的文档</td>
</tr>
<tr>
<td>3</td>
<td><strong>public void sendError(int code, String message)</strong><br>此方法将一个状态码(通常为 404)和一个短消息，自动插入HTML文档中并发回给客户端</td>
</tr>
</tbody></table>
<h3 id="HTTP状态码程序示例"><a href="#HTTP状态码程序示例" class="headerlink" title="HTTP状态码程序示例"></a>HTTP状态码程序示例</h3><p>本例将会发送407错误码给浏览器，然后浏览器将会告诉您”Need authentication!!!”。</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;Setting HTTP Status Code&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">   <span class="comment">// 设置错误代码，并说明原因</span></span><br><span class="line">   response.sendError(<span class="number">407</span>, <span class="string">"Need authentication!!!"</span> );</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>访问以上JSP页面，将会得到以下结果：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://www.runoob.com/wp-content/uploads/2014/01/js_http_status_codes.jpg" alt="js_http_status_codes" title="">
                </div>
                <div class="image-caption">js_http_status_codes</div>
            </figure>



<h1 id="JSP-表单"><a href="#JSP-表单" class="headerlink" title="JSP 表单"></a>JSP 表单</h1><h2 id="JSP-表单处理"><a href="#JSP-表单处理" class="headerlink" title="JSP 表单处理"></a>JSP 表单处理</h2><p>浏览器中使用 GET 和 POST 方法向服务器提交数据。</p>
<h3 id="GET-方法"><a href="#GET-方法" class="headerlink" title="GET 方法"></a>GET 方法</h3><p>GET方法将请求的编码信息添加在网址后面，网址与编码信息通过”?”号分隔。如下所示：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//www.runoob.com/hello?key1=value1&amp;key2=value2</span></span><br></pre></td></tr></tbody></table></figure>

<p>GET方法是浏览器默认传递参数的方法，一些敏感信息，如密码等建议不使用GET方法。</p>
<p>用get时，传输数据的大小有限制 （注意不是参数的个数有限制），最大为1024字节。</p>
<h3 id="POST-方法"><a href="#POST-方法" class="headerlink" title="POST 方法"></a>POST 方法</h3><p>一些敏感信息，如密码等我们可以通过POST方法传递，POST提交数据是隐式的。</p>
<p>POST提交数据是不可见的，GET是通过在url里面传递的（可以看一下你浏览器的地址栏）。</p>
<p>JSP使用getParameter()来获得传递的参数，getInputStream()方法用来处理客户端的二进制数据流的请求。</p>
<hr>
<h3 id="JSP-读取表单数据"><a href="#JSP-读取表单数据" class="headerlink" title="JSP 读取表单数据"></a>JSP 读取表单数据</h3><ul>
<li><strong>getParameter():</strong> 使用 request.getParameter() 方法来获取表单参数的值。</li>
<li><strong>getParameterValues():</strong> 获得如checkbox类（名字相同，但值有多个）的数据。 接收数组变量 ，如checkbox类型</li>
<li><strong>getParameterNames():</strong>该方法可以取得所有变量的名称，该方法返回一个Emumeration。</li>
<li><strong>getInputStream():</strong>调用此方法来读取来自客户端的二进制数据流。</li>
</ul>
<h4 id="GET-实例"><a href="#GET-实例" class="headerlink" title="GET 实例"></a>GET 实例</h4><p>URL：<code>http://localhost:8080/testjsp/main.jsp?name=小白&amp;url=http://www.baidu.com</code></p>
<p>读取 name 表单：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">名字：&lt;%= request.getParameter(<span class="string">"name"</span>)%&gt; &lt;br /&gt;</span><br><span class="line">网址：&lt;%= request.getParameter(<span class="string">"url"</span>)%&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>运行结果：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">名字：小白</span><br><span class="line">网址：http://www.baidu.com</span><br></pre></td></tr></tbody></table></figure>

<h4 id="POST-实例"><a href="#POST-实例" class="headerlink" title="POST 实例"></a>POST 实例</h4><figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;%  <span class="comment">// 解决中文乱码的问题</span></span><br><span class="line">    String name = <span class="keyword">new</span> String((request.getParameter(<span class="string">"name"</span>)).getBytes(<span class="string">"ISO-8859-1"</span>),<span class="string">"UTF-8"</span>);</span><br><span class="line">%&gt;</span><br><span class="line">名字：&lt;%=name%&gt;</span><br><span class="line"></span><br><span class="line">网址：&lt;%= request.getParameter(<span class="string">"url"</span>)%&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>使用 <strong>new String((request.getParameter(“name”)).getBytes(“ISO-8859-1”),”UTF-8”)</strong>来转换编码，防止中文乱码的发生。</p>
<h4 id="传递-CHeckbox-实例"><a href="#传递-CHeckbox-实例" class="headerlink" title="传递 CHeckbox 实例"></a>传递 CHeckbox 实例</h4><p>HTML 代码：</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"cb"</span> <span class="attr">checked</span>=<span class="string">"checked"</span> /&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>JSP代码：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;b&gt;是否选中:&lt;/b&gt;</span><br><span class="line">&lt;%= request.getParameter(<span class="string">"cb"</span>)%&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>运行结果：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">on</span><br></pre></td></tr></tbody></table></figure>

<h4 id="读取所有表单参数"><a href="#读取所有表单参数" class="headerlink" title="读取所有表单参数"></a>读取所有表单参数</h4><p>使用 <strong>HttpServletRequest</strong> 的 <strong>getParameterNames()</strong> 来读取所有表单参数,该方法可以取得所有变量的名称，该方法返回一个枚举。</p>
<p>有了一个 Enumeration（枚举），就可以调用 hasMoreElements() 方法来确定是否还有元素，以及使用nextElement（）方法来获得每个参数的名称。</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.io.*,java.util.*"</span> %&gt;</span><br><span class="line">&lt;table width=<span class="string">"100%"</span> border=<span class="string">"1"</span> align=<span class="string">"center"</span>&gt;</span><br><span class="line">&lt;tr bgcolor=<span class="string">"#949494"</span>&gt;</span><br><span class="line">&lt;th&gt;参数名&lt;/th&gt;&lt;th&gt;参数值&lt;/th&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;%</span><br><span class="line">   Enumeration paramNames = request.getParameterNames();</span><br><span class="line"></span><br><span class="line">   <span class="keyword">while</span>(paramNames.hasMoreElements()) {</span><br><span class="line">      String paramName = (String)paramNames.nextElement();</span><br><span class="line">      out.print(<span class="string">"&lt;tr&gt;&lt;td&gt;"</span> + paramName + <span class="string">"&lt;/td&gt;\n"</span>);</span><br><span class="line">      String paramValue = request.getParameter(paramName);</span><br><span class="line">      out.println(<span class="string">"&lt;td&gt; "</span> + paramValue + <span class="string">"&lt;/td&gt;&lt;/tr&gt;\n"</span>);</span><br><span class="line">   }</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/table&gt;</span><br></pre></td></tr></tbody></table></figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://www.runoob.com/wp-content/uploads/2014/01/jsp5.gif" alt="运行结果" title="">
                </div>
                <div class="image-caption">运行结果</div>
            </figure>



<h2 id="JSP-过滤器"><a href="#JSP-过滤器" class="headerlink" title="JSP 过滤器"></a>JSP 过滤器</h2><p>过滤器可以动态地拦截请求和响应，以变换或使用包含在请求或响应中的信息。</p>
<h3 id="Servlet-过滤器方法"><a href="#Servlet-过滤器方法" class="headerlink" title="Servlet 过滤器方法"></a>Servlet 过滤器方法</h3><p>过滤器是一个实现了 javax.servlet.Filter 接口的 Java 类。javax.servlet.Filter 接口定义了三个方法：</p>
<table>
<thead>
<tr>
<th>序号</th>
<th>方法 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><strong>public void doFilter (ServletRequest, ServletResponse, FilterChain)</strong><br>该方法完成实际的过滤操作，当客户端请求方法与过滤器设置匹配的URL时，Servlet容器将先调用过滤器的doFilter方法。FilterChain用户访问后续过滤器。</td>
</tr>
<tr>
<td>2</td>
<td><strong>public void init(FilterConfig filterConfig)</strong><br>web 应用程序启动时，web 服务器将创建Filter 的实例对象，并调用其init方法，读取web.xml配置，完成对象的初始化功能，从而为后续的用户请求作好拦截的准备工作（filter对象只会创建一次，init方法也只会执行一次）。开发人员通过init方法的参数，可获得代表当前filter配置信息的FilterConfig对象。</td>
</tr>
<tr>
<td>3</td>
<td><strong>public void destroy()</strong><br>Servlet容器在销毁过滤器实例前调用该方法，在该方法中释放Servlet过滤器占用的资源。</td>
</tr>
</tbody></table>
<h4 id="FilterConfig-使用"><a href="#FilterConfig-使用" class="headerlink" title="FilterConfig 使用"></a>FilterConfig 使用</h4><p>Filter 的 init 方法中提供了一个 FilterConfig 对象。</p>
<p>如 web.xml 文件配置如下：</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>LoginFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.runoob.test.LogFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>Site<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>菜鸟教程<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>在 init 方法使用 FilterConfig 对象获取参数：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">init</span><span class="params">(FilterConfig config)</span> <span class="keyword">throws</span> ServletException </span>{</span><br><span class="line">    <span class="comment">// 获取初始化参数</span></span><br><span class="line">    String site = config.getInitParameter(<span class="string">"Site"</span>); </span><br><span class="line">    <span class="comment">// 输出初始化参数</span></span><br><span class="line">    System.out.println(<span class="string">"网站名称: "</span> + site); </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h4 id="JSP-过滤器实例"><a href="#JSP-过滤器实例" class="headerlink" title="JSP 过滤器实例"></a>JSP 过滤器实例</h4><p><a href="https://www.runoob.com/jsp/jsp-writing-filters.html" target="_blank" rel="noopener">https://www.runoob.com/jsp/jsp-writing-filters.html</a></p>
<h3 id="使用多个过滤器"><a href="#使用多个过滤器" class="headerlink" title="使用多个过滤器"></a>使用多个过滤器</h3><p>网址同上</p>
<h2 id="Cookie-处理"><a href="#Cookie-处理" class="headerlink" title="Cookie 处理"></a>Cookie 处理</h2><p>JSP Cookie 处理需要对中文进行编码与解码，方法如下：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String str = java.net.URLEncoder.encode(<span class="string">"中文"</span>，<span class="string">"UTF-8"</span>); <span class="comment">//编码</span></span><br><span class="line">String str = java.net.URLDecoder.decode(<span class="string">"编码后的字符串"</span>,<span class="string">"UTF-8"</span>); <span class="comment">// 解码</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="Cookie-剖析"><a href="#Cookie-剖析" class="headerlink" title="Cookie 剖析"></a>Cookie 剖析</h3><p>HTTP 信息头</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">HTTP/<span class="number">1.1</span> <span class="number">200</span> OK</span><br><span class="line">Date: Fri, <span class="number">04</span> Feb <span class="number">2015</span> <span class="number">21</span>:<span class="number">03</span>:<span class="number">38</span> GMT</span><br><span class="line">Server: Apache/<span class="number">1.3</span>.9 (UNIX) PHP/<span class="number">4.0</span>b3</span><br><span class="line">Set-Cookie: name=runoob; expires=Friday, <span class="number">04</span>-Feb-<span class="number">07</span> <span class="number">22</span>:<span class="number">03</span>:<span class="number">38</span> GMT; </span><br><span class="line">                 path=/; domain=runoob.com</span><br><span class="line">Connection: close</span><br><span class="line">Content-Type: text/html</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Servlet-Cookie-方法"><a href="#Servlet-Cookie-方法" class="headerlink" title="Servlet Cookie 方法"></a>Servlet Cookie 方法</h3><table>
<thead>
<tr>
<th><strong>序号</strong></th>
<th><strong>方法</strong> <strong>&amp;</strong> <strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><strong>public void setDomain(String pattern)</strong><br>设置cookie的域名，比如 runoob.com</td>
</tr>
<tr>
<td>2</td>
<td><strong>public String getDomain()<br></strong>获取cookie的域名，比如 runoob.com</td>
</tr>
<tr>
<td>3</td>
<td><strong>public void setMaxAge(int expiry)</strong><br>设置cookie有效期，以秒为单位，默认有效期为当前session的存活时间</td>
</tr>
<tr>
<td>4</td>
<td><strong>public int getMaxAge()<br></strong>获取cookie有效期，以秒为单位，默认为-1 ，表明cookie会活到浏览器关闭为止</td>
</tr>
<tr>
<td>5</td>
<td><strong>public String getName()<br></strong>返回 cookie的名称，名称创建后将不能被修改</td>
</tr>
<tr>
<td>6</td>
<td><strong>public void setValue(String newValue)<br></strong>设置 cookie的值</td>
</tr>
<tr>
<td>7</td>
<td><strong>public String getValue()<br></strong>获取cookie的值</td>
</tr>
<tr>
<td>8</td>
<td><strong>public void setPath(String uri)<br></strong>设置cookie 的路径，默认为当前页面目录下的所有URL，还有此目录下的所有子目录</td>
</tr>
<tr>
<td>9</td>
<td><strong>public String getPath()<br></strong>获取cookie 的路径</td>
</tr>
<tr>
<td>10</td>
<td><strong>public void setSecure(boolean flag)<br></strong>指明cookie是否要加密传输</td>
</tr>
<tr>
<td>11</td>
<td><strong>public void setComment(String purpose)<br></strong>设置注释描述 cookie的目的。当浏览器将cookie展现给用户时，注释将会变得非常有用</td>
</tr>
<tr>
<td>12</td>
<td><strong>public String getComment()</strong><br>返回描述cookie目的的注释，若没有则返回null</td>
</tr>
</tbody></table>
<h3 id="设置-Cookie"><a href="#设置-Cookie" class="headerlink" title="设置 Cookie"></a>设置 Cookie</h3><p>使用JSP设置cookie包含三个步骤：</p>
<p>*<em>(1)创建一个Cookie对象： *</em>调用Cookie的构造函数，使用一个cookie名称和值做参数，它们都是字符串。</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">"key"</span>,<span class="string">"value"</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>请务必牢记，名称和值中都不能包含空格或者如下的字符：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ ] ( ) = , " / ? @ : ;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>(2) 设置有效期：</strong>调用setMaxAge()函数表明cookie在多长时间（以秒为单位）内有效。下面的操作将有效期设为了24小时。</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cookie.setMaxAge(<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>);</span><br></pre></td></tr></tbody></table></figure>

<p><strong>(3) 将cookie发送至HTTP响应头中：</strong>调用response.addCookie()函数来向HTTP响应头中添加cookie。</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.addCookie(cookie);</span><br></pre></td></tr></tbody></table></figure>

<p><strong>Cookie 实例</strong></p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.net.*"</span> %&gt;</span><br><span class="line">&lt;%</span><br><span class="line">   <span class="comment">// 读取表单提交的 name 内容，并解决中文乱码</span></span><br><span class="line">   String str = URLEncoder.encode(request.getParameter(<span class="string">"name"</span>),<span class="string">"utf-8"</span>);  </span><br><span class="line">   <span class="comment">// 设置 name cookie </span></span><br><span class="line">   Cookie name = <span class="keyword">new</span> Cookie(<span class="string">"name"</span>, str);、</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 设置cookie过期时间为24小时。</span></span><br><span class="line">   name.setMaxAge(<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>);</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 在响应头部添加cookie</span></span><br><span class="line">   response.addCookie( name );</span><br><span class="line">%&gt;</span><br><span class="line">&lt;p&gt;名字: &lt;%= request.getParameter("name")%&gt;&lt;/p&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="读取-Cookie"><a href="#读取-Cookie" class="headerlink" title="读取 Cookie"></a>读取 Cookie</h3><p>调用<strong>request.getCookies()</strong>方法来获得一个javax.servlet.http.Cookie对象的数组，然后遍历这个数组，使用<strong>getName()</strong>方法和<strong>getValue()</strong>方法来获取每一个cookie的名称和值。</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.net.*"</span> %&gt;</span><br><span class="line">&lt;%</span><br><span class="line">     Cookie cookie = <span class="keyword">null</span>;</span><br><span class="line">     Cookie[] cookies = <span class="keyword">null</span>;</span><br><span class="line">     <span class="comment">// 获取cookies的数据,是一个数组</span></span><br><span class="line">     cookies = request.getCookies();</span><br><span class="line">     <span class="keyword">if</span>( cookies != <span class="keyword">null</span> ){</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cookies.length; i++)</span><br><span class="line">          {</span><br><span class="line">               cookie = cookies[i];</span><br><span class="line"></span><br><span class="line">               out.print(<span class="string">"参数名 : "</span> + cookie.getName() + <span class="string">"&lt;br&gt;"</span>);</span><br><span class="line">               out.print(<span class="string">"参数值: "</span> + URLDecoder.decode(cookie.getValue(), <span class="string">"utf-8"</span>) +<span class="string">" &lt;br&gt;"</span>);</span><br><span class="line">          }</span><br><span class="line">      }</span><br><span class="line">%&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="删除-Cookie"><a href="#删除-Cookie" class="headerlink" title="删除 Cookie"></a>删除 Cookie</h3><p>将cookie的有效期设置为0</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">     Cookie cookie = <span class="keyword">null</span>;</span><br><span class="line">     Cookie[] cookies = <span class="keyword">null</span>;</span><br><span class="line">     <span class="comment">// 获取当前域名下的cookies，是一个数组</span></span><br><span class="line">     cookies = request.getCookies();</span><br><span class="line">     <span class="keyword">if</span>( cookies != <span class="keyword">null</span> )</span><br><span class="line">     {</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cookies.length; i++)</span><br><span class="line">          {</span><br><span class="line">               cookie = cookies[i];</span><br><span class="line">               <span class="comment">// 确保存在 Cookie</span></span><br><span class="line">               <span class="keyword">if</span>((cookie.getName()).compareTo(<span class="string">"name"</span>) == <span class="number">0</span> )</span><br><span class="line">               {</span><br><span class="line">                    cookie.setMaxAge(<span class="number">0</span>);</span><br><span class="line">                    response.addCookie(cookie);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">               }</span><br><span class="line">          }</span><br><span class="line">    }</span><br><span class="line">%&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="JSP-Session"><a href="#JSP-Session" class="headerlink" title="JSP Session"></a>JSP Session</h2><p>有三种方法来维持客户端与服务器的会话：</p>
<p><strong>Cookies</strong></p>
<p>网络服务器可以指定一个唯一的session ID作为cookie来代表每个客户端，用来识别这个客户端接下来的请求。(很多时候浏览器并不一定支持cookie，所以不建议)</p>
<p><strong>隐藏表单域</strong></p>
<p>一个网络服务器可以发送一个隐藏的HTML表单域和一个唯一的session ID</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"sessionid"</span> <span class="attr">value</span>=<span class="string">"12345"</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>当表单被提交时，指定的名称和值将会自动包含在GET或POST数据中。每当浏览器发送一个请求，session_id的值就可以用来保存不同浏览器的轨迹。</p>
<p>可能比较有效，但是点击<code>&lt;A HREF&gt;</code>标签中的超链接时不会产生表单提交事件，因此隐藏表单域也不支持通用会话跟踪。</p>
<p><strong>重写URL</strong></p>
<p>在每个URL后面添加一些额外的数据来区分会话，服务器能够根据这些数据来关联session标识符。</p>
<p>举例来说，<a href="http://w3cschool.cc/file.htm;sessionid=12345，" target="_blank" rel="noopener">http://w3cschool.cc/file.htm;sessionid=12345，</a> session标识符为sessionid=12345，服务器可以用这个数据来识别客户端。</p>
<p>相比而言，重写URL是更好的方式，就算浏览器不支持cookies也能工作，但缺点是您必须为每个URL动态指定session ID，就算这是个简单的HTML页面。</p>
<h3 id="session对象-1"><a href="#session对象-1" class="headerlink" title="session对象"></a>session对象</h3><p>默认情况下，JSP允许会话跟踪，一个新的HttpSession对象将会自动地为新的客户端实例化。禁止会话跟踪需要显式地关掉它，通过将page指令中session属性值设为false来实现，就像下面这样：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page session=<span class="string">"false"</span> %&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>JSP引擎将隐含的session对象暴露给开发者。由于提供了session对象，开发者就可以方便地存储或检索数据。</p>
<p>ession对象的一些重要方法：</p>
<table>
<thead>
<tr>
<th><strong>S.N.</strong></th>
<th><strong>方法</strong> <strong>&amp;</strong> <strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><strong>public Object getAttribute(String name)</strong><br>返回session对象中与指定名称绑定的对象，如果不存在则返回null</td>
</tr>
<tr>
<td>2</td>
<td><strong>public Enumeration getAttributeNames()<br></strong>返回session对象中所有的对象名称</td>
</tr>
<tr>
<td>3</td>
<td><strong>public long getCreationTime()<br></strong>返回session对象被创建的时间， 以毫秒为单位，从1970年1月1号凌晨开始算起</td>
</tr>
<tr>
<td>4</td>
<td><strong>public String getId()<br></strong>返回session对象的ID</td>
</tr>
<tr>
<td>5</td>
<td><strong>public long getLastAccessedTime()<br></strong>返回客户端最后访问的时间，以毫秒为单位，从1970年1月1号凌晨开始算起</td>
</tr>
<tr>
<td>6</td>
<td><strong>public int getMaxInactiveInterval()<br></strong>返回最大时间间隔，以秒为单位，servlet 容器将会在这段时间内保持会话打开</td>
</tr>
<tr>
<td>7</td>
<td><strong>public void invalidate()<br></strong>将session无效化，解绑任何与该session绑定的对象</td>
</tr>
<tr>
<td>8</td>
<td><strong>public boolean isNew()<br></strong>返回是否为一个新的客户端，或者客户端是否拒绝加入session</td>
</tr>
<tr>
<td>9</td>
<td><strong>public void removeAttribute(String name)</strong><br>移除session中指定名称的对象</td>
</tr>
<tr>
<td>10</td>
<td><strong>public void setAttribute(String name, Object value) <br></strong>使用指定的名称和值来产生一个对象并绑定到session中</td>
</tr>
<tr>
<td>11</td>
<td><strong>public void setMaxInactiveInterval(int interval)</strong><br>用来指定时间，以秒为单位，servlet容器将会在这段时间内保持会话有效</td>
</tr>
</tbody></table>
<h4 id="Session-实例"><a href="#Session-实例" class="headerlink" title="Session 实例"></a>Session 实例</h4><p>如何使用HttpSession对象来获取创建时间和最后一次访问时间：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.io.*,java.util.*"</span> %&gt;</span><br><span class="line">&lt;%</span><br><span class="line">   <span class="comment">// 获取session创建时间</span></span><br><span class="line">   Date createTime = <span class="keyword">new</span> Date(session.getCreationTime());</span><br><span class="line">   <span class="comment">// 获取最后访问页面的时间</span></span><br><span class="line">   Date lastAccessTime = <span class="keyword">new</span> Date(session.getLastAccessedTime());</span><br><span class="line"></span><br><span class="line">   String title = <span class="string">"再次访问"</span>;</span><br><span class="line">   Integer visitCount = <span class="keyword">new</span> Integer(<span class="number">0</span>);</span><br><span class="line">   String visitCountKey = <span class="keyword">new</span> String(<span class="string">"visitCount"</span>);</span><br><span class="line">   String userIDKey = <span class="keyword">new</span> String(<span class="string">"userID"</span>);</span><br><span class="line">   String userID = <span class="keyword">new</span> String(<span class="string">"ABCD"</span>);</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 检测网页是否由新的访问用户</span></span><br><span class="line">   <span class="keyword">if</span> (session.isNew()){</span><br><span class="line">      title = <span class="string">"访问"</span>;</span><br><span class="line">      session.setAttribute(userIDKey, userID);</span><br><span class="line">      session.setAttribute(visitCountKey,  visitCount);</span><br><span class="line">   } <span class="keyword">else</span> {</span><br><span class="line">       visitCount = (Integer)session.getAttribute(visitCountKey);</span><br><span class="line">	   <span class="keyword">if</span> (visitCount == <span class="keyword">null</span>) visitCount = <span class="number">0</span>; <span class="comment">// 实测可能会是 null</span></span><br><span class="line">       visitCount++;</span><br><span class="line">       userID = (String)session.getAttribute(userIDKey);</span><br><span class="line">       session.setAttribute(visitCountKey,  visitCount);</span><br><span class="line">   }</span><br><span class="line">%&gt;</span><br><span class="line">　　id　　　：&lt;% out.print( session.getId()); %&gt;   &lt;br /&gt;</span><br><span class="line">　创建时间　：&lt;% out.print(createTime); %&gt;         &lt;br /&gt;</span><br><span class="line">最后访问时间：&lt;% out.print(lastAccessTime); %&gt;     &lt;br /&gt;</span><br><span class="line">　用户 ID 　：&lt;% out.print(userID); %&gt;             &lt;br /&gt;</span><br><span class="line">　访问次数　：&lt;% out.print(visitCount); %&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="删除-Session-数据"><a href="#删除-Session-数据" class="headerlink" title="删除 Session 数据"></a>删除 Session 数据</h3><p>当处理完一个用户的会话数据后，您可以有如下选择：</p>
<ul>
<li><p>移除一个特定的属性：</p>
<p>调用public void removeAttribute(String name)  方法来移除指定的属性。</p>
</li>
<li><p>删除整个会话：</p>
<p>调用public void invalidate() 方法来使整个session无效。</p>
</li>
<li><p>设置会话有效期：</p>
<p>调用 public void setMaxInactiveInterval(int interval)  方法来设置session超时。</p>
</li>
<li><p>登出用户：</p>
<p>支持servlet2.4版本的服务器，可以调用 logout()方法来登出用户，并且使所有相关的session无效。</p>
</li>
<li><p>配置web.xml文件：</p>
<p>如果使用的是Tomcat，可以向下面这样配置web.xml文件：</p>
</li>
</ul>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>15<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>超时以分钟为单位，Tomcat中的默认的超时时间是30分钟。</p>
<p>Servlet中的getMaxInactiveInterval( ) 方法以秒为单位返回超时时间。如果在web.xml中配置的是15分钟，则getMaxInactiveInterval( ) 方法将会返回900。</p>
<h2 id="JSP-文件上传"><a href="#JSP-文件上传" class="headerlink" title="JSP 文件上传"></a>JSP 文件上传</h2><p><a href="https://www.runoob.com/jsp/jsp-file-uploading.html" target="_blank" rel="noopener">https://www.runoob.com/jsp/jsp-file-uploading.html</a></p>
<p>HTML 代码创建一个文件上传表单。以下几点需要注意：</p>
<ul>
<li>表单 <strong>method</strong> 属性应该设置为 <strong>POST</strong> 方法，不能使用 GET 方法。</li>
<li>表单 <strong>enctype</strong> 属性应该设置为 <strong>multipart/form-data</strong>.</li>
<li>表单 <strong>action</strong> 属性应该设置为在后端服务器上处理文件上传的 Servlet 文件。下面的实例使用了 <strong>UploadServlet</strong> Servlet 来上传文件。</li>
<li>上传单个文件，您应该使用单个带有属性 type=”file” 的 &lt;input …/&gt; 标签。为了允许多个文件上传，请包含多个 name 属性值不同的 input 标签。输入标签具有不同的名称属性的值。浏览器会为每个 input 标签关联一个浏览按钮。</li>
</ul>
<p>upload.jsp 文件代码如下：</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span></span><br><span class="line">    <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</span><br><span class="line">&lt;form method=<span class="string">"post"</span> action=<span class="string">"/TomcatTest/UploadServlet"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">选择一个文件:&lt;input type=<span class="string">"file"</span> name=<span class="string">"uploadFile"</span> /&gt;</span><br><span class="line">    &lt;br/&gt;&lt;br/&gt;</span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"上传"</span> /&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="编写后台-Servlet"><a href="#编写后台-Servlet" class="headerlink" title="编写后台 Servlet"></a>编写后台 Servlet</h3><p>见上方网址</p>
<p>message.jsp 文件代码如下：</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span></span><br><span class="line">    <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span><br><span class="line">&lt;title&gt;文件上传结果&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;center&gt;</span><br><span class="line">        &lt;h2&gt;${message}&lt;/h2&gt;</span><br><span class="line">    &lt;/center&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="编译和运行-Servlet"><a href="#编译和运行-Servlet" class="headerlink" title="编译和运行 Servlet"></a>编译和运行 Servlet</h3><p>编译上面的 Servlet UploadServlet，并在 web.xml 文件中创建所需的条目，如下所示：</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:web</span>=<span class="string">"http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/javaee</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">"WebApp_ID"</span> <span class="attr">version</span>=<span class="string">"2.5"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>UploadServlet<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>UploadServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.UploadServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>UploadServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/UploadServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h1 id="JSP-功能"><a href="#JSP-功能" class="headerlink" title="JSP 功能"></a>JSP 功能</h1><h2 id="JSP-日期"><a href="#JSP-日期" class="headerlink" title="JSP 日期"></a>JSP 日期</h2><p>第一个构造函数使用当前日期和时间来初始化对象。</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Date()</span><br></pre></td></tr></tbody></table></figure>

<p>第二个构造函数接受一个参数，这个参数表示从1970年1月1日凌晨至所要表示时间的毫秒数。</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Date(<span class="keyword">long</span> millisec)</span><br></pre></td></tr></tbody></table></figure>

<p>获取Date对象后，您就能够使用下表列出的所有方法：</p>
<table>
<thead>
<tr>
<th><strong>序号</strong></th>
<th><strong>方法</strong> <strong>&amp;</strong> <strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><strong>boolean after(Date date)</strong><br>如果比给定的日期晚，则返回true，否则返回false</td>
</tr>
<tr>
<td>2</td>
<td><strong>boolean before(Date date)<br></strong>如果比给定的日期早，则返回true，否则返回false</td>
</tr>
<tr>
<td>3</td>
<td><strong>Object clone( )<br></strong>获取当前对象的一个副本</td>
</tr>
<tr>
<td>4</td>
<td><strong>int compareTo(Date date)<br></strong>如果与给定日期相等，则返回0，如果比给定日期早，则返回一个负数，如果比给定日期晚，则返回一个正数</td>
</tr>
<tr>
<td>5</td>
<td><strong>int compareTo(Object obj)<br></strong>与 compareTo(Date) 方法相同，如果 obj 不是Date类或其子类的对象，抛出ClassCastException异常</td>
</tr>
<tr>
<td>6</td>
<td><strong>boolean equals(Object date)</strong><br>如果与给定日期相同，则返回true，否则返回false</td>
</tr>
<tr>
<td>7</td>
<td><strong>long getTime( )<br></strong>返回从1970年1月1日凌晨至此对象所表示时间的毫秒数</td>
</tr>
<tr>
<td>8</td>
<td><strong>int hashCode( )<br></strong>返回此对象的哈希码</td>
</tr>
<tr>
<td>9</td>
<td><strong>void setTime(long time)<br></strong>使用给定参数设置时间和日期，参数time表示从1970年1月1日凌晨至time所经过的毫秒数</td>
</tr>
<tr>
<td>10</td>
<td><strong>String toString( )<br></strong>将此对象转换为字符串并返回这个字符串</td>
</tr>
</tbody></table>
<h2 id="获取当前日期和时间"><a href="#获取当前日期和时间" class="headerlink" title="获取当前日期和时间"></a>获取当前日期和时间</h2><p>使用JSP编程可以很容易的获取当前日期和时间，使用Date对象的toString()方法</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.util.*"</span> %&gt;</span><br><span class="line">&lt;%</span><br><span class="line">   Date date = <span class="keyword">new</span> Date();</span><br><span class="line">   out.print( <span class="string">"&lt;h2 align=\"center\"&gt;"</span> +date.toString()+<span class="string">"&lt;/h2&gt;"</span>);</span><br><span class="line">%&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>运行结果：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Sat Jun 25 17:54:34 CST 2016</span><br></pre></td></tr></tbody></table></figure>

<h3 id="日期比较"><a href="#日期比较" class="headerlink" title="日期比较"></a>日期比较</h3><p>比较两个日期</p>
<ul>
<li>使用getTime()方法得到毫秒数，然后比较毫秒数就行了。</li>
<li>使用before()，after()，equals()方法。比如，new Date(99,2,12).before(new Date(99,2,18))返回true。</li>
<li>使用compareTo()方法，这个方法在Comparable接口中定义，在Date中实现。</li>
</ul>
<h3 id="使用SimpleDateFormat格式化日期"><a href="#使用SimpleDateFormat格式化日期" class="headerlink" title="使用SimpleDateFormat格式化日期"></a>使用SimpleDateFormat格式化日期</h3><p>SimpleDateFormat使用一种地区敏感的方式来格式化和解析日期，它允许您使用自定义的模式来格式化日期和时间。</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.io.*,java.util.*,javax.servlet.*,java.text.*"</span> %&gt;</span><br><span class="line">&lt;%</span><br><span class="line">   Date dNow = <span class="keyword">new</span> Date( );</span><br><span class="line">   SimpleDateFormat ft = </span><br><span class="line">   <span class="keyword">new</span> SimpleDateFormat (<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line">   out.print( <span class="string">"&lt;h2 align=\"center\"&gt;"</span> + ft.format(dNow) + <span class="string">"&lt;/h2&gt;"</span>);</span><br><span class="line">%&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>运行结果：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2016-06-25 17:57:53</span><br></pre></td></tr></tbody></table></figure>

<h3 id="SimpleDateFormat格式码"><a href="#SimpleDateFormat格式码" class="headerlink" title="SimpleDateFormat格式码"></a>SimpleDateFormat格式码</h3><p>要指定模式字符串，需要使用下表列出的格式码：</p>
<table>
<thead>
<tr>
<th><strong>字符</strong></th>
<th><strong>描述</strong></th>
<th><strong>示例</strong></th>
</tr>
</thead>
<tbody><tr>
<td>G</td>
<td>时代标识符</td>
<td>AD</td>
</tr>
<tr>
<td>y</td>
<td>4位数年份</td>
<td>2001</td>
</tr>
<tr>
<td>M</td>
<td>月</td>
<td>July or 07</td>
</tr>
<tr>
<td>d</td>
<td>日</td>
<td>10</td>
</tr>
<tr>
<td>h</td>
<td>12小时制， A.M./P.M. (1~12)</td>
<td>12</td>
</tr>
<tr>
<td>H</td>
<td>24小时制</td>
<td>22</td>
</tr>
<tr>
<td>m</td>
<td>分钟</td>
<td>30</td>
</tr>
<tr>
<td>s</td>
<td>秒</td>
<td>55</td>
</tr>
<tr>
<td>S</td>
<td>毫秒</td>
<td>234</td>
</tr>
<tr>
<td>E</td>
<td>星期</td>
<td>Tuesday</td>
</tr>
<tr>
<td>D</td>
<td>一年中的某天</td>
<td>360</td>
</tr>
<tr>
<td>F</td>
<td>一个月中某星期的某天</td>
<td>2 (second Wed. in July)</td>
</tr>
<tr>
<td>w</td>
<td>一年中的某星期</td>
<td>40</td>
</tr>
<tr>
<td>W</td>
<td>一个月中的某星期</td>
<td>1</td>
</tr>
<tr>
<td>a</td>
<td>A.M./P.M. 标记</td>
<td>PM</td>
</tr>
<tr>
<td>k</td>
<td>一天中的某个小时 (1~24)</td>
<td>24</td>
</tr>
<tr>
<td>K</td>
<td>一天中的某个小时，A.M./P.M. (0~11)</td>
<td>10</td>
</tr>
<tr>
<td>z</td>
<td>时区</td>
<td>Eastern Standard Time</td>
</tr>
<tr>
<td>‘</td>
<td>文本分隔</td>
<td>Delimiter</td>
</tr>
<tr>
<td>“</td>
<td>单引号</td>
<td>`</td>
</tr>
</tbody></table>
<h2 id="JSP-页面重定向"><a href="#JSP-页面重定向" class="headerlink" title="JSP 页面重定向"></a>JSP 页面重定向</h2><figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.io.*,java.util.*"</span> %&gt;</span><br><span class="line">&lt;%</span><br><span class="line">   String site = <span class="keyword">new</span> String(<span class="string">"http://www.runoob.com"</span>);</span><br><span class="line">   response.setStatus(response.SC_MOVED_TEMPORARILY);</span><br><span class="line">   response.setHeader(<span class="string">"Location"</span>, site); </span><br><span class="line">%&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="JSP-点击量统计"><a href="#JSP-点击量统计" class="headerlink" title="JSP 点击量统计"></a>JSP 点击量统计</h2><p>利用应用程序隐式对象和相关方法getAttribute()和setAttribute()来实现</p>
<p>在应用中创建变量的语法：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">application.setAttribute(String Key, Object Value);</span><br></pre></td></tr></tbody></table></figure>

<p>读取变量的方法如下：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">application.getAttribute(String Key);</span><br></pre></td></tr></tbody></table></figure>

<p><strong>点击量统计实例</strong>：</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.io.*,java.util.*"</span> %&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    Integer hitsCount = (Integer)application.getAttribute(<span class="string">"hitCounter"</span>);</span><br><span class="line">    <span class="keyword">if</span>( hitsCount ==<span class="keyword">null</span> || hitsCount == <span class="number">0</span> )</span><br><span class="line">    {</span><br><span class="line">        <span class="comment">/* 第一次访问 */</span></span><br><span class="line">        out.println(<span class="string">"欢迎访问!"</span>);</span><br><span class="line">        hitsCount = <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">    {</span><br><span class="line">        <span class="comment">/* 返回访问值 */</span></span><br><span class="line">        out.println(<span class="string">"欢迎再次访问!"</span>);</span><br><span class="line">        hitsCount += <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    application.setAttribute(<span class="string">"hitCounter"</span>, hitsCount);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;页面访问量为: &lt;%= hitsCount%&gt;&lt;/p&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="复位计数器"><a href="#复位计数器" class="headerlink" title="复位计数器"></a>复位计数器</h3><p>使用以上方法，在 web 服务器重启后，计数器会被复位为 0，即前面保留的数据都会消失。可以使用数据库或者文件来保存。</p>
<h2 id="JSP-自动刷新"><a href="#JSP-自动刷新" class="headerlink" title="JSP 自动刷新"></a>JSP 自动刷新</h2><p>方法的签名如下：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setIntHeader</span><span class="params">(String header, <span class="keyword">int</span> headerValue)</span></span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>自动刷新实例</strong>：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.io.*,java.util.*"</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">   <span class="comment">// 设置每隔5秒刷新一次</span></span><br><span class="line">   response.setIntHeader(<span class="string">"Refresh"</span>, <span class="number">5</span>);</span><br><span class="line">   <span class="comment">// 获取当前时间</span></span><br><span class="line">   Calendar calendar = <span class="keyword">new</span> GregorianCalendar();</span><br><span class="line">   String am_pm;</span><br><span class="line">   <span class="keyword">int</span> hour = calendar.get(Calendar.HOUR);</span><br><span class="line">   <span class="keyword">int</span> minute = calendar.get(Calendar.MINUTE);</span><br><span class="line">   <span class="keyword">int</span> second = calendar.get(Calendar.SECOND);</span><br><span class="line">   <span class="keyword">if</span>(calendar.get(Calendar.AM_PM) == <span class="number">0</span>)</span><br><span class="line">      am_pm = <span class="string">"AM"</span>;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">      am_pm = <span class="string">"PM"</span>;</span><br><span class="line">   String CT = hour+<span class="string">":"</span>+ minute +<span class="string">":"</span>+ second +<span class="string">" "</span>+ am_pm;</span><br><span class="line">   out.println(<span class="string">"当前时间为: "</span> + CT + <span class="string">"\n"</span>);</span><br><span class="line">%&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>运行结果：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">当前时间为: 6:5:36 PM</span><br></pre></td></tr></tbody></table></figure>

<h2 id="JSP-发送邮件"><a href="#JSP-发送邮件" class="headerlink" title="JSP 发送邮件"></a>JSP 发送邮件</h2><p><a href="https://www.runoob.com/jsp/jsp-sending-email.html" target="_blank" rel="noopener">https://www.runoob.com/jsp/jsp-sending-email.html</a></p>
<h3 id="发送简单的邮件"><a href="#发送简单的邮件" class="headerlink" title="发送简单的邮件"></a>发送简单的邮件</h3><figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.io.*,java.util.*,javax.mail.*"</span>%&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"javax.mail.internet.*,javax.activation.*"</span>%&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"javax.servlet.http.*,javax.servlet.*"</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">   String result;</span><br><span class="line">   <span class="comment">// 收件人的电子邮件</span></span><br><span class="line">   String to = <span class="string">"abcd@gmail.com"</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 发件人的电子邮件</span></span><br><span class="line">   String from = <span class="string">"mcmohd@gmail.com"</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 假设你是从本地主机发送电子邮件</span></span><br><span class="line">   String host = <span class="string">"localhost"</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 获取系统属性对象</span></span><br><span class="line">   Properties properties = System.getProperties();</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 设置邮件服务器</span></span><br><span class="line">   properties.setProperty(<span class="string">"mail.smtp.host"</span>, host);</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 获取默认的Session对象。</span></span><br><span class="line">   Session mailSession = Session.getDefaultInstance(properties);</span><br><span class="line"></span><br><span class="line">   <span class="keyword">try</span>{</span><br><span class="line">      <span class="comment">// 创建一个默认的MimeMessage对象。</span></span><br><span class="line">      MimeMessage message = <span class="keyword">new</span> MimeMessage(mailSession);</span><br><span class="line">      <span class="comment">// 设置 From: 头部的header字段</span></span><br><span class="line">      message.setFrom(<span class="keyword">new</span> InternetAddress(from));</span><br><span class="line">      <span class="comment">// 设置 To: 头部的header字段</span></span><br><span class="line">      message.addRecipient(Message.RecipientType.TO,</span><br><span class="line">                               <span class="keyword">new</span> InternetAddress(to));</span><br><span class="line">      <span class="comment">// 设置 Subject: header字段</span></span><br><span class="line">      message.setSubject(<span class="string">"This is the Subject Line!"</span>);</span><br><span class="line">      <span class="comment">// 现在设置的实际消息</span></span><br><span class="line">      message.setText(<span class="string">"This is actual message"</span>);</span><br><span class="line">      <span class="comment">// 发送消息</span></span><br><span class="line">      Transport.send(message);</span><br><span class="line">      result = <span class="string">"Sent message successfully...."</span>;</span><br><span class="line">   }<span class="keyword">catch</span> (MessagingException mex) {</span><br><span class="line">      mex.printStackTrace();</span><br><span class="line">      result = <span class="string">"Error: unable to send message...."</span>;</span><br><span class="line">   }</span><br><span class="line">%&gt;</span><br><span class="line">&lt;% </span><br><span class="line">   out.println(<span class="string">"Result: "</span> + result + <span class="string">"\n"</span>);</span><br><span class="line">%&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>发送给多人：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addRecipients</span><span class="params">(Message.RecipientType type, </span></span></span><br><span class="line"><span class="function"><span class="params">                   Address[] addresses)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> MessagingException</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="HTML-邮件、附件"><a href="#HTML-邮件、附件" class="headerlink" title="HTML 邮件、附件"></a>HTML 邮件、附件</h3><p>见上方网址</p>
<h1 id="JSP-高级教程"><a href="#JSP-高级教程" class="headerlink" title="JSP 高级教程"></a>JSP 高级教程</h1><h2 id="JSP-标准标签库（JSTL）"><a href="#JSP-标准标签库（JSTL）" class="headerlink" title="JSP 标准标签库（JSTL）"></a>JSP 标准标签库（JSTL）</h2><p>JSP标准标签库（JSTL）是一个JSP标签集合，它封装了JSP应用的通用核心功能。</p>
<p>JSTL支持通用的、结构化的任务，比如迭代，条件判断，XML文档操作，国际化标签，SQL标签。 除了这些，它还提供了一个框架来使用集成JSTL的自定义标签。</p>
<p>根据JSTL标签所提供的功能，可以将其分为5个类别。</p>
<ul>
<li><strong>核心标签</strong></li>
<li><strong>格式化标签</strong></li>
<li><strong>SQL 标签</strong></li>
<li><strong>XML 标签</strong></li>
<li><strong>JSTL 函数</strong></li>
</ul>
<h3 id="JSTL-库安装"><a href="#JSTL-库安装" class="headerlink" title="JSTL 库安装"></a>JSTL 库安装</h3><p>官方下载地址：<a href="http://archive.apache.org/dist/jakarta/taglibs/standard/binaries/" target="_blank" rel="noopener">http://archive.apache.org/dist/jakarta/taglibs/standard/binaries/</a></p>
<p>标签库安装方法：<a href="https://www.runoob.com/jsp/jsp-jstl.html" target="_blank" rel="noopener">https://www.runoob.com/jsp/jsp-jstl.html</a></p>
<h3 id="核心标签"><a href="#核心标签" class="headerlink" title="核心标签"></a>核心标签</h3><p>核心标签是最常用的JSTL标签。</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">"c"</span> </span><br><span class="line">           uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> %&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>所有标签库请访问上方的标签库网址。</p>
<h3 id="格式化标签"><a href="#格式化标签" class="headerlink" title="格式化标签"></a>格式化标签</h3><p>用来格式化并输出文本、日期、时间、数字。</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">"fmt"</span> </span><br><span class="line">           uri=<span class="string">"http://java.sun.com/jsp/jstl/fmt"</span> %&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="格式化标签-1"><a href="#格式化标签-1" class="headerlink" title="格式化标签"></a>格式化标签</h3><p>用来格式化并输出文本、日期、时间、数字。</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">"fmt"</span> </span><br><span class="line">           uri=<span class="string">"http://java.sun.com/jsp/jstl/fmt"</span> %&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="SQL标签"><a href="#SQL标签" class="headerlink" title="SQL标签"></a>SQL标签</h3><p>提供了与关系型数据库（Oracle，MySQL，SQL Server等等）进行交互的标签。</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">"sql"</span> </span><br><span class="line">           uri=<span class="string">"http://java.sun.com/jsp/jstl/sql"</span> %&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="XML-标签"><a href="#XML-标签" class="headerlink" title="XML 标签"></a>XML 标签</h2><p>提供了创建和操作XML文档的标签。</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">"x"</span> </span><br><span class="line">           uri=<span class="string">"http://java.sun.com/jsp/jstl/xml"</span> %&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="JSTL函数"><a href="#JSTL函数" class="headerlink" title="JSTL函数"></a>JSTL函数</h2><p>JSTL包含一系列标准函数，大部分是通用的<strong>字符串处理函数</strong>。</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">"fn"</span> </span><br><span class="line">           uri=<span class="string">"http://java.sun.com/jsp/jstl/functions"</span> %&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="JSP-数据库"><a href="#JSP-数据库" class="headerlink" title="JSP 数据库"></a>JSP 数据库</h2><p>jar 包下载地址：<a href="http://static.runoob.com/download/mysql-connector-java-5.1.39-bin.jar" target="_blank" rel="noopener">http://static.runoob.com/download/mysql-connector-java-5.1.39-bin.jar</a></p>
<p>下载后把 mysql-connector-java-5.1.39-bin.jar 拷贝到 tomcat 下 lib 目录。</p>
<h3 id="创建测试数据"><a href="#创建测试数据" class="headerlink" title="创建测试数据"></a>创建测试数据</h3><p>在 MySQL 中创建 RUNOOB 数据库，并创建 websites 数据表，表结构如下：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`websites`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">char</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span> <span class="keyword">COMMENT</span> <span class="string">'站点名称'</span>,</span><br><span class="line">  <span class="string">`url`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`alexa`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'Alexa 排名'</span>,</span><br><span class="line">  <span class="string">`country`</span> <span class="built_in">char</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span> <span class="keyword">COMMENT</span> <span class="string">'国家'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">10</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br></pre></td></tr></tbody></table></figure>

<p>插入一些数据：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`websites`</span> <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'Google'</span>, <span class="string">'https://www.google.cm/'</span>, <span class="string">'1'</span>, <span class="string">'USA'</span>), (<span class="string">'2'</span>, <span class="string">'淘宝'</span>, <span class="string">'https://www.taobao.com/'</span>, <span class="string">'13'</span>, <span class="string">'CN'</span>), (<span class="string">'3'</span>, <span class="string">'菜鸟教程'</span>, <span class="string">'http://www.runoob.com'</span>, <span class="string">'5892'</span>, <span class="string">''</span>), (<span class="string">'4'</span>, <span class="string">'微博'</span>, <span class="string">'http://weibo.com/'</span>, <span class="string">'20'</span>, <span class="string">'CN'</span>), (<span class="string">'5'</span>, <span class="string">'Facebook'</span>, <span class="string">'https://www.facebook.com/'</span>, <span class="string">'3'</span>, <span class="string">'USA'</span>);</span><br></pre></td></tr></tbody></table></figure>

<h3 id="SELECT-操作"><a href="#SELECT-操作" class="headerlink" title="SELECT 操作"></a>SELECT 操作</h3><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.io.*,java.util.*,java.sql.*"</span>%&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"javax.servlet.http.*,javax.servlet.*"</span> %&gt;</span><br><span class="line">&lt;%@ taglib uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"c"</span>%&gt;</span><br><span class="line">&lt;%@ taglib uri=<span class="string">"http://java.sun.com/jsp/jstl/sql"</span> prefix=<span class="string">"sql"</span>%&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--</span><br><span class="line">    JDBC 驱动名及数据库 URL </span><br><span class="line">    数据库的用户名与密码，需要根据自己的设置</span><br><span class="line">    useUnicode=<span class="keyword">true</span>&amp;characterEncoding=utf-<span class="number">8</span> 防止中文乱码</span><br><span class="line"> --&gt;</span><br><span class="line">&lt;sql:setDataSource <span class="keyword">var</span>=<span class="string">"snapshot"</span> driver=<span class="string">"com.mysql.jdbc.Driver"</span></span><br><span class="line">     url=<span class="string">"jdbc:mysql://localhost:3306/RUNOOB?useUnicode=true&amp;characterEncoding=utf-8"</span></span><br><span class="line">     user=<span class="string">"root"</span>  password=<span class="string">"123456"</span>/&gt;</span><br><span class="line"> </span><br><span class="line">&lt;!-- 查询操作到 result --&gt;</span><br><span class="line">&lt;sql:query dataSource=<span class="string">"${snapshot}"</span> <span class="keyword">var</span>=<span class="string">"result"</span>&gt;</span><br><span class="line">	SELECT * from websites;</span><br><span class="line">&lt;/sql:query&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 展示查询结果 --&gt;</span><br><span class="line">&lt;c:forEach <span class="keyword">var</span>=<span class="string">"row"</span> items=<span class="string">"${result.rows}"</span>&gt;</span><br><span class="line">    ID:&lt;c:out value=<span class="string">"${row.id}"</span>/&gt;			&lt;br /&gt;</span><br><span class="line">    站点名:&lt;c:out value=<span class="string">"${row.name}"</span>/&gt;		&lt;br /&gt;</span><br><span class="line">    站点地址:&lt;c:out value=<span class="string">"${row.url}"</span>/&gt;		&lt;br /&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="INSERT-操作"><a href="#INSERT-操作" class="headerlink" title="INSERT 操作"></a>INSERT 操作</h3><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 插入数据 --&gt;</span><br><span class="line">&lt;sql:update dataSource=<span class="string">"${snapshot}"</span> <span class="keyword">var</span>=<span class="string">"result"</span>&gt;</span><br><span class="line">    <span class="function">INSERT INTO <span class="title">websites</span> <span class="params">(name,url,alexa,country)</span> <span class="title">VALUES</span> <span class="params">(<span class="string">'昂昂'</span>, <span class="string">'http://m.baidu.com'</span>, <span class="number">5093</span>, <span class="string">'CN'</span>)</span></span>;</span><br><span class="line">&lt;/sql:update&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="DELETE-操作"><a href="#DELETE-操作" class="headerlink" title="DELETE 操作"></a>DELETE 操作</h3><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 删除 ID 为 <span class="number">11</span> 的数据 --&gt;</span><br><span class="line">&lt;sql:update dataSource=<span class="string">"${snapshot}"</span> <span class="keyword">var</span>=<span class="string">"count"</span>&gt;</span><br><span class="line">    DELETE FROM websites WHERE Id = ?</span><br><span class="line">    &lt;sql:param value=<span class="string">"${11}"</span> /&gt;</span><br><span class="line">&lt;/sql:update&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="UPDATE-操作"><a href="#UPDATE-操作" class="headerlink" title="UPDATE 操作"></a>UPDATE 操作</h3><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 修改 ID 为 <span class="number">3</span> 的名字为 RUNOOB --&gt;</span><br><span class="line">&lt;c:set <span class="keyword">var</span>=<span class="string">"SiteId"</span> value=<span class="string">"3"</span>/&gt;</span><br><span class="line"> </span><br><span class="line">&lt;sql:update dataSource=<span class="string">"${snapshot}"</span> <span class="keyword">var</span>=<span class="string">"count"</span>&gt;</span><br><span class="line">    UPDATE websites SET name = <span class="string">'RUNOOB'</span> WHERE Id = ?</span><br><span class="line">    &lt;sql:param value=<span class="string">"${SiteId}"</span> /&gt;</span><br><span class="line">&lt;/sql:update&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="JSP-XML-数据处理"><a href="#JSP-XML-数据处理" class="headerlink" title="JSP XML 数据处理"></a>JSP XML 数据处理</h2><h3 id="发送-XML"><a href="#发送-XML" class="headerlink" title="发送 XML"></a>发送 XML</h3><p>和发送 HTML 一样，但是需要把页面的context属性设置为text/xml</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/xml"</span> %&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="处理-XML"><a href="#处理-XML" class="headerlink" title="处理 XML"></a>处理 XML</h3><p>需要将与XML 和XPath相关的两个库文件放在<code>&lt;Tomcat Installation Directory&gt;\lib</code>目录下：</p>
<ul>
<li>XercesImpl.jar：在这下载<a href="http://www.apache.org/dist/xerces/j/" target="_blank" rel="noopener">http://www.apache.org/dist/xerces/j/</a></li>
<li>xalan.jar：在这下载<a href="http://xml.apache.org/xalan-j/index.html" target="_blank" rel="noopener">http://xml.apache.org/xalan-j/index.html</a></li>
</ul>
<p>books.xml文件:</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">books</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">book</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>Padam History<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">author</span>&gt;</span>ZARA<span class="tag">&lt;/<span class="name">author</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">price</span>&gt;</span>100<span class="tag">&lt;/<span class="name">price</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">book</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">book</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>Great Mistry<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">author</span>&gt;</span>NUHA<span class="tag">&lt;/<span class="name">author</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">price</span>&gt;</span>2000<span class="tag">&lt;/<span class="name">price</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">book</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">books</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>main.jsp文件：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">"c"</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> %&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">"x"</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/xml"</span> %&gt;</span><br><span class="line"> </span><br><span class="line">&lt;c:<span class="keyword">import</span> <span class="keyword">var</span>=<span class="string">"bookInfo"</span> url=<span class="string">"http://localhost:8080/books.xml"</span>/&gt;</span><br><span class="line">&lt;x:parse xml=<span class="string">"${bookInfo}"</span> <span class="keyword">var</span>=<span class="string">"output"</span>/&gt;</span><br><span class="line"></span><br><span class="line">&lt;b&gt;The title of the first book is&lt;/b&gt;: </span><br><span class="line">&lt;x:out select=<span class="string">"$output/books/book[1]/name"</span> /&gt; &lt;br&gt;</span><br><span class="line">&lt;b&gt;The price of the second book&lt;/b&gt;: </span><br><span class="line">&lt;x:out select=<span class="string">"$output/books/book[2]/price"</span> /&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="格式化-XML"><a href="#格式化-XML" class="headerlink" title="格式化 XML"></a>格式化 XML</h3><p>这个是XSLT样式表style.xsl文件：</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">xsl:stylesheet</span> <span class="attr">xmlns:xsl</span>= <span class="string">"http://www.w3.org/1999/XSL/Transform"</span> <span class="attr">version</span>=<span class="string">"1.0"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">xsl:output</span> <span class="attr">method</span>=<span class="string">"html"</span> <span class="attr">indent</span>=<span class="string">"yes"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">xsl:template</span> <span class="attr">match</span>=<span class="string">"/"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">            	 <span class="tag">&lt;<span class="name">xsl:apply-templates</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xsl:template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">xsl:template</span> <span class="attr">match</span>=<span class="string">"books"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"1"</span> <span class="attr">width</span>=<span class="string">"100%"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">xsl:for-each</span> <span class="attr">select</span>=<span class="string">"book"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                      	<span class="tag">&lt;<span class="name">i</span>&gt;</span><span class="tag">&lt;<span class="name">xsl:value-of</span> <span class="attr">select</span>=<span class="string">"name"</span>/&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                      	<span class="tag">&lt;<span class="name">xsl:value-of</span> <span class="attr">select</span>=<span class="string">"author"</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                      	<span class="tag">&lt;<span class="name">xsl:value-of</span> <span class="attr">select</span>=<span class="string">"price"</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">xsl:for-each</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xsl:template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">xsl:stylesheet</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>这个是main.jsp文件：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">"c"</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> %&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">"x"</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/xml"</span> %&gt;</span><br><span class="line"> </span><br><span class="line">&lt;h3&gt;Books Info:&lt;/h3&gt;</span><br><span class="line">&lt;c:set <span class="keyword">var</span>=<span class="string">"xmltext"</span>&gt;</span><br><span class="line">    &lt;books&gt;</span><br><span class="line">        &lt;book&gt;</span><br><span class="line">            &lt;name&gt;Padam History&lt;/name&gt;</span><br><span class="line">            &lt;author&gt;ZARA&lt;/author&gt;</span><br><span class="line">            &lt;price&gt;100&lt;/price&gt;</span><br><span class="line">        &lt;/book&gt;</span><br><span class="line">        &lt;book&gt;</span><br><span class="line">            &lt;name&gt;Great Mistry&lt;/name&gt;</span><br><span class="line">            &lt;author&gt;NUHA&lt;/author&gt;</span><br><span class="line">            &lt;price&gt;2000&lt;/price&gt;</span><br><span class="line">        &lt;/book&gt;</span><br><span class="line">    &lt;/books&gt;</span><br><span class="line">&lt;/c:set&gt;</span><br><span class="line"> </span><br><span class="line">&lt;c:<span class="keyword">import</span> url=<span class="string">"http://localhost:8080/style.xsl"</span> <span class="keyword">var</span>=<span class="string">"xslt"</span>/&gt;</span><br><span class="line">&lt;x:transform xml=<span class="string">"${xmltext}"</span> xslt=<span class="string">"${xslt}"</span>/&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>运行结果如下：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://www.runoob.com/wp-content/uploads/2014/01/xml-1.jpg" alt="img" title="">
                </div>
                <div class="image-caption">img</div>
            </figure>



<h2 id="JavaBean"><a href="#JavaBean" class="headerlink" title="JavaBean"></a>JavaBean</h2><p>JavaBean是特殊的Java类，使用J ava语言书写，并且遵守JavaBean API规范。</p>
<p>JavaBean与其它Java类相比而言独一无二的特征：</p>
<ul>
<li>提供一个默认的无参构造函数。</li>
<li>需要被序列化并且实现了Serializable接口。</li>
<li>可能有一系列可读写属性。</li>
<li>可能有一系列的”getter”或”setter”方法。</li>
</ul>
<p>一个只读的属性只提供getPropertyName()方法，一个只写的属性只提供setPropertyName()方法。</p>
<h3 id="访问-JavaBean"><a href="#访问-JavaBean" class="headerlink" title="访问 JavaBean"></a>访问 JavaBean</h3><p><code>&lt;jsp:useBean&gt;</code> 标签可以在JSP中声明一个JavaBean，然后使用。声明后，JavaBean对象就成了脚本变量，可以通过脚本元素或其他自定义标签来访问。</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=<span class="string">"bean 的名字"</span> scope=<span class="string">"bean 的作用域"</span> typeSpec/&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>其中，根据具体情况，scope的值可以是page，request，session或application。id值可任意只要不和同一JSP文件中其它<code>&lt;jsp:useBean&gt;</code>中id值一样就行了。</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;jsp:useBean id=<span class="string">"date"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"java.util.Date"</span> /&gt; </span><br><span class="line">&lt;p&gt;日期为：&lt;%= date %&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>它将会产生如下结果：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">日期为：Tue Jun 28 15:22:24 CST 2016</span><br></pre></td></tr></tbody></table></figure>

<h3 id="访问-JavaBean-对象的属性"><a href="#访问-JavaBean-对象的属性" class="headerlink" title="访问 JavaBean 对象的属性"></a>访问 JavaBean 对象的属性</h3><p>在 <strong><code>&lt;jsp:useBean&gt;</code></strong> 标签主体中使用 <strong><code>&lt;jsp:getProperty /&gt;</code></strong> 标签来调用 <strong>getter</strong> 方法，使用 <strong><code>&lt;jsp:setProperty /&gt;</code></strong> 标签来调用 <strong>setter</strong> 方法，语法格式如下：</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=<span class="string">"id"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"bean 编译的类"</span> scope=<span class="string">"bean 作用域"</span>&gt;</span><br><span class="line">   &lt;jsp:setProperty name=<span class="string">"bean 的 id"</span> property=<span class="string">"属性名"</span>  </span><br><span class="line">                    value=<span class="string">"value"</span>/&gt;</span><br><span class="line">   &lt;jsp:getProperty name=<span class="string">"bean 的 id"</span> property=<span class="string">"属性名"</span>/&gt;</span><br><span class="line">   ...........</span><br><span class="line">&lt;/jsp:useBean&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>name属性指的是Bean的id属性。property属性指的是想要调用的getter或setter方法。</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line"></span><br><span class="line">&lt;jsp:useBean id=<span class="string">"students"</span> </span><br><span class="line">                    <span class="class"><span class="keyword">class</span></span>=<span class="string">"com.runoob.StudentsBean"</span>&gt; </span><br><span class="line">   &lt;jsp:setProperty name=<span class="string">"students"</span> property=<span class="string">"firstName"</span></span><br><span class="line">                    value=<span class="string">"小强"</span>/&gt;</span><br><span class="line">   &lt;jsp:setProperty name=<span class="string">"students"</span> property=<span class="string">"lastName"</span> </span><br><span class="line">                    value=<span class="string">"王"</span>/&gt;</span><br><span class="line">   &lt;jsp:setProperty name=<span class="string">"students"</span> property=<span class="string">"age"</span></span><br><span class="line">                    value=<span class="string">"10"</span>/&gt;</span><br><span class="line">&lt;/jsp:useBean&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;名字:&lt;jsp:getProperty name="students" property="firstName"/&gt; &lt;/p&gt;</span><br><span class="line">&lt;p&gt;姓氏: &lt;jsp:getProperty name="students" property="lastName"/&gt;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;年龄: &lt;jsp:getProperty name="students" property="age"/&gt;&lt;/p&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>访问以上 JSP，运行结果如下：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">名字: 小强</span><br><span class="line">姓氏: 王</span><br><span class="line">年龄: 10</span><br></pre></td></tr></tbody></table></figure>

<h2 id="自定义标签"><a href="#自定义标签" class="headerlink" title="自定义标签"></a>自定义标签</h2><h3 id="创建-HELLO-标签"><a href="#创建-HELLO-标签" class="headerlink" title="创建 HELLO 标签"></a>创建 HELLO 标签</h3><p>创建一个自定义标签叫作<a href="ex:Hello" target="_blank" rel="noopener">ex:Hello</a>，标签格式为：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;ex:Hello /&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>要创建自定义的JSP标签，你首先必须创建处理标签的Java类。所以，让我们创建一个HelloTag类，如下所示：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.tagext.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.*;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloTag</span> <span class="keyword">extends</span> <span class="title">SimpleTagSupport</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doTag</span><span class="params">()</span> <span class="keyword">throws</span> JspException, IOException </span>{</span><br><span class="line">        JspWriter out = getJspContext().getOut();</span><br><span class="line">        out.println(<span class="string">"Hello Custom Tag!"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>以下代码重写了doTag()方法，方法中使用了getJspContext()方法来获取当前的JspContext对象，并将”Hello Custom Tag!”传递给JspWriter对象。</p>
<p>编译以上类，并将其复制到环境变量CLASSPATH目录中。最后创建如下标签库：<code>&lt;Tomcat安装目录&gt;webapps\ROOT\WEB-INF\custom.tld</code>。</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tlib-version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">tlib-version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jsp-version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">jsp-version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">short-name</span>&gt;</span>Example TLD<span class="tag">&lt;/<span class="name">short-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tag</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tag-class</span>&gt;</span>com.runoob.HelloTag<span class="tag">&lt;/<span class="name">tag-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">body-content</span>&gt;</span>empty<span class="tag">&lt;/<span class="name">body-content</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tag</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>接下来，可以在JSP文件中使用Hello标签：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">"ex"</span> uri=<span class="string">"WEB-INF/custom.tld"</span>%&gt;</span><br><span class="line">&lt;ex:Hello/&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>以上程序输出结果为：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello Custom Tag!</span><br></pre></td></tr></tbody></table></figure>

<h3 id="访问标签体"><a href="#访问标签体" class="headerlink" title="访问标签体"></a>访问标签体</h3><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ex:Hello</span>&gt;</span></span><br><span class="line">   This is message body</span><br><span class="line"><span class="tag">&lt;/<span class="name">ex:Hello</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>修改标签处理类文件，代码如下：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.tagext.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.*;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloTag</span> <span class="keyword">extends</span> <span class="title">SimpleTagSupport</span> </span>{</span><br><span class="line"></span><br><span class="line">    StringWriter sw = <span class="keyword">new</span> StringWriter();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doTag</span><span class="params">()</span> <span class="keyword">throws</span> JspException, IOException </span>{</span><br><span class="line">        getJspBody().invoke(sw);</span><br><span class="line">        getJspContext().getOut().println(sw.toString());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>接下来我们需要修改TLD文件，如下所示：</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tlib-version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">tlib-version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jsp-version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">jsp-version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">short-name</span>&gt;</span>Example TLD with Body<span class="tag">&lt;/<span class="name">short-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tag</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tag-class</span>&gt;</span>com.runoob.HelloTag<span class="tag">&lt;/<span class="name">tag-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">body-content</span>&gt;</span>scriptless<span class="tag">&lt;/<span class="name">body-content</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tag</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>现在我们可以在JSP使用修改后的标签，如下所示:</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">"ex"</span> uri=<span class="string">"WEB-INF/custom.tld"</span>%&gt;</span><br><span class="line">&lt;ex:Hello&gt;</span><br><span class="line">    This is message body</span><br><span class="line">&lt;/ex:Hello&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>以上程序输出结果如下所示：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">This is message body</span><br></pre></td></tr></tbody></table></figure>

<h3 id="自定义标签属性"><a href="#自定义标签属性" class="headerlink" title="自定义标签属性"></a>自定义标签属性</h3><p>自定义标签类必须实现setter方法， JavaBean 中的setter方法如下所示：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.tagext.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.*;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloTag</span> <span class="keyword">extends</span> <span class="title">SimpleTagSupport</span> </span>{</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> String message;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMessage</span><span class="params">(String msg)</span> </span>{</span><br><span class="line">      <span class="keyword">this</span>.message = msg;</span><br><span class="line">   }</span><br><span class="line"></span><br><span class="line">   StringWriter sw = <span class="keyword">new</span> StringWriter();</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doTag</span><span class="params">()</span></span></span><br><span class="line"><span class="function">      <span class="keyword">throws</span> JspException, IOException</span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">       <span class="keyword">if</span> (message != <span class="keyword">null</span>) {</span><br><span class="line">          <span class="comment">/* 从属性中使用消息 */</span></span><br><span class="line">          JspWriter out = getJspContext().getOut();</span><br><span class="line">          out.println( message );</span><br><span class="line">       }</span><br><span class="line">       <span class="keyword">else</span> {</span><br><span class="line">          <span class="comment">/* 从内容体中使用消息 */</span></span><br><span class="line">          getJspBody().invoke(sw);</span><br><span class="line">          getJspContext().getOut().println(sw.toString());</span><br><span class="line">       }</span><br><span class="line">   }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>属性的名称是”message”，所以setter方法是的setMessage()。现在让我们在TLD文件中使用的<code>&lt;attribute&gt;</code>元素添加此属性：</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tlib-version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">tlib-version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jsp-version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">jsp-version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">short-name</span>&gt;</span>Example TLD with Body<span class="tag">&lt;/<span class="name">short-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tag</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tag-class</span>&gt;</span>com.runoob.HelloTag<span class="tag">&lt;/<span class="name">tag-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">body-content</span>&gt;</span>scriptless<span class="tag">&lt;/<span class="name">body-content</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">attribute</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">name</span>&gt;</span>message<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tag</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>现在我们就可以在JSP文件中使用message属性了，如下所示：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">"ex"</span> uri=<span class="string">"WEB-INF/custom.tld"</span>%&gt;</span><br><span class="line">&lt;ex:Hello message=<span class="string">"This is custom tag"</span> /&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>以上实例数据输出结果为：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">This is custom tag</span><br></pre></td></tr></tbody></table></figure>

<p>还可以包含以下属性：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>定义属性的名称。每个标签的是属性名称必须是唯一的。</td>
</tr>
<tr>
<td>required</td>
<td>指定属性是否是必须的或者可选的,如果设置为false为可选。</td>
</tr>
<tr>
<td>rtexprvalue</td>
<td>声明在运行表达式时，标签属性是否有效。</td>
</tr>
<tr>
<td>type</td>
<td>定义该属性的Java类类型 。默认指定为 <strong>String</strong></td>
</tr>
<tr>
<td>description</td>
<td>描述信息</td>
</tr>
<tr>
<td>fragment</td>
<td>如果声明了该属性,属性值将被视为一个 <strong>JspFragment</strong>。</td>
</tr>
</tbody></table>
<p>以下是指定相关的属性实例：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.....</span><br><span class="line">    &lt;attribute&gt;</span><br><span class="line">        &lt;name&gt;attribute_name&lt;/name&gt;</span><br><span class="line">        &lt;required&gt;false&lt;/required&gt;</span><br><span class="line">        &lt;type&gt;java.util.Date&lt;/type&gt;</span><br><span class="line">        &lt;fragment&gt;false&lt;/fragment&gt;</span><br><span class="line">    &lt;/attribute&gt;</span><br><span class="line">.....</span><br></pre></td></tr></tbody></table></figure>

<p>如果你使用了两个属性，修改TLD文件，如下所示：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">.....</span><br><span class="line">    &lt;attribute&gt;</span><br><span class="line">        &lt;name&gt;attribute_name1&lt;/name&gt;</span><br><span class="line">        &lt;required&gt;false&lt;/required&gt;</span><br><span class="line">        &lt;type&gt;java.util.Boolean&lt;/type&gt;</span><br><span class="line">        &lt;fragment&gt;false&lt;/fragment&gt;</span><br><span class="line">    &lt;/attribute&gt;</span><br><span class="line">    &lt;attribute&gt;</span><br><span class="line">        &lt;name&gt;attribute_name2&lt;/name&gt;</span><br><span class="line">        &lt;required&gt;true&lt;/required&gt;</span><br><span class="line">        &lt;type&gt;java.util.Date&lt;/type&gt;</span><br><span class="line">    &lt;/attribute&gt;</span><br><span class="line">.....</span><br></pre></td></tr></tbody></table></figure>

<h2 id="JSP-表达式语言"><a href="#JSP-表达式语言" class="headerlink" title="JSP 表达式语言"></a>JSP 表达式语言</h2><p>JSP表达式语言（EL）使得访问存储在JavaBean中的数据变得非常简单。JSP EL既可以用来创建算术表达式也可以用来创建逻辑表达式。在JSP EL表达式内可以使用整型数，浮点数，字符串，常量true、false，还有null。</p>
<h3 id="一个简单的语法"><a href="#一个简单的语法" class="headerlink" title="一个简单的语法"></a>一个简单的语法</h3><p>典型的，在JSP标签中指定一个属性值，只需要简单地使用字符串即可：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:setProperty name=<span class="string">"box"</span> property=<span class="string">"perimeter"</span> value=<span class="string">"${2*box.width+2*box.height}"</span>/&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>JSP EL允许指定一个表达式来表示属性值：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">${expr}</span><br></pre></td></tr></tbody></table></figure>

<p>其中，expr指的是表达式。在JSP EL中通用的操作符是 . 和 {} 。</p>
<p>当JSP编译器在属性中见到”${}”格式后，它会产生代码来<strong>计算这个表达式</strong>，并且产生一个替代品来代替表达式的值。</p>
<p>也可以在标签的模板文本中使用表达式语言。比如<code>&lt;jsp:text&gt;</code>标签简单地将其主体中的文本插入到JSP输出中：</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:text&gt;</span><br><span class="line">	Box Perimeter is: ${<span class="number">2</span>*box.width + （<span class="number">1</span>+<span class="number">2</span>）*box.height}</span><br><span class="line">&lt;/jsp:text&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>想要停用对EL表达式的评估的话，需要使用page指令将isELIgnored属性值设为true：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page isELIgnored =<span class="string">"true|false"</span> %&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>这样，EL表达式就会被忽略。若设为false，则容器将会计算EL表达式。</p>
<h3 id="EL中的基础操作符"><a href="#EL中的基础操作符" class="headerlink" title="EL中的基础操作符"></a>EL中的基础操作符</h3><p>EL表达式支持大部分Java所提供的算术和逻辑操作符：</p>
<table>
<thead>
<tr>
<th><strong>操作符</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>.</td>
<td>访问一个Bean属性或者一个映射条目</td>
</tr>
<tr>
<td>[]</td>
<td>访问一个数组或者链表的元素</td>
</tr>
<tr>
<td>( )</td>
<td>组织一个子表达式以改变优先级</td>
</tr>
<tr>
<td>+</td>
<td>加</td>
</tr>
<tr>
<td>-</td>
<td>减或负</td>
</tr>
<tr>
<td>*</td>
<td>乘</td>
</tr>
<tr>
<td>/ or div</td>
<td>除</td>
</tr>
<tr>
<td>% or mod</td>
<td>取模</td>
</tr>
<tr>
<td>== or eq</td>
<td>测试是否相等</td>
</tr>
<tr>
<td>!= or ne</td>
<td>测试是否不等</td>
</tr>
<tr>
<td>&lt; or lt</td>
<td>测试是否小于</td>
</tr>
<tr>
<td>&gt; or gt</td>
<td>测试是否大于</td>
</tr>
<tr>
<td>&lt;= or le</td>
<td>测试是否小于等于</td>
</tr>
<tr>
<td>&gt;= or ge</td>
<td>测试是否大于等于</td>
</tr>
<tr>
<td>&amp;&amp; or and</td>
<td>测试逻辑与</td>
</tr>
<tr>
<td>|| or or</td>
<td>测试逻辑或</td>
</tr>
<tr>
<td>! or not</td>
<td>测试取反</td>
</tr>
<tr>
<td>empty</td>
<td>测试是否空值</td>
</tr>
</tbody></table>
<h3 id="JSP-EL中的函数"><a href="#JSP-EL中的函数" class="headerlink" title="JSP EL中的函数"></a>JSP EL中的函数</h3><p>JSP EL允许您在表达式中使用函数。这些函数必须被定义在自定义标签库中。函数的使用语法如下：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">${ns:func(param1, param2, ...)}</span><br></pre></td></tr></tbody></table></figure>

<p>ns指的是命名空间（namespace），func指的是函数的名称，param1指的是第一个参数，param2指的是第二个参数，以此类推。比如，有函数fn:length，在JSTL库中定义，可以像下面这样来获取一个字符串的长度：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">${fn:length(<span class="string">"Get my length"</span>)}</span><br></pre></td></tr></tbody></table></figure>

<p>要使用任何标签库中的函数，您需要将这些库安装在服务器中，然后使用<code>&lt;taglib&gt;</code>标签在JSP文件中包含这些库。</p>
<h3 id="JSP-EL隐含对象"><a href="#JSP-EL隐含对象" class="headerlink" title="JSP EL隐含对象"></a>JSP EL隐含对象</h3><p>JSP EL支持下表列出的隐含对象：</p>
<table>
<thead>
<tr>
<th><strong>隐含对象</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>pageScope</td>
<td>page 作用域</td>
</tr>
<tr>
<td>requestScope</td>
<td>request 作用域</td>
</tr>
<tr>
<td>sessionScope</td>
<td>session 作用域</td>
</tr>
<tr>
<td>applicationScope</td>
<td>application 作用域</td>
</tr>
<tr>
<td>param</td>
<td>Request 对象的参数，字符串</td>
</tr>
<tr>
<td>paramValues</td>
<td>Request对象的参数，字符串集合</td>
</tr>
<tr>
<td>header</td>
<td>HTTP 信息头，字符串</td>
</tr>
<tr>
<td>headerValues</td>
<td>HTTP 信息头，字符串集合</td>
</tr>
<tr>
<td>initParam</td>
<td>上下文初始化参数</td>
</tr>
<tr>
<td>cookie</td>
<td>Cookie值</td>
</tr>
<tr>
<td>pageContext</td>
<td>当前页面的pageContext</td>
</tr>
</tbody></table>
<p>可以在表达式中使用这些对象，就像使用变量一样。</p>
<h3 id="pageContext对象"><a href="#pageContext对象" class="headerlink" title="pageContext对象"></a>pageContext对象</h3><p>pageContext对象是JSP中pageContext对象的引用。通过pageContext对象，可以访问request对象。比如，访问request对象传入的查询字符串，就像这样：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">${pageContext.request.queryString}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Scope对象"><a href="#Scope对象" class="headerlink" title="Scope对象"></a>Scope对象</h3><p>pageScope，requestScope，sessionScope，applicationScope变量用来访问存储在各个作用域层次的变量。</p>
<p>举例来说，如果需要显式访问在applicationScope层的box变量，可以这样来访问：applicationScope.box。</p>
<h3 id="param和paramValues对象"><a href="#param和paramValues对象" class="headerlink" title="param和paramValues对象"></a>param和paramValues对象</h3><p>param和paramValues 对象用来访问参数值，通过使用 request.getParameter 方法和 request.getParameterValues 方法。</p>
<p>举例来说，访问一个名为 order 的参数，可以这样使用表达式：${param.order}，或者${param[“order”]}。</p>
<p>如何访问 request 中的 username 参数：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.io.*,java.util.*"</span> %&gt;</span><br><span class="line">${param[<span class="string">"username"</span>]}</span><br></pre></td></tr></tbody></table></figure>

<p>param 对象返回单一的字符串，而 paramValues 对象则返回一个字符串数组。</p>
<h3 id="header和headerValues对象"><a href="#header和headerValues对象" class="headerlink" title="header和headerValues对象"></a>header和headerValues对象</h3><p>header和headerValues对象用来访问信息头，通过使用 request.getHeader方法和request.getHeaders方法。</p>
<p>举例来说，要访问一个名为 user-agent 的信息头，可以这样使用表达式：${header.user-agent}，或者 ${header[“user-agent”]}。</p>
<p>如何访问 user-agent 信息头：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.io.*,java.util.*"</span> %&gt;</span><br><span class="line">${header[<span class="string">"user-agent"</span>]}</span><br></pre></td></tr></tbody></table></figure>

<p>header对象返回单一值，而headerValues则返回一个字符串数组。</p>
<h2 id="JSP-异常处理"><a href="#JSP-异常处理" class="headerlink" title="JSP 异常处理"></a>JSP 异常处理</h2><p>JSP代码中通常有以下几类异常:</p>
<ul>
<li>检查型异常:检查型异常就是一个典型的用户错误或者一个程序员无法预见的错误。举例来说，如果一个文件将要被打开，但是无法找到这个文件，则一个异常被抛出。这些异常不能再编译期被简单地忽略。</li>
<li>运行时异常:一个运行时异常可能已经被程序员避免，这种异常在编译期将会被忽略。</li>
<li>错误:错误不是异常，但问题是它超出了用户或者程序员的控制范围。错误通常会在代码中被忽略，您几乎不能拿它怎么样。举例来说，栈溢出错误。这些错误都会在编译期被忽略。</li>
</ul>
<h3 id="使用-Exception-对象"><a href="#使用-Exception-对象" class="headerlink" title="使用 Exception 对象"></a>使用 Exception 对象</h3><p>exception对象是Throwable子类的一个实例，只在错误页面中可用。下表列出了Throwable类中一些重要的方法:</p>
<table>
<thead>
<tr>
<th><strong>序号</strong></th>
<th><strong>方法</strong> <strong>&amp;</strong> <strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><strong>public String getMessage()</strong><br>返回异常的信息。这个信息在Throwable构造函数中被初始化</td>
</tr>
<tr>
<td>2</td>
<td><strong>public ThrowablegetCause()</strong><br>返回引起异常的原因，类型为Throwable对象</td>
</tr>
<tr>
<td>3</td>
<td><strong>public String toString()<br></strong>返回类名</td>
</tr>
<tr>
<td>4</td>
<td><strong>public void printStackTrace()<br></strong>将异常栈轨迹输出至System.err</td>
</tr>
<tr>
<td>5</td>
<td><strong>public StackTraceElement [] getStackTrace()<br></strong>以栈轨迹元素数组的形式返回异常栈轨迹</td>
</tr>
<tr>
<td>6</td>
<td><strong>public ThrowablefillInStackTrace()</strong><br>使用当前栈轨迹填充Throwable对象</td>
</tr>
</tbody></table>
<p>JSP提供了可选项来为每个JSP页面指定错误页面。无论何时页面抛出了异常，JSP容器都会自动地调用错误页面。</p>
<p>接下来的例子为main.jsp指定了一个错误页面。使用&lt;%@page errorPage=”XXXXX”%&gt;指令指定一个错误页面。</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page errorPage=<span class="string">"ShowError.jsp"</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">     <span class="comment">// Throw an exception to invoke the error page</span></span><br><span class="line">     <span class="keyword">if</span> (<span class="number">1</span> == <span class="number">1</span>)</span><br><span class="line">     {</span><br><span class="line">          <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Error condition!!!"</span>);</span><br><span class="line">     }</span><br><span class="line">%&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>现在，编写ShowError.jsp文件如下:</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page isErrorPage=<span class="string">"true"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;Show Error Page&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;Opps...&lt;/h1&gt;</span><br><span class="line">    &lt;p&gt;Sorry, an error occurred.&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;Here is the exception stack trace: &lt;/p&gt;</span><br><span class="line">    &lt;pre&gt;</span><br><span class="line">    &lt;% exception.printStackTrace(response.getWriter()); %&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>注意到，ShowError.jsp文件使用了&lt;%@page isErrorPage=”true”%&gt;指令，这个指令告诉JSP编译器需要产生一个异常实例变量。</p>
<p>现在试着访问main.jsp页面，它将会产生如下结果:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">java.lang.RuntimeException: Error condition!!!</span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">Opps...</span><br><span class="line">Sorry, an error occurred.</span><br><span class="line"></span><br><span class="line">Here is the exception stack trace:</span><br></pre></td></tr></tbody></table></figure>

<h3 id="在错误页面使用-JSTL-标签"><a href="#在错误页面使用-JSTL-标签" class="headerlink" title="在错误页面使用 JSTL 标签"></a>在错误页面使用 JSTL 标签</h3><p>可以利用JSTL标签来编写错误页面ShowError.jsp。这个例子中的代码与上例代码的逻辑几乎一样，但是本例的代码有更好的结构，并且能够提供更多信息:</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">"c"</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> %&gt;</span><br><span class="line">&lt;%<span class="meta">@page</span> isErrorPage=<span class="string">"true"</span> %&gt;</span><br><span class="line">Error: ${pageContext.exception} &lt;br /&gt;</span><br><span class="line">URI: ${pageContext.errorData.requestURI} &lt;br /&gt;</span><br><span class="line">Status code: ${pageContext.errorData.statusCode} &lt;br /&gt;</span><br><span class="line">&lt;c:forEach <span class="keyword">var</span>=<span class="string">"trace"</span> items=<span class="string">"${pageContext.exception.stackTrace}"</span>&gt;</span><br><span class="line">  	${trace} &lt;br /&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>运行结果如下:</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://www.runoob.com/wp-content/uploads/2014/01/jsp-exeception-1.jpg" alt="jsp-exeception-1" title="">
                </div>
                <div class="image-caption">jsp-exeception-1</div>
            </figure>



<h3 id="使用-try-…-catch-块"><a href="#使用-try-…-catch-块" class="headerlink" title="使用 try … catch 块"></a>使用 try … catch 块</h3><p>如果您想要将异常处理放在一个页面中，并且对不同的异常进行不同的处理，那么您就需要使用try…catch块了。</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">   <span class="keyword">try</span>{</span><br><span class="line">      <span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">      i = i / <span class="number">0</span>;</span><br><span class="line">      out.println(<span class="string">"The answer is "</span> + i);</span><br><span class="line">   }</span><br><span class="line">   <span class="keyword">catch</span> (Exception e){</span><br><span class="line">      out.println(<span class="string">"An exception occurred: "</span> + e.getMessage());</span><br><span class="line">   }</span><br><span class="line">%&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>运行结果:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">An exception occurred: / by zero</span><br></pre></td></tr></tbody></table></figure>

<h2 id="JSP-调试"><a href="#JSP-调试" class="headerlink" title="JSP 调试"></a>JSP 调试</h2><p><strong>System.out.println()</strong></p>
<p><strong>JDB Logger</strong></p>
<p>J2SE日志框架可为任何运行在JVM中的类提供日志记录服务。因此我们可以利用这个框架来记录任何信息。</p>
<p>使用JDK中的 logger API：</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%<span class="meta">@taglib</span> prefix=<span class="string">"c"</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> %&gt;</span><br><span class="line">&lt;%<span class="meta">@page</span> <span class="keyword">import</span>=<span class="string">"java.util.logging.Logger"</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;% Logger logger=Logger.getLogger(<span class="keyword">this</span>.getClass().getName());%&gt;</span><br><span class="line"></span><br><span class="line">&lt;c:forEach <span class="keyword">var</span>=<span class="string">"counter"</span> begin=<span class="string">"1"</span> end=<span class="string">"10"</span> step=<span class="string">"1"</span> &gt;</span><br><span class="line">   &lt;c:set <span class="keyword">var</span>=<span class="string">"myCount"</span> value=<span class="string">"${counter-5}"</span> /&gt;</span><br><span class="line">   &lt;c:out value="${myCount}"/&gt;&lt;/br&gt;</span><br><span class="line">   &lt;% String message = <span class="string">"counter="</span></span><br><span class="line">                  + pageContext.findAttribute(<span class="string">"counter"</span>)</span><br><span class="line">                  + <span class="string">" myCount="</span></span><br><span class="line">                  + pageContext.findAttribute(<span class="string">"myCount"</span>);</span><br><span class="line">                  logger.info( message );</span><br><span class="line">   %&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>给出stdout.log文件中的一个快照：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">24-Sep-2013 23:31:31 org.apache.jsp.main_jsp _jspService</span><br><span class="line">INFO: counter=1 myCount=-4</span><br><span class="line">24-Sep-2013 23:31:31 org.apache.jsp.main_jsp _jspService</span><br><span class="line">INFO: counter=2 myCount=-3</span><br><span class="line">24-Sep-2013 23:31:31 org.apache.jsp.main_jsp _jspService</span><br><span class="line">INFO: counter=3 myCount=-2</span><br><span class="line">24-Sep-2013 23:31:31 org.apache.jsp.main_jsp _jspService</span><br><span class="line">INFO: counter=4 myCount=-1</span><br><span class="line">24-Sep-2013 23:31:31 org.apache.jsp.main_jsp _jspService</span><br><span class="line">INFO: counter=5 myCount=0</span><br><span class="line">24-Sep-2013 23:31:31 org.apache.jsp.main_jsp _jspService</span><br><span class="line">INFO: counter=6 myCount=1</span><br><span class="line">24-Sep-2013 23:31:31 org.apache.jsp.main_jsp _jspService</span><br><span class="line">INFO: counter=7 myCount=2</span><br><span class="line">24-Sep-2013 23:31:31 org.apache.jsp.main_jsp _jspService</span><br><span class="line">INFO: counter=8 myCount=3</span><br><span class="line">24-Sep-2013 23:31:31 org.apache.jsp.main_jsp _jspService</span><br><span class="line">INFO: counter=9 myCount=4</span><br><span class="line">24-Sep-2013 23:31:31 org.apache.jsp.main_jsp _jspService</span><br><span class="line">INFO: counter=10 myCount=5</span><br></pre></td></tr></tbody></table></figure>

<p>消息可以使用各种优先级发送，通过使用sever()，warning()，info()，config()，fine()，finer()，finest()方法。finest()方法用来记录最好的信息，而sever()方法用来记录最严重的信息。</p>
<p>使用Log4J 框架来将消息记录在不同的文件中，这些消息基于严重程度和重要性来进行分类。</p>
<p><strong>调试工具</strong></p>
<p>NetBeans是树形结构，是开源的Java综合开发环境，支持开发独立的Java应用程序和网络应用程序，同时也支持JSP调试。</p>
<p>NetBeans支持如下几个基本的调试功能：</p>
<ul>
<li>断点</li>
<li>单步跟踪</li>
<li>观察点</li>
</ul>
<p>详细的信息可以查看NetBeans使用手册。</p>
<p><strong>使用JDB Debugger</strong></p>
<p><strong>使用注释</strong></p>
<p><strong>浏览器开发者模式</strong></p>
<h2 id="JSP-国际化"><a href="#JSP-国际化" class="headerlink" title="JSP 国际化"></a>JSP 国际化</h2><p><a href="https://www.runoob.com/jsp/jsp-internationalization.html" target="_blank" rel="noopener">https://www.runoob.com/jsp/jsp-internationalization.html</a></p>
<p>解释几个重要的概念：</p>
<ul>
<li>国际化（i18n）：表明一个页面根据访问者的语言或国家来呈现不同的翻译版本。</li>
<li>本地化（l10n）：向网站添加资源，以使它适应不同的地区和文化。比如网站的印度语版本。</li>
<li>区域：这是一个特定的区域或文化，通常认为是一个语言标志和国家标志通过下划线连接起来。比如”en_US”代表美国英语地区。</li>
</ul>
<p>JSP容器能够根据request的locale属性来提供正确地页面版本。接下来给出了如何通过request对象来获得Locale对象的语法：</p>
<figure class="highlight jsp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.util.Locale request.getLocale()</span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    最后更新：<time datetime="2019-10-13T07:25:52.901Z" itemprop="dateUpdated">2019-10-13 15:25:52</time>
</span>


        
        原文链接：<a href="/2018/05/09/JSP-学习笔记/" target="_blank" rel="external">http://blog.iwxyi.com/2018/05/09/JSP-学习笔记/</a>
        
    </div>
    <footer>
        <div onclick="location.href='http://blog.iwxyi.com'">
            <img src="/img/avatar.jpg" alt="命燃芯乂">
            <a>命燃芯乂</a>
        </div>
    </footer>
</blockquote>

        
    <div class="page-reward">
        <nav class="myreward">
            <a id="rewardBtn" href="javascript:;"><span>打&nbsp;赏</span><span>装成好像很多人打赏的样子</span></a>
        </nav>
    </div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JSP/">JSP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/学习笔记/">学习笔记</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.iwxyi.com/2018/05/09/JSP-学习笔记/&title=《JSP-学习笔记》 — 云笺&pic=http://blog.iwxyi.com/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.iwxyi.com/2018/05/09/JSP-学习笔记/&title=《JSP-学习笔记》 — 云笺&source=了解第一个 JSP 程序12345678910&lt;html&gt;    &lt;head&gt;           &lt;title&gt;第一..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.iwxyi.com/2018/05/09/JSP-学习笔记/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《JSP-学习笔记》 — 云笺&url=http://blog.iwxyi.com/2018/05/09/JSP-学习笔记/&via=http://blog.iwxyi.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.iwxyi.com/2018/05/09/JSP-学习笔记/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2018/05/10/Android获取IMEI码/" id="post-prev" class="post-nav-link">
        <h4 class="title" >
          上一篇：Android获取IMEI码
        </h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2018/05/08/MFC画图/" id="post-next" class="post-nav-link">
        <h4 class="title" data-hover="下一篇：MFC画图">下一篇：MFC画图</h4>
      </a>
    </div>
  
</nav>



    
    

    

    
    <!-- Valine Comments -->
    <div class="comments vcomment" id="comments"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
    <!-- Valine Comments script -->
    <script>
        var GUEST_INFO = ['nick','mail','link'];
        var guest_info = 'nick,mail,link'.split(',').filter(function(item){
          return GUEST_INFO.indexOf(item) > -1
        });
        new Valine({
            el: '#comments',
            notify: 'true' == 'true',
            verify: 'false' == 'true',
            appId: "sVjY7bBJXEfCtStMqASgnlL6-gzGzoHsz",
            appKey: "8mL43PwxikVMVpiQx4Pq7wwt",
            avatar: "mm",
            placeholder: "留下您宝贵的建议——",
            guest_info: guest_info.length == 0 ? GUEST_INFO : guest_info,
            pageSize: "10"
        })
    </script>
    <!-- Valine Comments end -->



</article>

</div>

        <footer class="footer">
    <div class="footer-content">
        <span class="power">
            <i class="icon icon-lg icon-copyright"></i>
            2019
            <i class="icon icon-lg icon-heart"></i>
            <a href="http://blog.iwxyi.com">http://blog.iwxyi.com</a>
            <br/>
            Power by
            <a href="https://hexo.io/" target="_blank" rel="external nofollow">Hexo</a>&nbsp;·&nbsp;
            Theme
            <a class="tomotoeslink" href="https://github.com/tomotoes/hexo-theme-tomotoes/" target="_blank" rel="external nofollow">tomotoes</a>
        </span>

        <br/>

        <span id="RunTime" style="color:#a7a7a2;"></span>
        <br/>

        <span>
            
	<i class="icon icon-lg icon-user">
<span id="busuanzi_container_site_uv" style='display:none'>
       访问用户：<span id="busuanzi_value_site_uv"></span>
    </span>人</i>
    ·
    <i class="icon icon-lg icon-eye">
    <span id="busuanzi_container_site_pv" style='display:none'>
      访问次数：<span id="busuanzi_value_site_pv"></span>
    </span>次
    </i>


        </span>
        <br/>

        <span class="license"><a  target="_blank" rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">博客内容遵循 知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
    </div>
</footer>

    </main>
    
        
<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        <span>感谢您的鼓励支持！</span>
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" data-img="/img/dog.png" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.png" data-alipay="/img/alipay.png">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechatPay">&nbsp;&nbsp;微信&nbsp;&nbsp;</span>
                <span class="reward-toggle-item alipayPay">支付宝</span>
            </div>
        </label>
        
        <i class="icon icon-caret-up"></i>
    </div>
</div>


    
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.iwxyi.com/2018/05/09/JSP-学习笔记/&title=《JSP-学习笔记》 — 云笺&pic=http://blog.iwxyi.com/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.iwxyi.com/2018/05/09/JSP-学习笔记/&title=《JSP-学习笔记》 — 云笺&source=了解第一个 JSP 程序12345678910&lt;html&gt;    &lt;head&gt;           &lt;title&gt;第一..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.iwxyi.com/2018/05/09/JSP-学习笔记/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《JSP-学习笔记》 — 云笺&url=http://blog.iwxyi.com/2018/05/09/JSP-学习笔记/&via=http://blog.iwxyi.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.iwxyi.com/2018/05/09/JSP-学习笔记/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p class="wechatshare">扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACLUlEQVR42u3ay47CMBBE0fz/T2ekWSExNlXVBsbt6xUKkPh44fTD1yWP+3c8fn688vxL/TfK9WUDBgwY2zLu6XhmjK6MpjJagvkd9LnBgAHjHIa7yd7ymD9lzlPmBgMGDBjuJLJv3efCgAEDRpa4VsLNr703YMCAsRVDeaReJtMLZ8qGuzgXhwEDxoaMrDHwmc9v72/AgAHj3zNuc1QCQZdhzAoGDBitGZX2ZAWvTFppiBoxJgwYMLZlZOX+LOnVE1olGf7jvQEDBoymjGzqeqLrwsKWAAwYMFoz6iGde2Cisu0OFxQGDBitGdnRrkoKmh3dMN4bMGDAOJKRHblQlkMPIg0SDBgwmjL00K0StNWTWCnOhQEDRjuGvqllzcj3LQ0MGDDOYbghnVvE15sK7iYLAwaMcxjKRqYX0bJimR4Ovsi/YcCAcQAjCxPdQxJ6kc4IGWHAgNGasapJWW9Y1u8DAwaM3gx9u7yEoU8o23aNB8OAAaMpI9uIdUalkfliuWHAgNGUUQn7sjLZfIQ1NBgwYBzAsAvxZji4Kj22+xswYMBowXCnnhX3K8cvjBYFDBgwmjJuc7iTU4p3+qIM/wsDBozWDHeD0ye9KgHW7wMDBozeDHeTrTcm64HmMMKFAQNGa0aliPatYxzSjWDAgHEYw52cgs+anTBgwIDhMrK2pRt0LgsNYcCAsS1DSWLdAxPZ0rhlPhgwYJzAWJBARq0Ct1TnptAwYMBowfgBLkqJh3NQ5gIAAAAASUVORK5CYII=" alt="微信分享二维码">
</div>




    <!-- waves按钮特效 -->
<script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>

<!-- 主题配置脚本 -->
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };
</script>

<!-- jquery -->
<script src="/js/jquery.min.js?v=3.0"></script>

<!-- 搜索 -->

<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item waves-block waves-effect" onclick="location.href='{path}'">
    <div class="title ellipsis" title="{title}">{title}</div>
</li>
</template>


<!-- main博客脚本 -->
<script src="/js/main.min.js?v=3.0" ></script>

<!-- 动画&配置 -->
<script src="/js/script.min.js?v=3.0" ></script>

<!-- 脚本管理 -->
<script>

if(window.innerWidth > 800){
	/* 3D标题 */
	$(".content-header").on("mousemove", threedee);

	/* 底部追随鼠标 */
	$(".footer").hover(2);

	/* gotop键的涟漪 */
	$("#gotop").hover(1);

	/* 赞赏的粒子雨 */
	$("#reward").hover(3);

	/* 微信公众号的底部渲染 */
	$("#wechat").hover(4);

    /* 标题跳动 */
    $(".archivestitle").bumpyText();

	/* 图片点击放大 */
	const postimg = jQuery(".post-content img:not(.github-emoji)");
	postimg.on("click",function(){

		mask.classList.add("in");
		main.classList.add("Mask");
		menu.classList.add("Mask");
		var myimg = this.cloneNode(true);
		myimg.classList.add("imgShow");

		setTimeout(function(){
			jQuery(myimg).animate({
				opacity:"1"
			},1000);
		},0);

		document.body.appendChild(myimg);

		myimg.onclick=function(){
			document.body.removeChild(myimg);
			mask.classList.remove("in");
			main.classList.remove("Mask");
			menu.classList.remove("Mask");
		};

	});

}

/* 名字跳动 */
$("#name").bumpyText();


/* 网站运行时间 */
setInterval(function () {
	setTime("2019/10/11");
}, 1000);

/* 文章块的淡出 */
postshow();

/* 座右铭 */

   getHitokoto();



/* 粘贴提示 */
G($(".post-content"), location.href, "命燃芯乂");


/* 控制台 */
if (window.console && window.console.log) {
	setTimeout(function () {
		console.log("\n %c 一个坏掉的番茄 %c  © Simon Ma  http://tomotoes.com \n\n", "color:#FFFFFB;background:#1abc9c;padding:5px 0;border-radius:.5rem 0 0 .5rem;", "color:#FFFFFB;background:#080808;padding:5px 0;border-radius:0 .5rem .5rem 0;");
	}, 0);
}

</script>




<!-- 公式渲染 -->



<!-- 不蒜子 -->

<script defer src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/z16.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false}});</script></body>
</html>
