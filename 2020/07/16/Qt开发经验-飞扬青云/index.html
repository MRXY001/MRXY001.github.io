<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    <meta http-equiv="Content-Language" content="zh-cn">
    <meta charset="utf-8">
    
    
    <link rel="canonical" href="http://blog.iwxyi.com/2020/07/16/Qt开发经验-飞扬青云/">
    
    
    <title>Qt开发经验-飞扬青云 | 云笺 | 一些技术摘要和写作技巧</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    
    <meta name="theme-color" content="#77AAFF">
    
    
    <meta name="keywords" content="整理,Qt">
    
    

    

    <!-- Baidu Push -->
<script>
	(function(){
		var bp = document.createElement('script');
		var curProtocol = window.location.protocol.split(':')[0];
		if (curProtocol === 'https') {
			bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
		}
		else {
			bp.src = 'http://push.zhanzhang.baidu.com/push.js';
		}
		var s = document.getElementsByTagName("script")[0];
		s.parentNode.insertBefore(bp, s);
	})();

	var _hmt = _hmt || [];
</script>



    
    <meta name="description" content="一、开发经验总结 当编译发现大量错误的时候，从第一个看起，一个一个的解决，不要急着去看下一个错误，往往后面的错误都是由于前面的错误引起的，第一个解决后很可能都解决了。  定时器是个好东西，学会好使用它，有时候用QTimer::singleShot可以解决意想不到的问题。  打开creator，在构建套件的环境中增加MAKEFLAGS=-j8，可以不用每次设置多线程编译。珍爱时间和生命。新版的Q">
<meta name="keywords" content="整理,Qt">
<meta property="og:type" content="article">
<meta property="og:title" content="Qt开发经验-飞扬青云">
<meta property="og:url" content="http://blog.iwxyi.com/2020/07/16/Qt开发经验-飞扬青云/index.html">
<meta property="og:site_name" content="云笺">
<meta property="og:description" content="一、开发经验总结 当编译发现大量错误的时候，从第一个看起，一个一个的解决，不要急着去看下一个错误，往往后面的错误都是由于前面的错误引起的，第一个解决后很可能都解决了。  定时器是个好东西，学会好使用它，有时候用QTimer::singleShot可以解决意想不到的问题。  打开creator，在构建套件的环境中增加MAKEFLAGS=-j8，可以不用每次设置多线程编译。珍爱时间和生命。新版的Q">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2021-03-24T08:42:22.249Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Qt开发经验-飞扬青云">
<meta name="twitter:description" content="一、开发经验总结 当编译发现大量错误的时候，从第一个看起，一个一个的解决，不要急着去看下一个错误，往往后面的错误都是由于前面的错误引起的，第一个解决后很可能都解决了。  定时器是个好东西，学会好使用它，有时候用QTimer::singleShot可以解决意想不到的问题。  打开creator，在构建套件的环境中增加MAKEFLAGS=-j8，可以不用每次设置多线程编译。珍爱时间和生命。新版的Q">
    
        <link rel="alternate" type="application/atom+xml" title="云笺" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link id="style" rel="stylesheet" href="/css/style.css?v=3.0">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    
            
</head>

<body>
    <div id="loading" class="active"></div>
    <aside id="menu"  class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" >
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg" alt="avatar">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname" id="name">小乂</h5>
          
            <div id="yiyanmotto" class="motto">&nbsp;</div>
          
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
              <li class="waves-block waves-effect">
                  <a href="/"  >
                    <i class="icon icon-lg icon-home"></i>
                    <span>主 页</span><i class="icon icon-lg icon-caret-left"></i>
                  </a>
              </li>
            
              <li class="waves-block waves-effect">
                  <a href="/archives"  >
                    <i class="icon icon-lg icon-archives"></i>
                    <span>归 档</span><i class="icon icon-lg icon-caret-left"></i>
                  </a>
              </li>
            
              <li class="waves-block waves-effect">
                  <a href="/categories"  >
                    <i class="icon icon-lg icon-th-list"></i>
                    <span>分 类</span><i class="icon icon-lg icon-caret-left"></i>
                  </a>
              </li>
            
              <li class="waves-block waves-effect">
                  <a href="/tags"  >
                    <i class="icon icon-lg icon-tags"></i>
                    <span>标 签</span><i class="icon icon-lg icon-caret-left"></i>
                  </a>
              </li>
            
              <li class="waves-block waves-effect">
                  <a href="/about"  >
                    <i class="icon icon-lg icon-link"></i>
                    <span>相 关</span><i class="icon icon-lg icon-caret-left"></i>
                  </a>
              </li>
            
      <div class="nav2">
          
              <a class="nav2item" data-title="Email" href="mailto:wxy@iwxyi.com" target="_parent"title="Email" >
                <i class="icon icon-lg icon-envelope-o envelope-o"></i>
              </a>
          
              <a class="nav2item" data-title="Github" href="https://github.com/mrxy001" target="_blank"title="Github" >
                <i class="icon icon-lg icon-github github"></i>
              </a>
          
              <a class="nav2item" data-title="微博" href="https://weibo.com/u/6065548594" target="_blank"title="微博" >
                <i class="icon icon-lg icon-weibo weibo"></i>
              </a>
          

            </div>

      </ul>

    </div>
  </div>

</aside>


    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Qt开发经验-飞扬青云</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        <a href="../../atom.xml" target="_blank" class="header-icon waves-effect waves-circle waves-light" id="Rss">
            <i class="icon icon-lg icon-rss"></i>
        </a>
    </div>
</header>
<header class="content-header post-header">
    
    
    <div class="container fade-scale">
        <div id="myheader">
            <h1 class="title">
                
            </h1>
            <h5 class="subtitle">
                
                
            </h5>
        </div>
    </div>

</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#一、开发经验总结"><span class="post-toc-number">1.</span> <span class="post-toc-text">一、开发经验总结</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#二、其他经验"><span class="post-toc-number">2.</span> <span class="post-toc-text">二、其他经验</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#三、推荐的Qt论坛-个人博客-网站-群"><span class="post-toc-number">3.</span> <span class="post-toc-text">三、推荐的Qt论坛+个人博客+网站+群</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#三、其他"><span class="post-toc-number">4.</span> <span class="post-toc-text">三、其他</span></a></li></ol>
        </nav>
    </aside>
   
<article id="post-Qt开发经验-飞扬青云"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Qt开发经验-飞扬青云</h1>
        <div class="post-meta">
            <i class="icon icon-lg icon-calendar-o"></i>
            发表于
            <time class="post-time" title="2020-07-16 16:41:00" datetime="2020-07-16T08:41:00.000Z"  itemprop="datePublished">2020-07-16</time>

            <br id="mybreak"/>
            
	<i class="icon icon-lg icon-folder-o"></i>
	分类：<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Code/">Code</a></li></ul>


            <i>·</i>
            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>次浏览
</span>


        </div>
        <div class="post-count-custom">
            <i class="icon icon-lg icon-comment-o"></i>
            阅读本文可能花费您&nbsp;<span class="post-count">39</span>&nbsp;分钟
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <a id="more"></a>

<h3 id="一、开发经验总结"><a href="#一、开发经验总结" class="headerlink" title="一、开发经验总结"></a>一、开发经验总结</h3><ol>
<li><p>当编译发现大量错误的时候，从第一个看起，一个一个的解决，不要急着去看下一个错误，往往后面的错误都是由于前面的错误引起的，第一个解决后很可能都解决了。</p>
</li>
<li><p>定时器是个好东西，学会好使用它，有时候用<code>QTimer::singleShot</code>可以解决意想不到的问题。</p>
</li>
<li><p>打开creator，在构建套件的环境中增加<code>MAKEFLAGS=-j8</code>，可以不用每次设置多线程编译。珍爱时间和生命。新版的QtCreator已经默认就是j8。</p>
</li>
<li><p>如果你想顺利用QtCreator部署安卓程序，首先你要在AndroidStudio 里面配置成功，把坑全部趟平。</p>
</li>
<li><p>很多时候找到Qt对应封装的方法后，记得多看看该函数的重载，多个参数的，你会发现不一样的世界，有时候会恍然大悟，原来Qt已经帮我们封装好了。</p>
</li>
<li><p>可以在pro文件中写上标记版本号+ico图标（Qt5才支持）</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">VERSION  = <span class="number">2020.10</span><span class="number">.25</span></span><br><span class="line">RC_ICONS = main0.ico</span><br></pre></td></tr></tbody></table></figure>

<ol start="7">
<li>管理员运行程序，限定在MSVC编译器。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QMAKE_LFLAGS += /MANIFESTUAC:<span class="string">"level='requireAdministrator' uiAccess='false'"</span> #以管理员运行</span><br><span class="line">QMAKE_LFLAGS += /SUBSYSTEM:WINDOWS,<span class="string">"5.01"</span> #VS2013 在XP运行</span><br></pre></td></tr></tbody></table></figure>

<ol start="8">
<li><p>运行文件附带调试输出窗口<br><code>CONFIG += console pro</code></p>
</li>
<li><p>绘制平铺背景<code>QPainter::drawTiledPixmap</code>,绘制圆角矩形<code>QPainter::drawRoundedRect()</code>,而不是<code>QPainter::drawRoundRect()</code>;</p>
</li>
<li><p>移除旧的样式</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//移除原有样式</span></span><br><span class="line">style()-&gt;unpolish(ui-&gt;btn);</span><br><span class="line"><span class="comment">//重新设置新的该控件的样式。</span></span><br><span class="line">style()-&gt;polish(ui-&gt;btn);</span><br></pre></td></tr></tbody></table></figure>

<ol start="11">
<li>获取类的属性</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> QMetaObject *metaobject = object-&gt;metaObject();</span><br><span class="line"><span class="keyword">int</span> count = metaobject-&gt;propertyCount();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; ++i) {</span><br><span class="line">    QMetaProperty metaproperty = metaobject-&gt;property(i);</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span> *name = metaproperty.name();</span><br><span class="line">    QVariant value = object-&gt;property(name);</span><br><span class="line">    qDebug() &lt;&lt; name &lt;&lt; value;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="12">
<li><p>Qt内置图标封装在QStyle中，大概七十多个图标，可以直接拿来用。<br><code>QStyle::SP_TitleBarMenuButton</code></p>
</li>
<li><p>根据操作系统位数判断加载</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">win32 {</span><br><span class="line">    contains(DEFINES, WIN64) { DESTDIR = $${PWD}/../../bin64</span><br><span class="line">    } <span class="keyword">else</span> { DESTDIR = $${PWD}/../../bin32 }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="14">
<li><p>Qt5增强了很多安全性验证，如果出现<code>setGeometry: Unable to set geometry</code>，请将该控件的可见移到加入布局之后。</p>
</li>
<li><p>可以将控件A添加到布局，然后控件B设置该布局，这种灵活性大大提高了控件的组合度，比如可以在文本框左侧右侧增加一个搜索按钮，按钮设置图标即可。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">QPushButton *btn = <span class="keyword">new</span> QPushButton;</span><br><span class="line">btn-&gt;resize(<span class="number">30</span>, ui-&gt;lineEdit-&gt;height());</span><br><span class="line">QHBoxLayout *layout = <span class="keyword">new</span> QHBoxLayout(ui-&gt;lineEdit);</span><br><span class="line">layout-&gt;setMargin(<span class="number">0</span>);</span><br><span class="line">layout-&gt;addStretch();</span><br><span class="line">layout-&gt;addWidget(btn);</span><br></pre></td></tr></tbody></table></figure>

<ol start="16">
<li><p>对QLCDNumber控件设置样式，需要将QLCDNumber的segmentstyle设置为flat。</p>
</li>
<li><p>巧妙的使用findChildren可以<strong>查找该控件下的所有子控件</strong>。findChild为查找单个。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查找指定类名objectName的控件</span></span><br><span class="line">QList&lt;QWidget *&gt; widgets = parentWidget.findChildren&lt;QWidget *&gt;(<span class="string">"widgetname"</span>);</span><br><span class="line"><span class="comment">//查找所有QPushButton</span></span><br><span class="line">QList&lt;QPushButton *&gt; allPButtons = parentWidget.findChildren&lt;QPushButton *&gt;();</span><br><span class="line"><span class="comment">//查找一级子控件,不然会一直遍历所有子控件</span></span><br><span class="line">QList&lt;QPushButton *&gt; childButtons = parentWidget.findChildren&lt;QPushButton *&gt;(QString(), Qt::FindDirectChildrenOnly);</span><br></pre></td></tr></tbody></table></figure>

<ol start="18">
<li>巧妙的使用inherits判断是否属于某种类。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">QTimer *timer = <span class="keyword">new</span> QTimer;         <span class="comment">// QTimer inherits QObject</span></span><br><span class="line">timer-&gt;inherits(<span class="string">"QTimer"</span>);          <span class="comment">// returns true</span></span><br><span class="line">timer-&gt;inherits(<span class="string">"QObject"</span>);         <span class="comment">// returns true</span></span><br><span class="line">timer-&gt;inherits(<span class="string">"QAbstractButton"</span>); <span class="comment">// returns false</span></span><br></pre></td></tr></tbody></table></figure>

<ol start="19">
<li><p>使用弱属性机制，可以存储临时的值用于传递判断。可以通过<code>widget-&gt;dynamicPropertyNames()</code>列出所有弱属性名称，然后通过<code>widget-&gt;property("name")</code>取出对应的弱属性的值。</p>
</li>
<li><p>在开发时, 无论是出于维护的便捷性, 还是节省内存资源的考虑, 都应该有一个 <strong>qss 文件来存放所有的样式表</strong>, 而不应该将 setStyleSheet 写的到处都是。如果是初学阶段或者测试阶段可以直接UI上右键设置样式表，正式项目还是建议统一到一个qss样式表文件比较好，统一管理。</p>
</li>
<li><p>如果出现<code>Z-order assignment: is not a valid widget.</code>错误提示，用记事本打开对应的ui文件，找到<code>&lt;zorder&gt;&lt;/zorder&gt;</code>为空的地方，删除即可。</p>
</li>
<li><p>善于利用QComboBox的<strong>addItem的第二个参数设置用户数据</strong>，可以实现很多效果，使用itemData取出来。</p>
</li>
<li><p>如果用了webengine模块，发布程序的时候带上QtWebEngineProcess.exe+translations文件夹+resources文件夹。</p>
</li>
<li><p><code>a.setAttribute(Qt::AA_NativeWindows);</code>可以让每个控件都拥有独立的句柄。</p>
</li>
<li><p>Qt+Android防止程序被关闭。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">if</span> defined(Q_OS_ANDROID)</span></span><br><span class="line"><span class="function">QAndroidService <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"><span class="keyword">return</span> a.exec()</span><br><span class="line">#<span class="keyword">else</span></span><br><span class="line">QApplication a(argc, argv);</span><br><span class="line"><span class="keyword">return</span> a.exec();</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></tbody></table></figure>

<ol start="26">
<li><p>可以对整体的指示器设置样式，例如 <code>*::down-arrow,*::menu-indicator{}  *::up-arrow:disabled,*::up-arrow:off{}</code>。</p>
</li>
<li><p>可以执行位置设置背景图片。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">QMainWindow &gt; .QWidget {</span><br><span class="line">    background-color: gainsboro;</span><br><span class="line">    background-image: url(:/images/pagefold.png);</span><br><span class="line">    background-position: top right;</span><br><span class="line">    background-repeat: no-repeat</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="28">
<li><p>嵌入式linux运行Qt程序  Qt4写法：<code>./HelloQt -qws</code> &amp;   Qt5写法：<code>./HelloQt --platform xcb</code></p>
</li>
<li><p>Qtcreator软件的配置文件存放在：<code>C:\Users\Administrator\AppData\Roaming\QtProject</code>，有时候如果发现出问题了，将这个文件夹删除后打开creator自动重新生成即可。</p>
</li>
<li><p>QMediaPlayer依赖本地解码器，WIN上下载k-lite或者LAV Filters安装即可。</p>
</li>
<li><p>判断编译器类型、编译器版本、操作系统。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//GCC编译器</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> __GNUC__</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> __GNUC__ &gt;= 3 <span class="comment">// GCC3.0以上</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//MSVC编译器</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> _MSC_VER</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> _MSC_VER &gt;=1000 <span class="comment">// VC++4.0以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> _MSC_VER &gt;=1100 <span class="comment">// VC++5.0以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> _MSC_VER &gt;=1200 <span class="comment">// VC++6.0以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> _MSC_VER &gt;=1300 <span class="comment">// VC2003以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> _MSC_VER &gt;=1400 <span class="comment">// VC2005以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> _MSC_VER &gt;=1500 <span class="comment">// VC2008以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> _MSC_VER &gt;=1600 <span class="comment">// VC2010以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> _MSC_VER &gt;=1700 <span class="comment">// VC2012以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> _MSC_VER &gt;=1800 <span class="comment">// VC2013以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> _MSC_VER &gt;=1900 <span class="comment">// VC2015以上</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Borland C++</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> __BORLANDC__</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Cygwin</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> __CYGWIN__</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> __CYGWIN32__</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//mingw</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> __MINGW32__</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//windows</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> _WIN32    <span class="comment">//32bit</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> _WIN64    <span class="comment">//64bit</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> _WINDOWS     <span class="comment">//图形界面程序</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> _CONSOLE     <span class="comment">//控制台程序</span></span></span><br><span class="line"><span class="comment">//Windows（95/98/Me/NT/2000/XP/Vista）和Windows CE都定义了</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (WINVER &gt;= 0x030a)     <span class="comment">// Windows 3.1以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (WINVER &gt;= 0x0400)     <span class="comment">// Windows 95/NT4.0以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (WINVER &gt;= 0x0410)     <span class="comment">// Windows 98以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (WINVER &gt;= 0x0500)     <span class="comment">// Windows Me/2000以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (WINVER &gt;= 0x0501)     <span class="comment">// Windows XP以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (WINVER &gt;= 0x0600)     <span class="comment">// Windows Vista以上</span></span></span><br><span class="line"><span class="comment">//_WIN32_WINNT 内核版本</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (_WIN32_WINNT &gt;= 0x0500) <span class="comment">// Windows 2000以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (_WIN32_WINNT &gt;= 0x0501) <span class="comment">// Windows XP以上</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (_WIN32_WINNT &gt;= 0x0600) <span class="comment">// Windows Vista以上</span></span></span><br></pre></td></tr></tbody></table></figure>

<ol start="32">
<li>在pro中判断Qt版本及构建套件位数</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#打印版本信息</span><br><span class="line">message(qt version: $$QT_VERSION)</span><br><span class="line">#判断当前qt版本号</span><br><span class="line">QT_VERSION = $$[QT_VERSION]</span><br><span class="line">QT_VERSION = $$split(QT_VERSION, <span class="string">"."</span>)</span><br><span class="line">QT_VER_MAJ = $$member(QT_VERSION, <span class="number">0</span>)</span><br><span class="line">QT_VER_MIN = $$member(QT_VERSION, <span class="number">1</span>)</span><br><span class="line">#下面是表示 Qt5<span class="number">.5</span></span><br><span class="line">greaterThan(QT_VER_MAJ, <span class="number">4</span>) {</span><br><span class="line">greaterThan(QT_VER_MIN, <span class="number">4</span>) {</span><br><span class="line">#自己根据需要做一些处理</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">#QT_ARCH是Qt5新增的,在Qt4上没效果</span><br><span class="line">#打印当前Qt构建套件的信息</span><br><span class="line">message($$QT_ARCH)</span><br><span class="line">#表示arm平台构建套件</span><br><span class="line">contains(QT_ARCH, arm) {}</span><br><span class="line">#表示<span class="number">32</span>位的构建套件</span><br><span class="line">contains(QT_ARCH, i386) {}</span><br><span class="line">#表示<span class="number">64</span>位的构建套件</span><br><span class="line">contains(QT_ARCH, x86_64) {}</span><br></pre></td></tr></tbody></table></figure>

<ol start="33">
<li>Qt最小化后恢复界面假死冻结，加上代码</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">showEvent</span><span class="params">(QShowEvent *e)</span></span>{</span><br><span class="line">setAttribute(Qt::WA_Mapped);</span><br><span class="line">QWidget::showEvent(e);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="34">
<li><p>获取标题栏高度：<code>style()-&gt;pixelMetric(QStyle::PM_TitleBarHeight);</code> PM_TitleBarHeight点进去你会发现新大陆。</p>
</li>
<li><p>设置<strong>高分屏属性</strong>以便支持2K4K等高分辨率，尤其是手机app。必须写在main函数的<code>QApplication a(argc, argv);</code>的前面。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (QT_VERSION &gt; QT_VERSION_CHECK(5,6,0))</span></span><br><span class="line">    QGuiApplication::setAttribute(Qt::AA_EnableHighDpiScaling);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></tbody></table></figure>

<ol start="36">
<li><p>如果运行程序出现 <code>Fault tolerant heap shim applied to current process. This is usually due to previous crashes.</code> 错误。<br>办法：打开注册表，找到<code>HKEY_LOCAL_MACHINE\Software\Microsoft\Windows  NT\CurrentVersion\AppCompatFlags\Layers\</code>，选中<code>Layers</code>键值，从右侧列表中删除自己的那个程序路径即可。</p>
</li>
<li><p>Qt内置了<code>QFormLayout</code>表单布局用于自动生成标签+输入框的组合的表单界面。</p>
</li>
<li><p>qml播放视频在linux需要安装 <code>sudo apt-get install libpulse-dev</code>。</p>
</li>
<li><p>可以直接继承<code>QSqlQueryModel</code>实现自定义的QueryModel，比如某一列字体颜色，占位符，其他样式等，重写<code>QVariant CustomSqlModel::data(const QModelIndex &amp;index, int role) const</code>。</p>
</li>
<li><p>Qt5以后提供了类QScroller直接将控件滚动。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//禁用横向滚动条</span></span><br><span class="line">ui-&gt;listWidget-&gt;setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff);</span><br><span class="line"><span class="comment">//禁用纵向滚动条</span></span><br><span class="line">ui-&gt;listWidget-&gt;setVerticalScrollBarPolicy(Qt::ScrollBarAlwaysOff);</span><br><span class="line"><span class="comment">//设置横向按照像素值为单位滚动</span></span><br><span class="line">ui-&gt;listWidget-&gt;setHorizontalScrollMode(QListWidget::ScrollPerPixel);</span><br><span class="line"><span class="comment">//设置纵向按照像素值为单位滚动</span></span><br><span class="line">ui-&gt;listWidget-&gt;setVerticalScrollMode(QListWidget::ScrollPerPixel);</span><br><span class="line"><span class="comment">//设置滚动对象以及滚动方式为鼠标左键拉动滚动</span></span><br><span class="line">QScroller::grabGesture(ui-&gt;listWidget, QScroller::LeftMouseButtonGesture);</span><br><span class="line"><span class="comment">//还有个QScrollerProperties可以设置滚动的一些参数</span></span><br></pre></td></tr></tbody></table></figure>

<ol start="41">
<li>如果使用sqlite数据库不想产生数据库文件，可以创建内存数据库。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QSqlDatabase db = QSqlDatabase::addDatabase(<span class="string">"QSQLITE"</span>);</span><br><span class="line">db.setDatabaseName(<span class="string">":memory:"</span>);</span><br></pre></td></tr></tbody></table></figure>

<ol start="42">
<li><p>清空数据表并重置自增ID，<code>sql = truncate table table_name</code>。</p>
</li>
<li><p>Qtchart模块从Qt5.7开始自带，最低编译要求Qt5.4。在安装的时候记得勾选，默认不勾选。使用该模块需要引入命名空间。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QChartView&gt;</span></span></span><br><span class="line">QT_CHARTS_USE_NAMESPACE</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomChart</span> :</span> <span class="keyword">public</span> QChartView</span><br></pre></td></tr></tbody></table></figure>

<ol start="44">
<li><p>QPushButton左对齐文字，需要设置样式表QPushButton{text-align:left;}</p>
</li>
<li><p>QLabel有三种设置文本的方法，掌握好Qt的属性系统，举一反三，可以做出很多效果。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ui-&gt;label-&gt;setStyleSheet(<span class="string">"qproperty-text:hello;"</span>);</span><br><span class="line">ui-&gt;label-&gt;setProperty(<span class="string">"text"</span>, <span class="string">"hello"</span>);</span><br><span class="line">ui-&gt;label-&gt;setText(<span class="string">"hello"</span>);</span><br></pre></td></tr></tbody></table></figure>

<ol start="46">
<li>巧妙的用QEventLoop开启事件循环，可以使得很多同步获取返回结果而不阻塞界面。QEventLoop内部新建了线程执行。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">QEventLoop loop;</span><br><span class="line">connect(reply, SIGNAL(finished()), &amp;loop, SLOT(quit()));</span><br><span class="line">loop.exec();</span><br></pre></td></tr></tbody></table></figure>

<ol start="47">
<li><p>多种预定义变量 <code>#if (defined webkit) || (defined webengine)</code>，去掉生成空的debug和release目录 <code>CONFIG -= debug_and_release</code>。</p>
</li>
<li><p>新版的Qtcreator增强了语法检查，会弹出很多警告提示等，可以在插件列表中关闭clang打头的几个即可，Help&gt;About Plugins。也可以设置代码检查级别，Tools&gt;Options &gt;C++ &gt;Code Model。</p>
</li>
<li><p>QSqlTableModel的rowCount方法，<strong>默认最大返回256</strong>，如果超过256，可以将表格拉到底部，会自动加载剩余的，每次最大加载256条数据，如果需要打印或者导出数据，记得最好采用sql语句去查询，而不是使用QSqlTableModel的rowCount方法。不然永远最大只会导出256条数据。<br>如果数据量很小，也可以采用如下方法：</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//主动加载所有数据,不然获取到的行数&lt;=256</span></span><br><span class="line"><span class="keyword">while</span>(model-&gt;canFetchMore()) {</span><br><span class="line">    model-&gt;fetchMore();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="50">
<li><p>如果需要指定无边框窗体，但是又需要保留操作系统的边框特性，可以<strong>自由拉伸边框</strong>，可以使用 <code>setWindowFlags(Qt::CustomizeWindowHint);</code></p>
</li>
<li><p>在某些http post数据的时候，如果采用的是&amp;字符串连接的数据发送，中文解析乱码的话，需要将中文进行<strong>URL转码</strong>。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QString content = <span class="string">"测试中文"</span>;</span><br><span class="line">QString note = content.toUtf8().toPercentEncoding();</span><br></pre></td></tr></tbody></table></figure>

<ol start="52">
<li><p>Qt<strong>默认不支持大资源文件</strong>，比如添加了字体文件，需要pro文件开启。<br><code>CONFIG += resources_big</code></p>
</li>
<li><p>Qt中继承QWidget之后，样式表不起作用，解决办法有三个。强烈推荐方法一。</p>
</li>
</ol>
<ul>
<li>方法一：设置属性 <code>this-&gt;setAttribute(Qt::WA_StyledBackground, true);</code></li>
<li>方法二：改成继承QFrame，因为QFrame自带paintEvent函数已做了实现，在使用样式表时会进行解析和绘制。</li>
<li>方法三：重新实现QWidget的paintEvent函数时，使用QStylePainter绘制。</li>
</ul>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> Widget::paintEvent(QPaintEvent *)</span><br><span class="line">{</span><br><span class="line">    QStyleOption option;</span><br><span class="line">    option.initFrom(<span class="keyword">this</span>);</span><br><span class="line">    <span class="function">QPainter <span class="title">painter</span><span class="params">(<span class="keyword">this</span>)</span></span>;</span><br><span class="line">    style()-&gt;drawPrimitive(QStyle::PE_Widget, &amp;option, &amp;painter, <span class="keyword">this</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="54">
<li><p>有时候在界面上加了弹簧，需要动态改变弹簧对应的拉伸策略，对应方法为changeSize，很多人会选择使用set开头去找，找不到的。</p>
</li>
<li><p>在使用QFile的过程中，不建议频繁的打开文件写入然后再关闭文件，比如间隔5ms输出日志，IO性能瓶颈很大，这种情况建议先打开文件不要关闭，等待合适的时机比如析构函数中或者日期变了需要重新变换日志文件的时候关闭文件。不然短时间内大量的打开关闭文件会很卡，文件越大越卡。</p>
</li>
<li><p>在很多网络应用程序，需要自定义心跳包来保持连接，不然断电或者非法关闭程序，对方识别不到，需要进行超时检测，但是有些程序没有提供心跳协议，此时需要启用系统层的保活程序，此方法适用于TCP连接。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> fd = tcpSocket-&gt;socketDescriptor();</span><br><span class="line"><span class="keyword">int</span> keepAlive = <span class="number">1</span>;      <span class="comment">//开启keepalive属性,缺省值:0(关闭)</span></span><br><span class="line"><span class="keyword">int</span> keepIdle = <span class="number">5</span>;       <span class="comment">//如果在5秒内没有任何数据交互,则进行探测,缺省值:7200(s)</span></span><br><span class="line"><span class="keyword">int</span> keepInterval = <span class="number">2</span>;   <span class="comment">//探测时发探测包的时间间隔为2秒,缺省值:75(s)</span></span><br><span class="line"><span class="keyword">int</span> keepCount = <span class="number">2</span>;      <span class="comment">//探测重试的次数,全部超时则认定连接失效,缺省值:9(次)</span></span><br><span class="line">setsockopt(fd, SOL_SOCKET, SO_KEEPALIVE, (<span class="keyword">void</span> *)&amp;keepAlive, <span class="keyword">sizeof</span>(keepAlive));</span><br><span class="line">setsockopt(fd, SOL_TCP, TCP_KEEPIDLE, (<span class="keyword">void</span> *)&amp;keepIdle, <span class="keyword">sizeof</span>(keepIdle));</span><br><span class="line">setsockopt(fd, SOL_TCP, TCP_KEEPINTVL, (<span class="keyword">void</span> *)&amp;keepInterval, <span class="keyword">sizeof</span>(keepInterval));</span><br><span class="line">setsockopt(fd, SOL_TCP, TCP_KEEPCNT, (<span class="keyword">void</span> *)&amp;keepCount, <span class="keyword">sizeof</span>(keepCount));</span><br></pre></td></tr></tbody></table></figure>

<ol start="57">
<li><p>如果程序打包好以后弹出提示 <code>This application failed to start because it could not find or load the Qt platform plugin</code> 一般都是因为platforms插件目录未打包或者打包错了的原因导致的。</p>
</li>
<li><p>非常不建议tr中包含中文，尽管现在的新版Qt支持中文到其他语言的翻译，但是很不规范，也不知道TMD是谁教的，tr的本意是包含英文，然后翻译到其他语言比如中文，现在大量的初学者滥用tr，如果没有翻译的需求，禁用tr，tr需要开销的，Qt默认会认为他需要翻译，会额外进行特殊处理。</p>
</li>
<li><p>很多人Qt和Qt Creator傻傻分不清楚，经常问Qt什么版本结果发一个Qt Creator的版本过来，Qt Creator是使用Qt编写的集成开发环境IDE，和宇宙第一的Visual Studio一样，他可以是msvc编译器的（WIN对应的Qt集成安装环境中自带的Qt Cerator是msvc的），也可以是mingw编译的，还可以是gcc的。如果是自定义控件插件，需要集成到Qt Creator中，必须保证该插件的动态库文件（dll或者so等文件）对应的编译器和Qt版本以及位数和Qt Creator的版本完全一致才行，否则基本不大可能集成进去。特别注意的是Qt集成环境安装包中的Qt版本和Qt Creator版本未必完全一致，必须擦亮眼睛看清楚，有些是完全一致的。</p>
</li>
<li><p>超过两处相同处理的代码，建议单独写成函数。代码尽量规范精简，比如 <code>if(a == 123)</code> 要写成 <code>if (123 == a)</code>，值在前面，再比如<code>if (ok == true)</code> 要写成 <code>if (ok)</code>，<code>if (ok == false)</code> 要写成 <code>if (!ok)</code>等。</p>
</li>
<li><p>很多人问Qt嵌入式平台用哪个好，这里统一回答（当前时间节点2018年）：imx6+335x比较稳定，性能高就用RK3288 RK3399，便宜的话就用全志H3，玩一玩可以用树莓派香橙派。</p>
</li>
<li><p>对于大段的注释代码，建议用 <code>#if 0 #endif</code> 将代码块包含起来，而不是将该段代码选中然后全部 <code>//</code> ，下次要打开这段代码的话，又需要重新选中一次取消，如果采用的是 <code>#if 0</code>则只要把<code>0</code>改成<code>1</code>即可，效率大大提升。</p>
</li>
<li><p>Qt打包发布，有很多办法，Qt5以后提供了打包工具windeployqt（linux上为linuxdeployqt，mac上为macdeployqt）可以很方便的将应用程序打包，使用下来发现也不是万能的，有时候会多打包一些没有依赖的文件，有时候又会忘记打包一些插件尤其是用了qml的情况下，而且不能识别第三方库，比如程序依赖ffmpeg，则对应的库需要自行拷贝，终极大法就是将你的可执行文件复制到Qt安装目录下的bin目录，然后整个一起打包，挨个删除不大可能依赖的组件，直到删到正常运行为止。</p>
</li>
<li><p>Qt中的动画，底层用的是QElapsedTimer定时器来完成处理，比如产生一些指定规则算法的数据，然后对属性进行处理。</p>
</li>
<li><p>在绘制无背景颜色只有边框颜色的圆形时候，可以用绘制360度的圆弧替代，效果完全一致。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">QRect <span class="title">rect</span><span class="params">(-radius, -radius, radius * <span class="number">2</span>, radius * <span class="number">2</span>)</span></span>;</span><br><span class="line"><span class="comment">//以下两种方法二选一,其实绘制360度的圆弧=绘制无背景的圆形</span></span><br><span class="line">painter-&gt;drawArc(rect, <span class="number">0</span>, <span class="number">360</span> * <span class="number">16</span>);</span><br><span class="line">painter-&gt;drawEllipse(rect);</span><br></pre></td></tr></tbody></table></figure>

<ol start="66">
<li><p>不要把d指针看的很玄乎，其实就是在类的实现文件定义了一个私有类，用来存放局部变量，个人建议在做一些小项目时，没有太大必要引入这种机制，会降低代码可读性，增加复杂性，新手接受项目后会看的很懵逼。</p>
</li>
<li><p>很多人在绘制的时候，设置画笔以为就只可以设置个单调的颜色，其实QPen还可以设置brush，这样灵活性就提高不知道多少倍，比如设置QPen的brush以后，可以使用各种渐变，比如<strong>绘制渐变颜色</strong>的进度条和文字等，而不再是单调的一种颜色。</p>
</li>
<li><p>很多控件都带有viewport，比如QTextEdit/QTableWidget/QScrollArea，有时候对这些控件直接处理的时候发现不起作用，需要对其viewport()设置才行，比如设置滚动条区域背景透明，需要使用<code>scrollArea-&gt;viewport()-&gt;setStyleSheet("background-color:transparent;");</code>而不是<code>scrollArea-&gt;setStyleSheet("QScrollArea{background-color:transparent;}");</code></p>
</li>
<li><p>有时候设置了鼠标跟踪<code>setMouseTracking</code>为真，如果该窗体上面还有其他控件，当鼠标移到其他控件上面的时候，父类的鼠标移动事件MouseMove识别不到了，此时需要用到HoverMove事件，需要先设置 <code>setAttribute(Qt::WA_Hover, true);</code></p>
</li>
<li><p>Qt封装的<code>QDateTime</code>日期时间类非常强大，可以字符串和日期时间相互转换，也可以毫秒数和日期时间相互转换，还可以1970经过的秒数和日期时间相互转换等。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">QDateTime dateTime;</span><br><span class="line">QString dateTime_str = dateTime.currentDateTime().toString(<span class="string">"yyyy-MM-dd hh:mm:ss"</span>);</span><br><span class="line"><span class="comment">//从字符串转换为毫秒（需完整的年月日时分秒）</span></span><br><span class="line">datetime.fromString(<span class="string">"2011-09-10 12:07:50:541"</span>, <span class="string">"yyyy-MM-dd hh:mm:ss:zzz"</span>).toMSecsSinceEpoch();</span><br><span class="line"><span class="comment">//从字符串转换为秒（需完整的年月日时分秒）</span></span><br><span class="line">datetime.fromString(<span class="string">"2011-09-10 12:07:50:541"</span>, <span class="string">"yyyy-MM-dd hh:mm:ss:zzz"</span>).toTime_t();</span><br><span class="line"><span class="comment">//从毫秒转换到年月日时分秒</span></span><br><span class="line">datetime.fromMSecsSinceEpoch(<span class="number">1315193829218</span>).toString(<span class="string">"yyyy-MM-dd hh:mm:ss:zzz"</span>);</span><br><span class="line"><span class="comment">//从秒转换到年月日时分秒（若有zzz，则为000）</span></span><br><span class="line">datetime.fromTime_t(<span class="number">1315193829</span>).toString(<span class="string">"yyyy-MM-dd hh:mm:ss[:zzz]"</span>);</span><br></pre></td></tr></tbody></table></figure>

<ol start="71">
<li><p>在我们使用QList、QStringList、QByteArray等链表或者数组的过程中，如果只需要取值，而不是赋值，强烈<strong>建议使用 <code>at()</code> 取值而不是 <code>[]</code> 操作符</strong>，在官方书籍《C++ GUI Qt 4编程（第二版）》的书中有特别的强调说明，此教材的原作者据说是Qt开发的核心人员编写的，所以还是比较权威，至于使用 at() 与使用 [] 操作符速度效率的比较，网上也有网友做过此类对比。原文在书的212页，这样描述的：Qt对所有的容器和许多其他类都使用隐含共享，隐含共享是Qt对不希望修改的数据决不进行复制的保证，为了使隐含共享的作用发挥得最好，可以采用两个新的编程习惯。第一种习惯是对于一个（非常量的）向量或者列表进行只读存取时，使用 at() 函数而不用 [] 操作符，因为Qt的容器类不能辨别 [] 操作符是否将出现在一个赋值的左边还是右边，他假设最坏的情况出现并且强制执行深层赋值，而 at() 函数则不被允许出现在一个赋值的左边。</p>
</li>
<li><p>如果是dialog窗体，需要在exec以后还能让其他代码继续执行，请在dialog窗体exec前增加一行代码，否则会阻塞窗体消息。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">QDialog dialog;</span><br><span class="line">dialog.setWindowModality(Qt::WindowModal);</span><br><span class="line">dialog.exec();</span><br></pre></td></tr></tbody></table></figure>

<ol start="73">
<li><p>安全的删除Qt的对象类，<strong>强烈建议使用<code>deleteLater</code>而不是<code>delete</code></strong>，因为deleteLater会选择在合适的时机进行释放，而delete会立即释放，很可能会出错崩溃。如果要<strong>批量删除对象集合</strong>，可以用<code>qDeleteAll</code>，比如 <code>qDeleteAll(btns);</code></p>
</li>
<li><p>在QTableView控件中，如果需要自定义的列按钮、复选框、下拉框等其他模式显示，可以采用自定义委托QItemDelegate来实现，如果需要禁用某列，则在自定义委托的重载createEditor函数返回0即可。自定义委托对应的控件在进入编辑状态的时候出现，如果想一直出现，则需要重载paint函数用drawPrimitive或者drawControl来绘制。</p>
</li>
<li><p>将 <code>QApplication::style()</code> 对应的drawPrimitive、drawControl、drawItemText、drawItemPixmap等几个方法用熟悉了，再结合QStyleOption属性，可以玩转各种自定义委托，还可以直接使用paint函数中的painter进行各种绘制，各种牛逼的表格、树状列表、下拉框等，绝对屌炸天。<code>QApplication::style()-&gt;drawControl</code> 的第4个参数如果不设置，则绘制出来的控件不会应用样式表。</p>
</li>
<li><p>心中有坐标，万物皆painter，强烈建议在学习自定义控件绘制的时候，将qpainter.h头文件中的函数全部看一遍、试一遍、理解一遍，这里边包含了所有Qt内置的绘制的接口，对应的参数都试一遍，你会发现很多新大陆，会大大激发你的绘制的兴趣，犹如神笔马良一般，策马崩腾遨游代码绘制的世界。</p>
</li>
<li><p>在使用<code>setItemWidget</code>或者<code>setCellWidget</code>的过程中，有时候会发现设置的控件没有居中显示而是默认的左对齐，而且不会自动拉伸填充，对于追求完美的程序员来说，这个可不大好看，有个终极通用办法就是，将这个控件放到一个widget的布局中，然后将widget添加到item中，这样就完美解决了，而且这样可以组合多个控件产生复杂的控件。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//实例化进度条控件</span></span><br><span class="line">QProgressBar *progress = <span class="keyword">new</span> QProgressBar;</span><br><span class="line"><span class="comment">//增加widget+布局巧妙实现居中</span></span><br><span class="line">QWidget *widget = <span class="keyword">new</span> QWidget;</span><br><span class="line">QHBoxLayout *layout = <span class="keyword">new</span> QHBoxLayout;</span><br><span class="line">layout-&gt;setSpacing(<span class="number">0</span>);</span><br><span class="line">layout-&gt;setMargin(<span class="number">0</span>);</span><br><span class="line">layout-&gt;addWidget(progress);</span><br><span class="line">widget-&gt;setLayout(layout);</span><br><span class="line">ui-&gt;tableWidget-&gt;setCellWidget(<span class="number">0</span>, <span class="number">0</span>, widget);</span><br></pre></td></tr></tbody></table></figure>

<ol start="78">
<li>很多时候需要在已知背景色的情况下，能够清晰的绘制文字，这个时候需要计算对应的文字颜色。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据背景色自动计算合适的前景色</span></span><br><span class="line"><span class="keyword">double</span> gray = (<span class="number">0.299</span> * color.red() + <span class="number">0.587</span> * color.green() + <span class="number">0.114</span> * color.blue()) / <span class="number">255</span>;</span><br><span class="line">QColor textColor = gray &gt; <span class="number">0.5</span> ? Qt::black : Qt::white;</span><br></pre></td></tr></tbody></table></figure>

<ol start="79">
<li>对QTableView或者QTableWidget禁用列拖动。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (QT_VERSION &lt;= QT_VERSION_CHECK(5,0,0))</span></span><br><span class="line">    ui-&gt;tableView-&gt;horizontalHeader()-&gt;setResizeMode(<span class="number">0</span>, QHeaderView::Fixed);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line">    ui-&gt;tableView-&gt;horizontalHeader()-&gt;setSectionResizeMode(<span class="number">0</span>, QHeaderView::Fixed);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></tbody></table></figure>

<ol start="80">
<li><p>从Qt4转到Qt5，有些类的方法已经废弃或者过时了，如果想要<strong>在Qt5中启用Qt4的方法</strong>，比如QHeadVew的setMovable，可以在你的pro或者pri文件中加上一行即可：<code>DEFINES += QT_DISABLE_DEPRECATED_BEFORE=0</code></p>
</li>
<li><p>Qt中的QColor对颜色封装的很完美，支持各种转换，比如rgb、hsb、cmy、hsl，对应的是toRgb、toHsv、toCmyk、toHsl，还支持透明度设置，颜色值还能转成16进制格式显示。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">QColor <span class="title">color</span><span class="params">(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>)</span></span>;</span><br><span class="line">qDebug() &lt;&lt; color.name() &lt;&lt; color.name(QColor::HexArgb);</span><br><span class="line"><span class="comment">//输出 #ff0000 #64ff0000</span></span><br></pre></td></tr></tbody></table></figure>

<ol start="82">
<li>QVariant类型异常的强大，可以说是万能的类型，在进行配置文件的存储的时候，经常会用到QVariant的转换，QVariant默认自带了toString、toFloat等各种转换，但是还是不够，比如有时候需要从QVariant转到QColor，而却没有提供toColor的函数，这个时候就要用到万能办法。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (variant.typeName() == <span class="string">"QColor"</span>) {</span><br><span class="line">    QColor color = variant.value&lt;QColor&gt;();</span><br><span class="line">    QFont font = variant.value&lt;QFont&gt;();</span><br><span class="line">    QString nodeValue = color.name(QColor::HexArgb);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="83">
<li><p>Qt中的<strong>QString和const char *之间转换</strong>，最好用<code>toStdString().c_str()</code>而不是<code>toLocal8Bit().constData()</code>，比如在setProperty中如果用后者，字符串中文就会不正确，英文正常。</p>
</li>
<li><p>Qt的信号槽机制非常牛逼，也是Qt的独特的核心功能之一，有时候我们在很多窗体中传递信号来实现更新或者处理，如果窗体层级比较多，比如窗体A的父类是窗体B，窗体B的父类是窗体C，窗体C有个子窗体D，如果窗体A一个信号要传递给窗体D，问题来了，必须先经过窗体B中转到窗体C再到窗体D才行，这样的话各种信号关联信号的connect会非常多而且管理起来比较乱，可以考虑增加一个全局的单例类AppEvent，公共的信号放这里，然后窗体A对应信号绑定到AppEvent，窗体D绑定AppEvent的信号到对应的槽函数即可，干净清爽整洁。</p>
</li>
<li><p>QTextEdit右键菜单默认英文的，如果想要中文显示，加载widgets.qm文件即可，一个Qt程序中可以安装多个翻译文件，不冲突。</p>
</li>
<li><p>Qt中有个全局的焦点切换信号<code>focusChanged</code>，可以用它做自定义的输入法。Qt4中默认会安装输入法上下文，比如在main函数打印<code>a.inputContext</code>会显示值，这个默认安装的输入法上下文，会拦截两个牛逼的信号<code>QEvent::RequestSoftwareInputPanel</code>和<code>QEvent::CloseSoftwareInputPanel</code>，以至于就算你安装了全局的事件过滤器依然识别不到这两个信号，你只需要在main函数执行<code>a.setInputContext(0)</code>即可，意思是安装输入法上下文为空。</p>
</li>
<li><p>在Qt5.10以后，表格控件QTableWidget或者QTableView的默认最小列宽改成了15，以前的版本是0，所以在新版的qt中，如果设置表格的列宽过小，不会应用，取的是最小的列宽。所以如果要设置更小的列宽需要重新设置<code>ui-&gt;tableView-&gt;horizontalHeader()-&gt;setMinimumSectionSize(0);</code></p>
</li>
<li><p>Qt源码中内置了一些<strong>未公开的不能直接使用的黑科技</strong>，都藏在对应模块的private中，比如<code>gui-private</code> <code>widgets-private</code>等，比如zip文件解压类<code>QZipReader</code>、压缩类<code>QZipWriter</code>就在<code>gui-private模块</code>中，需要在pro中引入<code>QT += gui-private</code>才能使用。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"QtGui/private/qzipreader_p.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"QtGui/private/qzipwriter_p.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function">QZipReader <span class="title">reader</span><span class="params">(dirPath)</span></span>;</span><br><span class="line"><span class="function">QString <span class="title">path</span><span class="params">(<span class="string">""</span>)</span></span>;</span><br><span class="line"><span class="comment">//解压文件夹到当前目录</span></span><br><span class="line">reader.extractAll(path);</span><br><span class="line"><span class="comment">//文件夹名称</span></span><br><span class="line">QZipReader::FileInfo fileInfo = reader.entryInfoAt(<span class="number">0</span>);</span><br><span class="line"><span class="comment">//解压文件</span></span><br><span class="line"><span class="function">QFile <span class="title">file</span><span class="params">(filePath)</span></span>;</span><br><span class="line">file.open(QIODevice::WriteOnly);</span><br><span class="line">file.write(reader.fileData(QString::fromLocal8Bit(<span class="string">"%1"</span>).arg(filePath)));</span><br><span class="line">file.close();</span><br><span class="line">reader.close();</span><br><span class="line"></span><br><span class="line">QZipWriter *writer = <span class="keyword">new</span> QZipWriter(dirPath);</span><br><span class="line"><span class="comment">//添加文件夹</span></span><br><span class="line">writer-&gt;addDirectory(unCompress);</span><br><span class="line"><span class="comment">//添加文件</span></span><br><span class="line"><span class="function">QFile <span class="title">file</span><span class="params">(filePath)</span></span>;</span><br><span class="line">file.open(QIODevice::ReadOnly);</span><br><span class="line">writer-&gt;addFile(data, file.readAll());</span><br><span class="line">file.close();</span><br><span class="line">writer-&gt;close();</span><br></pre></td></tr></tbody></table></figure>

<ol start="89">
<li><p>理论上串口和网络收发数据都是默认异步的，操作系统自动调度，完全不会卡住界面，网上那些说收发数据卡住界面主线程的都是扯几把蛋，真正的耗时是在运算以及运算后的处理，而不是收发数据，在一些小数据量运算处理的项目中，一般不建议动用线程去处理，线程需要调度开销的，不要什么东西都往线程里边扔，线程不是万能的。只有当真正需要将一些很耗时的操作比如编码解码等，才需要移到线程处理。</p>
</li>
<li><p>在构造函数中获取控件的宽高很可能是不正确的，需要在控件首次显示以后再获取才是正确的，控件是在首次显示以后才会设置好正确的宽高值，记住是在首次显示以后，而不是构造函数或者程序启动好以后，如果程序启动好以后有些容器控件比如QTabWidget中的没有显示的页面的控件，你去获取宽高很可能也是不正确的，万无一失的办法就是首次显示以后去获取。</p>
</li>
<li><p>数据库处理一般建议在主线程，如果非要在其他线程，务必记得打开数据库也要在那个线程，即在那个线程使用数据库就在那个线程打开，不能打开数据库在主线程，执行sql在子线程，很可能出问题。</p>
</li>
<li><p>新版的QTcpServer类在64位版本的Qt下很可能不会进入incomingConnection函数，那是因为Qt5对应的incomingConnection函数参数变了，由之前的int改成了qintptr，改成qintptr有个好处，在32位上自动是quint32而在64位上自动是quint64，如果在Qt5中继续写的参数是int则在32位上没有问题在64位上才有问题，所以为了兼容Qt4和Qt5，必须按照不一样的参数写。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (QT_VERSION &gt; QT_VERSION_CHECK(5,0,0))</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">incomingConnection</span><span class="params">(qintptr handle)</span></span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">incomingConnection</span><span class="params">(<span class="keyword">int</span> handle)</span></span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></tbody></table></figure>

<ol start="93">
<li><p>Qt支持所有的界面控件比如QPushButton、QLineEdit自动关联 <code>on_控件名_信号(参数)</code> 信号槽，比如按钮的单击信号 <code>on_pushButton_clicked()</code>，然后直接实现槽函数即可。</p>
</li>
<li><p>QWebEngineView控件由于使用了opengl，在某些电脑上可能由于opengl的驱动过低会导致花屏或者各种奇奇怪怪的问题，比如showfullscreen的情况下鼠标右键失效，需要在main函数启用软件opengl渲染。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (QT_VERSION &gt; QT_VERSION_CHECK(5,4,0))</span></span><br><span class="line">    QCoreApplication::setAttribute(Qt::AA_UseSoftwareOpenGL);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br></pre></td></tr></tbody></table></figure>

<p>另外一个方法解决 全屏+QWebEngineView控件一起会产生右键菜单无法弹出的BUG,需要上移一个像素</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">QRect rect = qApp-&gt;desktop()-&gt;geometry();</span><br><span class="line">rect.setY(<span class="number">-1</span>);</span><br><span class="line">rect.setHeight(rect.height());</span><br><span class="line"><span class="keyword">this</span>-&gt;setGeometry(rect);</span><br></pre></td></tr></tbody></table></figure>

<ol start="95">
<li>QStyle内置了很多方法用处很大，比如精确获取滑动条鼠标按下处的值。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QStyle::sliderValueFromPosition(minimum(), maximum(), event-&gt;x(), width());</span><br></pre></td></tr></tbody></table></figure>

<ol start="96">
<li>用QFile读写文件的时候，推荐<strong>用<code>QTextStream</code>文件流的方式来读写文件</strong>，速度快很多，基本上会有30%的提升，文件越大性能区别越大。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//从文件加载英文属性与中文属性对照表</span></span><br><span class="line"><span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">":/propertyname.txt"</span>)</span></span>;</span><br><span class="line"><span class="keyword">if</span> (file.open(QFile::ReadOnly)) {</span><br><span class="line">    <span class="comment">//QTextStream方法读取速度至少快30%</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line">    <span class="keyword">while</span>(!file.atEnd()) {</span><br><span class="line">        QString line = file.readLine();</span><br><span class="line">        appendName(line);</span><br><span class="line">    }</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line">    <span class="function">QTextStream <span class="title">in</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">    <span class="keyword">while</span> (!in.atEnd()) {</span><br><span class="line">        QString line = in.readLine();</span><br><span class="line">        appendName(line);</span><br><span class="line">    }</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    file.close();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="97">
<li>用<code>QFile.readAll()</code>读取QSS文件默认是ANSI格式，不支持UTF8，如果在QtCreator中打开qss文件来编辑保存，这样很可能导致qss加载以后没有效果。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> frmMain::initStyle()</span><br><span class="line">{</span><br><span class="line">    <span class="comment">//加载样式表</span></span><br><span class="line">    QString qss;</span><br><span class="line">    <span class="comment">//QFile file(":/qss/psblack.css");</span></span><br><span class="line">    <span class="comment">//QFile file(":/qss/flatwhite.css");</span></span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">":/qss/lightblue.css"</span>)</span></span>;</span><br><span class="line">    <span class="keyword">if</span> (file.open(QFile::ReadOnly)) {</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 1</span></span><br><span class="line">        <span class="comment">//用QTextStream读取样式文件不用区分文件编码 带bom也行</span></span><br><span class="line">        QStringList <span class="built_in">list</span>;</span><br><span class="line">        <span class="function">QTextStream <span class="title">in</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">        <span class="comment">//in.setCodec("utf-8");</span></span><br><span class="line">        <span class="keyword">while</span> (!in.atEnd()) {</span><br><span class="line">            QString line;</span><br><span class="line">            in &gt;&gt; line;</span><br><span class="line">            <span class="built_in">list</span> &lt;&lt; line;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        qss = <span class="built_in">list</span>.join("\n");</span><br><span class="line">#<span class="keyword">else</span></span><br><span class="line">        //用readAll读取默认支持的是ANSI格式,如果不小心用creator打开编辑过了很可能打不开</span><br><span class="line">        qss = QLatin1String(file.readAll());</span><br><span class="line">#endif</span><br><span class="line">        QString paletteColor = qss.mid(20, 7);</span><br><span class="line">        qApp-&gt;setPalette(QPalette(QColor(paletteColor)));</span><br><span class="line">        qApp-&gt;setStyleSheet(qss);</span><br><span class="line">        file.close();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="98">
<li>QString内置了很多转换函数，比如可以调用toDouble转为double数据，但是当你转完并打印的时候你会发现精确少了，只剩下三位了，其实原始数据还是完整的精确度的，只是打印的时候优化成了三位，如果要保证完整的精确度，可以调用 <code>qSetRealNumberPrecision</code> 函数设置精确度位数即可。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">QString s1, s2;</span><br><span class="line">s1 = <span class="string">"666.5567124"</span>;</span><br><span class="line">s2.setNum(<span class="number">888.5632123</span>, <span class="string">'f'</span>, <span class="number">7</span>);</span><br><span class="line">qDebug() &lt;&lt; qSetRealNumberPrecision(<span class="number">10</span>) &lt;&lt; s1.toDouble() &lt;&lt; s2.toDouble();</span><br></pre></td></tr></tbody></table></figure>

<ol start="99">
<li>用<code>QScriptValueIterator</code>解析数据的时候，会发现总是会多一个节点内容，并且内容为空，如果需要跳过则增加一行代码。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (it.hasNext()) {</span><br><span class="line">    it.next();    </span><br><span class="line">    <span class="keyword">if</span> (it.flags() &amp; QScriptValue::SkipInEnumeration)      </span><br><span class="line">       <span class="keyword">continue</span>;     </span><br><span class="line">    qDebug() &lt;&lt; it.name();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="100">
<li><p><code>setPixmap</code>是最糟糕的贴图方式，一般只用来简单的不是很频繁的贴图，<strong>频繁的建议painter绘制</strong>，默认双缓冲，在高级点用opengl绘制，利用GPU。</p>
</li>
<li><p>如果需要在尺寸改变的时候不重绘窗体，则设置属性即可 <code>this-&gt;setAttribute(Qt::WA_StaticContents, true);</code> 这样可以避免可以避免对已经显示区域的重新绘制。</p>
</li>
<li><p>默认程序中获取焦点以后会有虚边框，如果看着觉得碍眼不舒服可以去掉，设置样式即可：<code>setStyleSheet("*{outline:0px;}");</code></p>
</li>
<li><p>Qt表格控件一些常用的设置封装，QTableWidget继承自QTableView，所以下面这个函数支持传入QTableWidget。</p>
</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> QUIHelper::initTableView(QTableView *tableView, <span class="keyword">int</span> rowHeight, <span class="keyword">bool</span> headVisible, <span class="keyword">bool</span> edit)</span><br><span class="line">{</span><br><span class="line">    <span class="comment">//奇数偶数行颜色交替</span></span><br><span class="line">    tableView-&gt;setAlternatingRowColors(<span class="literal">false</span>);</span><br><span class="line">    <span class="comment">//垂直表头是否可见</span></span><br><span class="line">    tableView-&gt;verticalHeader()-&gt;setVisible(headVisible);</span><br><span class="line">    <span class="comment">//选中一行表头是否加粗</span></span><br><span class="line">    tableView-&gt;horizontalHeader()-&gt;setHighlightSections(<span class="literal">false</span>);</span><br><span class="line">    <span class="comment">//最后一行拉伸填充</span></span><br><span class="line">    tableView-&gt;horizontalHeader()-&gt;setStretchLastSection(<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">//行标题最小宽度尺寸</span></span><br><span class="line">    tableView-&gt;horizontalHeader()-&gt;setMinimumSectionSize(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">//行标题最大高度</span></span><br><span class="line">    tableView-&gt;horizontalHeader()-&gt;setMaximumHeight(rowHeight);</span><br><span class="line">    <span class="comment">//默认行高</span></span><br><span class="line">    tableView-&gt;verticalHeader()-&gt;setDefaultSectionSize(rowHeight);</span><br><span class="line">    <span class="comment">//选中时一行整体选中</span></span><br><span class="line">    tableView-&gt;setSelectionBehavior(QAbstractItemView::SelectRows);</span><br><span class="line">    <span class="comment">//只允许选择单个</span></span><br><span class="line">    tableView-&gt;setSelectionMode(QAbstractItemView::SingleSelection);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//表头不可单击</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> (QT_VERSION &gt; QT_VERSION_CHECK(5,0,0))</span></span><br><span class="line">    tableView-&gt;horizontalHeader()-&gt;setSectionsClickable(<span class="literal">false</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line">    tableView-&gt;horizontalHeader()-&gt;setClickable(<span class="literal">false</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//鼠标按下即进入编辑模式</span></span><br><span class="line">    <span class="keyword">if</span> (edit) {</span><br><span class="line">        tableView-&gt;setEditTriggers(QAbstractItemView::CurrentChanged | QAbstractItemView::DoubleClicked);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        tableView-&gt;setEditTriggers(QAbstractItemView::NoEditTriggers);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="104">
<li>在一些大的项目中，可能嵌套了很多子项目，有时候会遇到子项目依赖其他子项目的时候，比如一部分子项目用来生成动态库，一部分子项目依赖这个动态库进行编译，此时就需要子项目按照顺序编译。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">TEMPLATE = subdirs</span><br><span class="line">#设置ordered参数以后会依次编译 demo designer examples</span><br><span class="line">CONFIG  += ordered</span><br><span class="line">SUBDIRS += demo</span><br><span class="line">SUBDIRS += designer</span><br><span class="line">SUBDIRS += examples</span><br></pre></td></tr></tbody></table></figure>

<ol start="105">
<li>MSVC编译器的选择说明</li>
</ol>
<ul>
<li>如果是32位的Qt则编译器选择x86开头的</li>
<li>如果是64位的Qt则编译器选择amd64开头的</li>
<li>具体是看安装的Qt构建套件版本以及目标运行平台的系统位数和架构</li>
<li>一般现在的电脑默认以64位的居多，选择amd64即可</li>
<li>如果用户需要兼容32位的系统则建议选择32位的Qt，这样即可在32位也可以在64位系统运行</li>
<li>诸葛大佬补充：x86/x64都是编译环境和运行环境相同，没有或。带下划线的就是交叉编译，前面是编译环境，后面是运行环境。</li>
</ul>
<table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>x86</td>
<td>32/64位系统上编译在32/64位系统上运行</td>
</tr>
<tr>
<td>x86_amd64</td>
<td>32/64位系统上编译在64位系统上运行</td>
</tr>
<tr>
<td>x86_arm</td>
<td>32/64位系统上编译在arm系统上运行</td>
</tr>
<tr>
<td>amd64</td>
<td>64位系统上编译在64位系统上运行</td>
</tr>
<tr>
<td>amd64_x86</td>
<td>64位系统上编译在32/64位系统上运行</td>
</tr>
<tr>
<td>amd64_arm</td>
<td>64位系统上编译在arm系统上运行</td>
</tr>
</tbody></table>
<ol start="106">
<li>很多时候用QDialog的时候会发现阻塞了消息，而有的时候我们希望是后台的一些消息继续运行不要终止，此时需要做个设置。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QDialog dialog;</span><br><span class="line">dialog.setWindowModality(Qt::WindowModal);</span><br></pre></td></tr></tbody></table></figure>

<ol start="107">
<li>很多初学者甚至几年工作经验的人，对多线程有很深的误解和滥用，尤其是在串口和网络通信这块，什么都往多线程里面丢，一旦遇到界面卡，就把数据收发啥的都搞到多线程里面去，殊不知绝大部分时候那根本没啥用，因为没找到出问题的根源。</li>
</ol>
<ul>
<li>如果你没有使用wait***函数的话，大部分的界面卡都出在数据处理和展示中，比如传过来的是一张图片的数据，你需要将这些数据转成图片，这个肯定是耗时的；</li>
<li>还有就是就收到的数据曲线绘制出来，如果过于频繁或者间隔过短，肯定会给UI造成很大的压力的，最好的办法是解决如何不要频繁绘制UI比如合并数据一起绘制等；</li>
<li>如果是因为绘制UI造成的卡，那多线程也是没啥用的，因为UI只能在主线程；</li>
<li>串口和网络的数据收发默认都是异步的，由操作系统调度的，如果数据处理复杂而且数据量大，你要做的是将数据处理放到多线程中；</li>
<li>如果没有严格的数据同步需求，根本不需要调用wait***之类的函数来立即发送和接收数据，实际需求中大部分的应用场景其实异步收发数据就足够了；</li>
<li>有严格数据同步需求的场景还是放到多线程会好一些，不然你wait***就卡在那边了；</li>
<li>多线程是需要占用系统资源的，理论上来说，如果线程数量超过了CPU的核心数量，其实多线程调度可能花费的时间更多，各位在使用过程中要权衡利弊；</li>
</ul>
<ol start="108">
<li>在嵌入式linux上，如果设置了无边框窗体，而该窗体中又有文本框之类的，发现没法产生焦点进行输入，此时需要主动激活窗体才行。</li>
</ol>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这种方式设置的无边框窗体在嵌入式设备上无法产生焦点</span></span><br><span class="line">setWindowFlags(Qt::WindowStaysOnTopHint | Qt::FramelessWindowHint | Qt::X11BypassWindowManagerHint);</span><br><span class="line"></span><br><span class="line"><span class="comment">//需要在show以后主动激活窗体</span></span><br><span class="line">w-&gt;show();</span><br><span class="line">w-&gt;activateWindow();</span><br></pre></td></tr></tbody></table></figure>

<h3 id="二、其他经验"><a href="#二、其他经验" class="headerlink" title="二、其他经验"></a>二、其他经验</h3><ol>
<li><p>Qt界的中文乱码问题，版本众多导致的如何选择安装包问题，如何打包发布程序的问题，堪称Qt界的三座大山！</p>
</li>
<li><p>在Qt的学习过程中，学会查看对应类的头文件是一个好习惯，如果在该类的头文件没有找到对应的函数，可以去他的父类中找找，实在不行还有爷爷类，肯定能找到的。通过头文件你会发现很多函数接口其实Qt已经帮我们封装好了，有空还可以阅读下他的实现代码。</p>
</li>
<li><p>Qt安装目录下的Examples目录下的例子，看完学完，月薪20K起步；Qt常用类的头文件的函数看完学完使用一遍并加以融会贯通，月薪30K起步。</p>
</li>
<li><p>Qt在开发阶段<strong>不支持中文目录</strong>，切记，这是无数人可能犯的错误，在安装Qt集成开发环境以及编译器的时候，务必记得目录必须英文，否则很可能不正常，建议尽量用默认的安装位置。</p>
</li>
<li><p>如果<strong>出现崩溃和段错误，80%都是因为要么越界，要么未初始化</strong>，死扣这两点，80%的问题解决了。</p>
</li>
<li><p>Qt一共有几百个版本，关于如何选择Qt版本的问题，我一般保留四个版本，为了兼容Qt4用4.8.7，最后的支持XP的版本5.7.0，最新的长期支持版本比如5.12，最高的新版本比如5.14.2。强烈不建议使用5.0到5.3之间的版本，太多BUG和坑，稳定性和兼容性相比于之后的版本相当差，能换就换，不能换睡服领导也要换。</p>
</li>
<li><p>终极秘籍：如果遇到问题搜索Qt方面找不到答案，试着将关键字用JAVA C# android打头，你会发现别有一番天地，其他人很可能做过！</p>
</li>
<li><p>最后一条：<strong>珍爱生命，远离编程</strong>。祝大家头发浓密，睡眠良好，情绪稳定，财富自由！</p>
</li>
</ol>
<h3 id="三、推荐的Qt论坛-个人博客-网站-群"><a href="#三、推荐的Qt论坛-个人博客-网站-群" class="headerlink" title="三、推荐的Qt论坛+个人博客+网站+群"></a>三、推荐的Qt论坛+个人博客+网站+群</h3><table>
<thead>
<tr>
<th>名称</th>
<th>网址</th>
</tr>
</thead>
<tbody><tr>
<td>QQ学习群</td>
<td>Qt交流大会群 853086607 Qt技术交流群 46679801 Qt进阶之路群 734623697</td>
</tr>
<tr>
<td>QtWidget开源demo集合</td>
<td><a href="https://gitee.com/feiyangqingyun/QWidgetDemo" target="_blank" rel="noopener">https://gitee.com/feiyangqingyun/QWidgetDemo</a></td>
</tr>
<tr>
<td>QtQuick/Qml开源demo集合</td>
<td><a href="https://gitee.com/jaredtao/TaoQuick" target="_blank" rel="noopener">https://gitee.com/jaredtao/TaoQuick</a></td>
</tr>
<tr>
<td>qtcn</td>
<td><a href="http://www.qtcn.org" target="_blank" rel="noopener">http://www.qtcn.org</a></td>
</tr>
<tr>
<td>豆子的空间</td>
<td><a href="https://www.devbean.net" target="_blank" rel="noopener">https://www.devbean.net</a></td>
</tr>
<tr>
<td>yafeilinux</td>
<td><a href="http://www.qter.org" target="_blank" rel="noopener">http://www.qter.org</a></td>
</tr>
<tr>
<td>一去二三里</td>
<td><a href="http://blog.csdn.net/liang19890820" target="_blank" rel="noopener">http://blog.csdn.net/liang19890820</a></td>
</tr>
<tr>
<td>乌托邦2号</td>
<td><a href="http://blog.csdn.net/taiyang1987912" target="_blank" rel="noopener">http://blog.csdn.net/taiyang1987912</a></td>
</tr>
<tr>
<td>foruok</td>
<td><a href="http://blog.csdn.net/foruok" target="_blank" rel="noopener">http://blog.csdn.net/foruok</a></td>
</tr>
<tr>
<td>jason</td>
<td><a href="http://blog.csdn.net/wsj18808050" target="_blank" rel="noopener">http://blog.csdn.net/wsj18808050</a></td>
</tr>
<tr>
<td>朝十晚八</td>
<td><a href="http://www.cnblogs.com/swarmbees" target="_blank" rel="noopener">http://www.cnblogs.com/swarmbees</a></td>
</tr>
<tr>
<td>BIG_C_GOD</td>
<td><a href="http://blog.csdn.net/big_c_god" target="_blank" rel="noopener">http://blog.csdn.net/big_c_god</a></td>
</tr>
<tr>
<td>公孙二狗</td>
<td><a href="https://qtdebug.com/qtbook" target="_blank" rel="noopener">https://qtdebug.com/qtbook</a></td>
</tr>
<tr>
<td>雨田哥</td>
<td><a href="https://blog.csdn.net/ly305750665" target="_blank" rel="noopener">https://blog.csdn.net/ly305750665</a></td>
</tr>
<tr>
<td>郑天佐</td>
<td><a href="https://blog.csdn.net/zhengtianzuo06" target="_blank" rel="noopener">https://blog.csdn.net/zhengtianzuo06</a></td>
</tr>
<tr>
<td>寒山-居士</td>
<td><a href="https://blog.csdn.net/esonpo" target="_blank" rel="noopener">https://blog.csdn.net/esonpo</a></td>
</tr>
<tr>
<td>feiyangqingyun</td>
<td><a href="https://blog.csdn.net/feiyangqingyun" target="_blank" rel="noopener">https://blog.csdn.net/feiyangqingyun</a></td>
</tr>
<tr>
<td>前行中小猪</td>
<td><a href="http://blog.csdn.net/goforwardtostep" target="_blank" rel="noopener">http://blog.csdn.net/goforwardtostep</a></td>
</tr>
<tr>
<td>涛哥的知乎专栏</td>
<td><a href="https://zhuanlan.zhihu.com/TaoQt" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/TaoQt</a></td>
</tr>
<tr>
<td>Qt君</td>
<td><a href="https://blog.csdn.net/nicai_xiaoqinxi" target="_blank" rel="noopener">https://blog.csdn.net/nicai_xiaoqinxi</a></td>
</tr>
<tr>
<td>Qt老外视频教程</td>
<td><a href="http://space.bilibili.com/2592237/#!/index" target="_blank" rel="noopener">http://space.bilibili.com/2592237/#!/index</a></td>
</tr>
<tr>
<td>Qt维基补充文档</td>
<td><a href="https://wiki.qt.io/Main" target="_blank" rel="noopener">https://wiki.qt.io/Main</a></td>
</tr>
<tr>
<td>Qt源码查看网站</td>
<td><a href="https://code.woboq.org/qt5" target="_blank" rel="noopener">https://code.woboq.org/qt5</a></td>
</tr>
<tr>
<td>Qt官方下载地址</td>
<td><a href="https://download.qt.io" target="_blank" rel="noopener">https://download.qt.io</a></td>
</tr>
<tr>
<td>Qt官方下载新地址</td>
<td><a href="https://download.qt.io/new_archive/qt/" target="_blank" rel="noopener">https://download.qt.io/new_archive/qt/</a></td>
</tr>
<tr>
<td>Qt国内镜像下载地址</td>
<td><a href="https://mirrors.cloud.tencent.com/qt" target="_blank" rel="noopener">https://mirrors.cloud.tencent.com/qt</a></td>
</tr>
<tr>
<td>精美图表控件QWT</td>
<td><a href="http://qwt.sourceforge.net/" target="_blank" rel="noopener">http://qwt.sourceforge.net/</a></td>
</tr>
<tr>
<td>精美图表控件QCustomPlot</td>
<td><a href="https://www.qcustomplot.com/" target="_blank" rel="noopener">https://www.qcustomplot.com/</a></td>
</tr>
<tr>
<td>免费图标下载</td>
<td><a href="http://www.easyicon.net/" target="_blank" rel="noopener">http://www.easyicon.net/</a></td>
</tr>
<tr>
<td>图形字体下载</td>
<td><a href="https://www.iconfont.cn/" target="_blank" rel="noopener">https://www.iconfont.cn/</a></td>
</tr>
<tr>
<td>漂亮界面网站</td>
<td><a href="https://www.ui.cn/" target="_blank" rel="noopener">https://www.ui.cn/</a></td>
</tr>
</tbody></table>
<h3 id="三、其他"><a href="#三、其他" class="headerlink" title="三、其他"></a>三、其他</h3><ol>
<li>C++入门书籍推荐《C++ primer plus》，进阶书籍推荐《C++ primer》。</li>
<li>Qt入门书籍推荐霍亚飞的《Qt Creator快速入门》，Qt进阶书籍推荐官方的《C++ GUI Qt4编程》，qml书籍推荐《Qt5编程入门》。</li>
<li>强烈推荐程序员自我修养和规划系列书《大话程序员》《程序员的成长课》《解忧程序员》，受益匪浅，受益终生！</li>
</ol>
<blockquote>
<p>全部转载自： <a href="https://gitee.com/feiyangqingyun/qtkaifajingyan" target="_blank" rel="noopener">https://gitee.com/feiyangqingyun/qtkaifajingyan</a> </p>
</blockquote>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    最后更新：<time datetime="2021-03-24T08:42:22.249Z" itemprop="dateUpdated">2021-03-24 16:42:22</time>
</span>


        
        原文链接：<a href="/2020/07/16/Qt开发经验-飞扬青云/" target="_blank" rel="external">http://blog.iwxyi.com/2020/07/16/Qt开发经验-飞扬青云/</a>
        
    </div>
    <footer>
        <div onclick="location.href='http://blog.iwxyi.com'">
            <img src="/img/avatar.jpg" alt="小乂">
            <a>小乂</a>
        </div>
    </footer>
</blockquote>

        
    <div class="page-reward">
        <nav class="myreward">
            <a id="rewardBtn" href="javascript:;"><span>打&nbsp;赏</span><span>装成好像很多人打赏的样子</span></a>
        </nav>
    </div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Qt/">Qt</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/整理/">整理</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.iwxyi.com/2020/07/16/Qt开发经验-飞扬青云/&title=《Qt开发经验-飞扬青云》 — 云笺&pic=http://blog.iwxyi.com/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.iwxyi.com/2020/07/16/Qt开发经验-飞扬青云/&title=《Qt开发经验-飞扬青云》 — 云笺&source=杂而又杂的笔记与感想" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.iwxyi.com/2020/07/16/Qt开发经验-飞扬青云/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Qt开发经验-飞扬青云》 — 云笺&url=http://blog.iwxyi.com/2020/07/16/Qt开发经验-飞扬青云/&via=http://blog.iwxyi.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.iwxyi.com/2020/07/16/Qt开发经验-飞扬青云/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2020/08/10/Dart多态/" id="post-prev" class="post-nav-link">
        <h4 class="title" >
          上一篇：Dart多态
        </h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2020/07/16/C语言文件操作/" id="post-next" class="post-nav-link">
        <h4 class="title" data-hover="下一篇：C语言文件操作">下一篇：C语言文件操作</h4>
      </a>
    </div>
  
</nav>



    
    

    

    
    <!-- Valine Comments -->
    <div class="comments vcomment" id="comments"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
    <!-- Valine Comments script -->
    <script>
        var GUEST_INFO = ['nick','mail','link'];
        var guest_info = 'nick,mail,link'.split(',').filter(function(item){
          return GUEST_INFO.indexOf(item) > -1
        });
        new Valine({
            el: '#comments',
            notify: 'true' == 'true',
            verify: 'false' == 'true',
            appId: "sVjY7bBJXEfCtStMqASgnlL6-gzGzoHsz",
            appKey: "8mL43PwxikVMVpiQx4Pq7wwt",
            avatar: "mm",
            placeholder: "留下您宝贵的建议——",
            guest_info: guest_info.length == 0 ? GUEST_INFO : guest_info,
            pageSize: "10"
        })
    </script>
    <!-- Valine Comments end -->



</article>

</div>

        <footer class="footer">
    <div class="footer-content">
        <span class="power">
            <i class="icon icon-lg icon-copyright"></i>
            2019
            <i class="icon icon-lg icon-heart"></i>
            <a href="http://blog.iwxyi.com">http://blog.iwxyi.com</a>
            <br/>
            Power by
            <a href="https://hexo.io/" target="_blank" rel="external nofollow">Hexo</a>&nbsp;·&nbsp;
            Theme
            <a class="tomotoeslink" href="https://github.com/tomotoes/hexo-theme-tomotoes/" target="_blank" rel="external nofollow">tomotoes</a>
        </span>

        <br/>

        <span id="RunTime" style="color:#a7a7a2;"></span>
        <br/>

        <span>
            
	<i class="icon icon-lg icon-user">
<span id="busuanzi_container_site_uv" style='display:none'>
       访问用户：<span id="busuanzi_value_site_uv"></span>
    </span>人</i>
    ·
    <i class="icon icon-lg icon-eye">
    <span id="busuanzi_container_site_pv" style='display:none'>
      访问次数：<span id="busuanzi_value_site_pv"></span>
    </span>次
    </i>


        </span>
        <br/>

        <span class="license"><a  target="_blank" rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">博客内容遵循 知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
    </div>
</footer>

    </main>
    
        
<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        <span>感谢您的鼓励支持！</span>
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" data-img="/img/dog.png" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.png" data-alipay="/img/alipay.png">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechatPay">&nbsp;&nbsp;微信&nbsp;&nbsp;</span>
                <span class="reward-toggle-item alipayPay">支付宝</span>
            </div>
        </label>
        
        <i class="icon icon-caret-up"></i>
    </div>
</div>


    
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.iwxyi.com/2020/07/16/Qt开发经验-飞扬青云/&title=《Qt开发经验-飞扬青云》 — 云笺&pic=http://blog.iwxyi.com/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.iwxyi.com/2020/07/16/Qt开发经验-飞扬青云/&title=《Qt开发经验-飞扬青云》 — 云笺&source=杂而又杂的笔记与感想" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.iwxyi.com/2020/07/16/Qt开发经验-飞扬青云/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Qt开发经验-飞扬青云》 — 云笺&url=http://blog.iwxyi.com/2020/07/16/Qt开发经验-飞扬青云/&via=http://blog.iwxyi.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.iwxyi.com/2020/07/16/Qt开发经验-飞扬青云/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p class="wechatshare">扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACJElEQVR42u3aS46DMBAFwNz/0mQzi0gR8NoN0WAXq4gJNpVFj/vzesXX9nF939/75vdfk9X2nrrgwsDAeCxjO7z2Nsg3O34q3/fkB8LAwFiAUd3+OLwmwbT6+eSdMTAwMOIg2MFjYGBgXBtwc2Q17GJgYGB0kthOUSxZ4Ue5OAYGxgMZnZLZ3Z9v6W9gYGA8irEVr7ygn7czO+/ztyYGBsbUjDzA9Uts1VGM8vAHBgbG1IxOApkPflVHypKEGQMDYwVGsnS+ZR6m+y0EDAyMNRmdRHSscHZZ+wEDA2NqRjVF7Kev1TGOsRQXAwNjJkYe8saGMJIwnR8Zd3kYGBhTM8YS107IToJvtaiHgYGxAuOORDQfs8gbBoUWJgYGxqSMvFjfaTpWvzP2LAYGxkyM6nKdAdN+u/TkbIuBgTEpox/sqltW/xu0GpwYGBhTMJIXygcyOi/UCsoYGBhTM/Jj1lVBttoiLbAxMDAWYFRHKI6LdGOJbh4/W8NhGBgYj2V0GpMJbCyU58dNDAyMdRh5OnptoT8f1IhOuBgYGAsw8hB8HF7zQJwn0iejYBgYGNMxOqlmcr9DKlAxMDCmZuRXnsSOlf47TQUMDIwVGMlm/QNfJ5WNVsDAwFiAMRb4qj3EvC2ah34MDAyManOxeqf6Y0WTaxgYGBjFklm+e94cvTHgYmBg/GNGksQmow+ddfJWBAYGxmqMsXPXHYloNVXGwMBYgPEGo2QD8Yu+2DAAAAAASUVORK5CYII=" alt="微信分享二维码">
</div>




    <!-- waves按钮特效 -->
<script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>

<!-- 主题配置脚本 -->
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };
</script>

<!-- jquery -->
<script src="/js/jquery.min.js?v=3.0"></script>

<!-- 搜索 -->

<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item waves-block waves-effect" onclick="location.href='{path}'">
    <div class="title ellipsis" title="{title}">{title}</div>
</li>
</template>


<!-- main博客脚本 -->
<script src="/js/main.min.js?v=3.0" ></script>

<!-- 动画&配置 -->
<script src="/js/script.min.js?v=3.0" ></script>

<!-- 脚本管理 -->
<script>

if(window.innerWidth > 800){
	/* 3D标题 */
	$(".content-header").on("mousemove", threedee);

	/* 底部追随鼠标 */
	$(".footer").hover(2);

	/* gotop键的涟漪 */
	$("#gotop").hover(1);

	/* 赞赏的粒子雨 */
	$("#reward").hover(3);

	/* 微信公众号的底部渲染 */
	$("#wechat").hover(4);

    /* 标题跳动 */
    $(".archivestitle").bumpyText();

	/* 图片点击放大 */
	const postimg = jQuery(".post-content img:not(.github-emoji)");
	postimg.on("click",function(){

		mask.classList.add("in");
		main.classList.add("Mask");
		menu.classList.add("Mask");
		var myimg = this.cloneNode(true);
		myimg.classList.add("imgShow");

		setTimeout(function(){
			jQuery(myimg).animate({
				opacity:"1"
			},1000);
		},0);

		document.body.appendChild(myimg);

		myimg.onclick=function(){
			document.body.removeChild(myimg);
			mask.classList.remove("in");
			main.classList.remove("Mask");
			menu.classList.remove("Mask");
		};

	});

}

/* 名字跳动 */
$("#name").bumpyText();


/* 网站运行时间 */
setInterval(function () {
	setTime("2019/10/11");
}, 1000);

/* 文章块的淡出 */
postshow();

/* 座右铭 */

   getHitokoto();



/* 粘贴提示 */
G($(".post-content"), location.href, "小乂");


/* 控制台 */
if (window.console && window.console.log) {
	setTimeout(function () {
		console.log("\n %c 一个坏掉的番茄 %c  © Simon Ma  http://tomotoes.com \n\n", "color:#FFFFFB;background:#1abc9c;padding:5px 0;border-radius:.5rem 0 0 .5rem;", "color:#FFFFFB;background:#080808;padding:5px 0;border-radius:0 .5rem .5rem 0;");
	}, 0);
}

</script>




<!-- 公式渲染 -->



<!-- 不蒜子 -->

<script defer src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/z16.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false}});</script></body>
</html>
